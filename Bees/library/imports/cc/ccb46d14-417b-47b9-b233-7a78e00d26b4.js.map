{"version":3,"sources":["../../../../../../assets/Script/UI/ranking/assets/Script/UI/ranking/RankingView.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"../../../../../../assets/Script/UI/ranking","sourcesContent":["//排行榜界面\n\nimport RankingCell from \"./RankingCell\";\nimport GameCtr from \"../../Controller/GameCtr\";\nimport WXCtr from \"../../Controller/WXCtr\";\nimport Http from \"../../Common/Http\";\nimport UserManager from \"../../Common/UserManager\";\nimport AudioManager from \"../../Common/AudioManager\";\n\nconst { ccclass, property } = cc._decorator;\n@ccclass\nexport default class RankingView extends cc.Component {\n    @property(cc.Node)\n    ndRanking: cc.Node = null\n    @property(cc.Sprite)\n    sprFreindRankScroll: cc.Sprite = null;\n    @property(cc.Node)\n    ndWorldScr: cc.Node = null;\n    @property(cc.Node)\n    ndWorldContent: cc.Node = null;\n    @property(cc.Prefab)\n    pfCell: cc.Prefab = null;\n    @property(cc.Toggle)\n    friendToggle: cc.Toggle = null;\n    @property(cc.Toggle)\n    worldToggle: cc.Toggle = null;\n    @property(cc.Node)\n    ndAuthTip: cc.Node = null;\n    @property(cc.Node)\n    btn_pageUp :cc.Node=null;\n    @property(cc.Node)\n    btn_pageDown:cc.Node=null;\n    @property(cc.Node)\n    btn_share :cc.Node=null;\n    @property(cc.Node)\n    btn_joinRank:cc.Node=null;\n\n\n    @property(cc.Sprite)\n    headImg :cc.Sprite=null;\n    @property(cc.Label)\n    lb_name:cc.Label=null;\n    @property(cc.Label)\n    lb_location:cc.Label=null;\n\n    private worldListData=[];\n    private friendListData=null;\n    private tex = null;\n    private isGetWorldList = false;\n    private isGetFriendList = false;\n    private curPageIndex=0;\n    private interval=0;\n\n    onLoad() {\n        GameCtr.getInstance().setRanking(this);\n        this.btn_share.active=GameCtr.isAudited;\n    }\n\n    start() {\n        if(window.wx != undefined){\n            this.tex = new cc.Texture2D();\n            window.sharedCanvas.width = 900;\n            window.sharedCanvas.height = 1200;\n        }\n\n        this.initRank();\n        this.initSelfInfo();\n    }\n\n    //初始化界面\n    initRank() {\n        if (this.friendToggle.isChecked) {\n            this.curPageIndex=0;\n            this.showFreindRanking();\n        } else if (this.worldToggle.isChecked) {\n            this.curPageIndex=0;\n            this.showWorldRanking();\n        }\n    }\n\n    initSelfInfo(){\n        if(UserManager.user){\n            this.loadImg(this.headImg,UserManager.user.icon);\n            this.lb_name.string=UserManager.user.nick;\n            this.lb_location.string=UserManager.user.city;\n        }\n    }\n\n    //返回结束\n    back() {\n        AudioManager.getInstance().playSound(\"audio/btnClose\");\n        this.showAuthTip(false);\n        this.isGetFriendList = false;\n        this.node.parent.destroy();\n    }\n\n    //显示世界排行\n    showWorldRanking() {\n        console.log('点击了世界排行榜');\n        this.ndWorldScr.active = true;\n        this.sprFreindRankScroll.node.active = false;\n        if (!WXCtr.authed) {\n            console.log(\"未授权，引导获取授权！！！\");\n            this.btn_joinRank.active=true; \n        }else{\n            this.btn_joinRank.active=false; \n        }\n        if (!this.isGetWorldList) {\n            this.getWorldRankingData();\n        }\n    }\n\n    onBtnPageUp(){\n        AudioManager.getInstance().playSound(\"audio/open_panel\");\n        if(this.curPageIndex==0){return}\n        this.curPageIndex--\n        if(this.ndWorldScr.active){\n            this.showRanklist(this.ndWorldScr,this.worldListData,this.curPageIndex);\n        }\n\n        if(this.sprFreindRankScroll.node.active){\n            WXCtr.showFriendRanking(this.curPageIndex);\n        } \n    }\n\n    onBtnPageDown(){\n        AudioManager.getInstance().playSound(\"audio/open_panel\");\n        if(this.ndWorldScr.active){\n            if((this.curPageIndex+1)*7>=this.worldListData.length){return;}\n        }\n\n        \n        this.curPageIndex++\n        if(this.ndWorldScr.active){\n            this.showRanklist(this.ndWorldScr,this.worldListData,this.curPageIndex);\n        }\n\n        if(this.sprFreindRankScroll.node.active){\n            WXCtr.showFriendRanking(this.curPageIndex);\n        }\n    }\n\n    onBtnJoinRank(){\n        AudioManager.getInstance().playSound(\"audio/open_panel\");\n        this.showAuthTip(true);\n    }\n\n    onBtnShare(){\n        AudioManager.getInstance().playSound(\"audio/open_panel\");\n        WXCtr.share();\n    }\n\n    showRanklist(parent,rankList,index=0){\n        this.curPageIndex=index;\n        parent.removeAllChildren();\n        let startIndex=index*7;\n        let endIndex=(index*7+7)>rankList.length?rankList.length:(index*7+7);\n        for(let i=startIndex;i<endIndex;i++){\n            let off_y=i%7>=3?-35:0;\n            let nd = cc.instantiate(this.pfCell);\n            parent.addChild(nd);\n            nd.x=2;\n            nd.y=530+(i%7)*(-132)+off_y;\n            let rankingCell: RankingCell = nd.getComponent(RankingCell);\n            rankingCell.setData(i+1, rankList[i]);\n        }\n    }\n\n    showAuthTip(isShow = false) {\n        this.ndAuthTip.active = isShow;\n        if(isShow) {\n            WXCtr.userInfoBtn.show();\n        }else{\n            WXCtr.userInfoBtn.hide();\n        }\n    }\n\n    //获取世界排行数据\n    getWorldRankingData() {\n        Http.send({\n            url: Http.UrlConfig.GET_RANK_LIST,\n            success: (resp) => {\n                console.log(\"getWorldList response == \", resp);\n                this.isGetWorldList = true;\n                this.setWorldList(resp.data);\n            },\n            data: {\n                uid: UserManager.user_id,\n                voucher:UserManager.voucher,\n            }\n        });\n    }\n\n    //设置世界排行\n    setWorldList(list) {\n        for(let i in list){\n            this.worldListData.push(list[i])\n        }\n        this.showRanklist(this.ndWorldScr,this.worldListData,0);\n    }\n\n    //设置世界排行自己数据\n    setSelfWorldData(rank, data) {\n        let nd = this.ndWorldScr.getChildByName(\"SelfRanking\");\n        nd.active = true;\n        let rankingCell: RankingCell = nd.getComponent(RankingCell);\n        rankingCell.setData(rank, data);\n    }\n\n    //显示好友排行\n    showFreindRanking() {\n        this.sprFreindRankScroll.node.active = true;\n        this.ndWorldScr.active = false;\n        this.showAuthTip(false);\n        if (!this.isGetFriendList) {\n            this.isGetFriendList = true;\n            WXCtr.showFriendRanking(this.curPageIndex);\n        }\n    }\n\n    loadImg(spr, imgUrl) {\n        if(!imgUrl||imgUrl==\"\"){return;}\n        cc.loader.load({\n            url: imgUrl,\n            type: 'jpg'\n        }, (err, texture) => {\n            spr.spriteFrame = new cc.SpriteFrame(texture);\n        });\n    }\n\n    //关闭世界排行\n    onCloseRank() {\n        this.ndRanking.active = false;\n    }\n\n     // 刷新子域的纹理\n     _updateSubDomainCanvas() {\n        if (window.sharedCanvas != undefined && this.tex != null && this.ndRanking.active && this.sprFreindRankScroll.node.active) {\n            this.tex.initWithElement(window.sharedCanvas);\n            this.tex.handleLoadedTexture();\n            this.sprFreindRankScroll.spriteFrame = new cc.SpriteFrame(this.tex);\n        }\n    }\n    \n    update() {\n        this._updateSubDomainCanvas();\n    }\n\n};"]}
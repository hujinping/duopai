{"version":3,"sources":["../../../../../../assets/Script/UI/component/assets/Script/UI/component/award.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"../../../../../../assets/Script/UI/component","sourcesContent":["import AudioManager from \"../../Common/AudioManager\";\nimport GameCtr from \"../../Controller/GameCtr\";\nconst {ccclass, property} = cc._decorator;\n@ccclass\nexport default class NewClass extends cc.Component {\n    _btn_getAward=null;\n    _lb_des=null;\n    _award=null;\n    _light=null;\n    _starNode=null;\n    _awarData=null;\n\n    onLoad(){\n        this.initNode();\n        this.initStarAction();\n    }\n\n    initNode(){\n        this._btn_getAward=this.node.getChildByName(\"btn_get\");\n        this._lb_des=this.node.getChildByName(\"lb_des\");\n        this._award=this.node.getChildByName(\"award\");\n        this._light=this.node.getChildByName(\"light\");\n        this._starNode=this.node.getChildByName(\"starNode\");\n\n        this.initBtnEvent(this._btn_getAward);\n    }\n\n    initBtnEvent(btn){\n        btn.on(cc.Node.EventType.TOUCH_END,(e)=>{\n            if(e.target.getName()==\"btn_get\"){\n                AudioManager.getInstance().playSound(\"audio/btnClose\");\n                this.getAward();\n                this.node.destroy();\n                this.node.parent.destroy();\n            }\n        })\n    }\n\n    initStarAction(){\n        this._starNode.children[0].runAction(cc.repeatForever(cc.sequence(cc.scaleTo(1.0,1.2),cc.scaleTo(1.5,0.4))));\n        this._starNode.children[1].runAction(cc.repeatForever(cc.sequence(cc.scaleTo(1.0,0.4),cc.scaleTo(1.5,1.0))))\n        this._starNode.children[2].runAction(cc.repeatForever(cc.sequence(cc.scaleTo(1.0,0.8),cc.scaleTo(1.5,1.0))))\n        this._starNode.children[3].runAction(cc.repeatForever(cc.sequence(cc.scaleTo(1.0,1.1),cc.scaleTo(1.5,0.7))))\n        this._starNode.children[4].runAction(cc.repeatForever(cc.sequence(cc.scaleTo(1.0,0.3),cc.scaleTo(1.5,0.9))))\n    }\n\n\n    showAward(awardData){\n        this._awarData=awardData;\n        cc.loader.loadRes(\"textures/game1/award_\"+(awardData.id-1), cc.SpriteFrame,  (err, spriteFrame)=> {\n            this._award.getComponent(cc.Sprite).spriteFrame=spriteFrame;\n            this._lb_des.getComponent(cc.Label).string=awardData.des;\n            if(awardData.gold){\n                this._lb_des.getComponent(cc.Label).string=awardData.des;\n                let speed=this.getIncomeSpeed();\n                this._lb_des.getComponent(cc.Label).string=Math.floor(speed*awardData.gold*60)+\"金币\";\n            }\n        });\n    }\n\n    getAward(){\n        let gold=this._awarData.gold;\n        let realMoney=this._awarData.realMoney;\n        let speedup=this._awarData.speedup;\n        let doubleIncome=this._awarData.doubleIncome;\n\n        if(gold){\n            let speed=this.getIncomeSpeed();\n            GameCtr.money+=Math.floor(speed*gold*60);\n            GameCtr.rich+=Math.floor(speed*gold*60);\n        }\n\n        if(realMoney){\n\n        }\n\n        if(speedup){\n            GameCtr.globalSpeedRate=2;\n            GameCtr.getInstance().getManufacture().resetLineAction();\n            let curSpeedUpTime=GameCtr.getInstance().getGame().getCurSpeedUpTime();\n            let speedUpTime=curSpeedUpTime>0?speedup*60+curSpeedUpTime:speedup*60;\n            GameCtr.getInstance().getGame().startSpeedUpTimer(speedUpTime);\n        }\n\n        if(doubleIncome){\n            GameCtr.incomeRate=2;\n            GameCtr.getInstance().getManufacture().startDoubleTimer(speedup*60);\n        }\n    }\n\n    getIncomeSpeed(){\n        let combsUnlock=JSON.parse(GameCtr.getInstance().getCombsUnlock());\n        let manufactures_speed=GameCtr.manufactureConfig[GameCtr.ManufactureLevel-1].perBonus/\n                                (GameCtr.manufactureConfig[GameCtr.ManufactureLevel-1].productTime+\n                                    GameCtr.manufactureConfig[GameCtr.ManufactureLevel-1].transferTime);\n\n        let combs_speed=0;\n        for(let i=0;i<GameCtr.comblevel;i++){\n            combs_speed+=(GameCtr.combConfig[i].initialIncome+GameCtr.combConfig[i].incomeMatrix*(combsUnlock[i].level-1)*combsUnlock[i].level)/(GameCtr.combConfig[i].baseSpeed*2)\n        }\n        let finalSpeed =combs_speed>=manufactures_speed?manufactures_speed:combs_speed;\n        return finalSpeed;\n    }\n}\n"]}
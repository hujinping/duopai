{"version":3,"sources":["..\\..\\..\\..\\..\\..\\assets\\Script\\UI\\game/assets\\Script\\UI\\game\\level.ts"],"names":[],"mappings":";;;;;AACM,IAAA,kBAAmC,EAAlC,oBAAO,EAAE,sBAAQ,CAAkB;AAC1C,0DAAqD;AACrD,oDAA+C;AAC/C,0CAAqC;AAErC;IAAsC,4BAAY;IADlD;QAAA,qEAgLC;QA5KG,kBAAY,GAAW,IAAI,CAAC;QAEpB,cAAQ,GAAC,IAAI,CAAC;QACd,cAAQ,GAAC,IAAI,CAAC;QACd,aAAO,GAAC,IAAI,CAAC;QACb,iBAAW,GAAC,IAAI,CAAC;QACjB,gBAAU,GAAC,IAAI,CAAC;QAChB,cAAQ,GAAC,IAAI,CAAC;QACd,iBAAW,GAAC,IAAI,CAAC;QACjB,cAAQ,GAAC,IAAI,CAAC;QACd,cAAQ,GAAC,IAAI,CAAC;;IAkK1B,CAAC;IAhKG,yBAAM,GAAN;QACI,iBAAO,CAAC,WAAW,EAAE,CAAC,QAAQ,CAAC,IAAI,CAAC,CAAC;QACrC,IAAI,CAAC,QAAQ,EAAE,CAAC;QAChB,IAAI,CAAC,UAAU,EAAE,CAAC;IACtB,CAAC;IAED,2BAAQ,GAAR;QACI,IAAI,CAAC,QAAQ,GAAC,IAAI,CAAC,IAAI,CAAC,cAAc,CAAC,UAAU,CAAC,CAAC;QACnD,IAAI,CAAC,QAAQ,GAAC,IAAI,CAAC,IAAI,CAAC,cAAc,CAAC,UAAU,CAAC,CAAC;QACnD,IAAI,CAAC,OAAO,GAAC,IAAI,CAAC,IAAI,CAAC,cAAc,CAAC,SAAS,CAAC,CAAC;QACjD,IAAI,CAAC,WAAW,GAAC,IAAI,CAAC,IAAI,CAAC,cAAc,CAAC,aAAa,CAAC,CAAC;QACzD,IAAI,CAAC,UAAU,GAAC,IAAI,CAAC,WAAW,CAAC,cAAc,CAAC,OAAO,CAAC,CAAC;QACzD,IAAI,CAAC,QAAQ,GAAC,IAAI,CAAC,IAAI,CAAC,cAAc,CAAC,UAAU,CAAC,CAAC;QAEnD,IAAI,CAAC,UAAU,CAAC,MAAM,GAAC,KAAK,CAAC;QAC7B,IAAI,CAAC,QAAQ,CAAC,YAAY,CAAC,EAAE,CAAC,WAAW,CAAC,CAAC,QAAQ,GAAC,CAAC,CAAC;QACtD,IAAI,CAAC,QAAQ,CAAC,YAAY,CAAC,EAAE,CAAC,KAAK,CAAC,CAAC,MAAM,GAAC,CAAC,CAAC;QAE9C,IAAG,iBAAO,CAAC,WAAW,EAAE,CAAC,QAAQ,EAAE,EAAC;YAChC,IAAI,CAAC,QAAQ,CAAC,YAAY,CAAC,EAAE,CAAC,KAAK,CAAC,CAAC,MAAM,GAAC,cAAI,CAAC,YAAY,CAAC,iBAAO,CAAC,WAAW,EAAE,CAAC,QAAQ,EAAE,CAAC,CAAC;SACnG;QACD,IAAG,iBAAO,CAAC,WAAW,EAAE,CAAC,aAAa,EAAE,EAAC;YACrC,IAAI,CAAC,QAAQ,CAAC,YAAY,CAAC,EAAE,CAAC,WAAW,CAAC,CAAC,QAAQ,GAAC,iBAAO,CAAC,WAAW,EAAE,CAAC,aAAa,EAAE,GAAC,iBAAO,CAAC,WAAW,CAAC,iBAAO,CAAC,KAAK,GAAC,CAAC,CAAC,CAAC,IAAI,CAAC;SACvI;QAED,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC;QACpC,IAAI,CAAC,QAAQ,EAAE,CAAC;QAChB,IAAI,CAAC,cAAc,EAAE,CAAC;QACtB,IAAI,CAAC,YAAY,EAAE,CAAC;IACxB,CAAC;IAED,+BAAY,GAAZ,UAAa,GAAG;QAAhB,iBAmBC;QAlBG,GAAG,CAAC,EAAE,CAAC,EAAE,CAAC,IAAI,CAAC,SAAS,CAAC,SAAS,EAAC,UAAC,CAAC;YACjC,IAAG,CAAC,CAAC,MAAM,CAAC,OAAO,EAAE,IAAE,aAAa,EAAC;gBACjC,IAAG,CAAC,KAAI,CAAC,WAAW,CAAC,YAAY,CAAC,EAAE,CAAC,MAAM,CAAC,CAAC,YAAY,EAAC;oBAAC,OAAM;iBAAC;gBAClE,IAAG,EAAE,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC,cAAc,CAAC,cAAc,CAAC,EAAC;oBAAC,OAAO;iBAAC;gBAC7D,IAAG,KAAI,CAAC,UAAU,EAAE,EAAC;oBAAC,OAAM;iBAAC;gBAC7B,IAAI,YAAY,GAAC,EAAE,CAAC,WAAW,CAAC,KAAI,CAAC,YAAY,CAAC,CAAC;gBACnD,YAAY,CAAC,MAAM,GAAC,EAAE,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;gBACtC,YAAY,CAAC,cAAc,CAAC,CAAC,CAAC,CAAC;gBAC/B,YAAY,CAAC,CAAC,GAAC,CAAC,IAAI,CAAC;gBACrB,YAAY,CAAC,SAAS,CAAC,EAAE,CAAC,MAAM,CAAC,GAAG,EAAC,EAAE,CAAC,CAAC,CAAC,CAAC,EAAC,IAAI,CAAC,CAAC,CAAC,MAAM,CAAC,EAAE,CAAC,cAAc,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;gBACnF,iBAAO,CAAC,WAAW,EAAE,CAAC,OAAO,EAAE,CAAC,YAAY,CAAC,IAAI,CAAC,CAAC;gBACnD,sBAAY,CAAC,WAAW,EAAE,CAAC,SAAS,CAAC,kBAAkB,CAAC,CAAC;gBAEzD,IAAG,CAAC,iBAAO,CAAC,WAAW,EAAE,CAAC,OAAO,EAAE,CAAC,eAAe,CAAC,CAAC,CAAC,EAAC;oBACnD,iBAAO,CAAC,WAAW,EAAE,CAAC,OAAO,EAAE,CAAC,iBAAiB,CAAC,iBAAO,CAAC,WAAW,EAAE,CAAC,OAAO,EAAE,CAAC,IAAI,EAAC,CAAC,CAAC,CAAC;iBAC7F;aACJ;QACL,CAAC,CAAC,CAAA;IACN,CAAC;IAED,0BAAO,GAAP;QACI,iBAAO,CAAC,KAAK,IAAE,iBAAO,CAAC,WAAW,CAAC,iBAAO,CAAC,KAAK,GAAC,CAAC,CAAC,CAAC,KAAK,CAAC;QAC1D,iBAAO,CAAC,IAAI,IAAE,iBAAO,CAAC,WAAW,CAAC,iBAAO,CAAC,KAAK,GAAC,CAAC,CAAC,CAAC,KAAK,CAAC;QACzD,iBAAO,CAAC,UAAU,GAAC,CAAC,CAAC;QACrB,IAAI,CAAC,QAAQ,EAAE,CAAC;QAChB,iBAAO,CAAC,KAAK,IAAE,CAAC,CAAC;QACjB,IAAI,CAAC,cAAc,EAAE,CAAC;QACtB,IAAI,CAAC,QAAQ,EAAE,CAAC;QAChB,iBAAO,CAAC,WAAW,EAAE,CAAC,cAAc,EAAE,CAAC;QACvC,IAAI,CAAC,QAAQ,CAAC,YAAY,CAAC,EAAE,CAAC,WAAW,CAAC,CAAC,QAAQ,GAAC,CAAC,CAAC;IAC1D,CAAC;IAID,2BAAQ,GAAR;QACI,IAAI,CAAC,QAAQ,CAAC,YAAY,CAAC,EAAE,CAAC,KAAK,CAAC,CAAC,MAAM,GAAC,IAAI,GAAC,iBAAO,CAAC,KAAK,CAAC;QAC/D,IAAG,iBAAO,CAAC,UAAU,CAAC,iBAAO,CAAC,SAAS,CAAC,CAAC,SAAS,IAAE,iBAAO,CAAC,KAAK,EAAC;YAC9D,iBAAO,CAAC,WAAW,EAAE,CAAC,OAAO,EAAE,CAAC,UAAU,EAAE,CAAC;SAChD;IACL,CAAC;IAED,2BAAQ,GAAR;QACI,IAAI,CAAC,QAAQ,CAAC,MAAM,GAAC,IAAI,CAAC,KAAK,CAAC,iBAAO,CAAC,KAAK,CAAC,CAAC;QAC/C,IAAG,IAAI,CAAC,QAAQ,CAAC,KAAK,GAAC,IAAI,CAAC,QAAQ,CAAC,MAAM,EAAC;YACxC,IAAI,CAAC,QAAQ,CAAC,YAAY,CAAC,EAAE,CAAC,KAAK,CAAC,CAAC,MAAM,GAAC,cAAI,CAAC,YAAY,CAAC,IAAI,CAAC,QAAQ,CAAC,MAAM,CAAC,CAAC;YACpF,IAAI,CAAC,QAAQ,CAAC,KAAK,GAAC,IAAI,CAAC,QAAQ,CAAC,MAAM,CAAC;SAC5C;QACD,iBAAO,CAAC,WAAW,EAAE,CAAC,OAAO,EAAE,CAAC,iBAAiB,EAAE,CAAC;IACxD,CAAC;IAED,+BAAY,GAAZ;QACI,IAAI,CAAC,QAAQ,CAAC,YAAY,CAAC,EAAE,CAAC,KAAK,CAAC,CAAC,MAAM,GAAC,cAAI,CAAC,YAAY,CAAC,iBAAO,CAAC,KAAK,CAAC,CAAC;QAC7E,IAAI,CAAC,QAAQ,CAAC,KAAK,GAAC,iBAAO,CAAC,KAAK,CAAC;IACtC,CAAC;IAED,8BAAW,GAAX;QACI,IAAG,IAAI,CAAC,QAAQ,CAAC,MAAM,IAAI,IAAI,CAAC,QAAQ,CAAC,MAAM,IAAE,IAAI,CAAC,QAAQ,CAAC,KAAK,EAAC;YACjE,IAAI,CAAC,QAAQ,GAAC,IAAI,CAAC;YAEnB,KAAI,IAAI,CAAC,GAAE,CAAC,EAAC,CAAC,GAAC,EAAE,EAAC,CAAC,EAAE,EAAC;gBAClB,IAAG,IAAI,CAAC,QAAQ,CAAC,MAAM,GAAC,IAAI,CAAC,QAAQ,CAAC,KAAK,GAAC,IAAI,CAAC,GAAG,CAAC,EAAE,EAAC,CAAC,CAAC,EAAC;oBACvD,IAAI,CAAC,QAAQ,GAAC,CAAC,IAAE,CAAC,CAAA,CAAC,CAAA,CAAC,CAAA,CAAC,CAAA,IAAI,CAAC,GAAG,CAAC,EAAE,EAAC,CAAC,GAAC,CAAC,CAAC,CAAA;oBACrC,MAAM;iBACT;aACJ;YACD,IAAI,CAAC,QAAQ,CAAC,YAAY,CAAC,EAAE,CAAC,KAAK,CAAC,CAAC,MAAM,GAAC,cAAI,CAAC,YAAY,CAAC,IAAI,CAAC,QAAQ,CAAC,KAAK,GAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;YACjG,IAAI,CAAC,QAAQ,CAAC,KAAK,IAAE,IAAI,CAAC,QAAQ,CAAC;SACtC;IACL,CAAC;IAED,sCAAmB,GAAnB;QACI,IAAG,iBAAO,CAAC,KAAK,IAAE,iBAAO,CAAC,cAAc,EAAC;YAAC,OAAM;SAAC;QACjD,IAAI,CAAC,QAAQ,CAAC,YAAY,CAAC,EAAE,CAAC,WAAW,CAAC,CAAC,QAAQ,GAAC,iBAAO,CAAC,UAAU,GAAC,iBAAO,CAAC,WAAW,CAAC,iBAAO,CAAC,KAAK,GAAC,CAAC,CAAC,CAAC,IAAI,CAAC;IACrH,CAAC;IAED,6BAAU,GAAV;QACI,IAAI,CAAC,WAAW,GAAG,IAAI,IAAI,CAAC,IAAI,CAAC,GAAG,EAAE,CAAC,CAAC;QACxC,IAAG,IAAI,CAAC,WAAW,CAAC,UAAU,EAAE,GAAC,EAAE,EAAC;YAChC,IAAI,CAAC,OAAO,CAAC,YAAY,CAAC,EAAE,CAAC,KAAK,CAAC,CAAC,MAAM,GAAE,IAAI,CAAC,WAAW,CAAC,QAAQ,EAAE,GAAC,IAAI,GAAC,IAAI,CAAC,WAAW,CAAC,UAAU,EAAE,CAAC;SAC9G;aAAI;YACD,IAAI,CAAC,OAAO,CAAC,YAAY,CAAC,EAAE,CAAC,KAAK,CAAC,CAAC,MAAM,GAAE,IAAI,CAAC,WAAW,CAAC,QAAQ,EAAE,GAAC,GAAG,GAAC,IAAI,CAAC,WAAW,CAAC,UAAU,EAAE,CAAC;SAC7G;QACD,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,IAAI,CAAC,EAAC,EAAE,CAAC,CAAA;IACpD,CAAC;IAED,iCAAc,GAAd;QACI,IAAG,IAAI,CAAC,UAAU,EAAE,EAAC;YACjB,IAAI,YAAY,GAAC,IAAI,CAAC,WAAW,CAAC,cAAc,CAAC,cAAc,CAAC,CAAC;YACjE,IAAI,cAAc,GAAC,IAAI,CAAC,WAAW,CAAC,cAAc,CAAC,gBAAgB,CAAC,CAAC;YACrE,YAAY,CAAC,MAAM,GAAC,KAAK,CAAC;YAC1B,cAAc,CAAC,MAAM,GAAC,IAAI,CAAC;YAC3B,IAAI,CAAC,UAAU,CAAC,KAAK,CAAC,CAAC;YACvB,OAAO;SACV;QAED,IAAG,iBAAO,CAAC,UAAU,IAAE,iBAAO,CAAC,WAAW,CAAC,iBAAO,CAAC,KAAK,GAAC,CAAC,CAAC,CAAC,IAAI,EAAC;YAC7D,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,CAAC;YACtB,OAAO;YACP,IAAG,CAAC,EAAE,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC,aAAa,CAAC,iBAAO,CAAC,UAAU,GAAC,CAAC,CAAC,IAAG,CAAE,iBAAO,CAAC,WAAW,EAAE,CAAC,OAAO,EAAE,CAAC,eAAe,CAAC,CAAC,CAAC,EAAC;gBAC7G,iBAAO,CAAC,WAAW,EAAE,CAAC,OAAO,EAAE,CAAC,cAAc,EAAE,CAAC;aACpD;SACJ;aAAI;YACD,IAAI,CAAC,UAAU,CAAC,KAAK,CAAC,CAAC;YACvB,IAAG,CAAC,iBAAO,CAAC,WAAW,EAAE,CAAC,OAAO,EAAE,CAAC,eAAe,CAAC,CAAC,CAAC,EAAC;gBACnD,iBAAO,CAAC,WAAW,EAAE,CAAC,OAAO,EAAE,CAAC,cAAc,CAAC,iBAAO,CAAC,WAAW,EAAE,CAAC,OAAO,EAAE,CAAC,IAAI,EAAC,CAAC,CAAC,CAAC;aAC1F;SACJ;IACL,CAAC;IAED,6BAAU,GAAV,UAAW,YAAY;QACnB,IAAI,CAAC,WAAW,CAAC,YAAY,CAAC,EAAE,CAAC,MAAM,CAAC,CAAC,YAAY,GAAC,YAAY,CAAC;QACnE,IAAI,CAAC,UAAU,CAAC,MAAM,GAAC,YAAY,CAAC;QAEpC,IAAG,IAAI,CAAC,UAAU,CAAC,MAAM,EAAC;YACtB,IAAI,CAAC,WAAW,CAAC,SAAS,CAAC,EAAE,CAAC,aAAa,CAAC,EAAE,CAAC,QAAQ,CACnD,EAAE,CAAC,OAAO,CAAC,GAAG,EAAC,GAAG,CAAC,EACnB,EAAE,CAAC,OAAO,CAAC,GAAG,EAAC,GAAG,CAAC,CACtB,CAAC,CAAC,CAAA;SACN;aAAI;YACD,IAAI,CAAC,WAAW,CAAC,cAAc,EAAE,CAAC;SACrC;IACL,CAAC;IAED,6BAAU,GAAV;QACI,OAAO,iBAAO,CAAC,KAAK,IAAE,iBAAO,CAAC,cAAc,CAAC;IACjD,CAAC;IAzKD;QADC,QAAQ,CAAC,EAAE,CAAC,MAAM,CAAC;kDACQ;IAHX,QAAQ;QAD5B,OAAO;OACa,QAAQ,CA+K5B;IAAD,eAAC;CA/KD,AA+KC,CA/KqC,EAAE,CAAC,SAAS,GA+KjD;kBA/KoB,QAAQ","file":"","sourceRoot":"..\\..\\..\\..\\..\\..\\assets\\Script\\UI\\game","sourcesContent":["\r\nconst {ccclass, property} = cc._decorator;\r\nimport AudioManager from \"../../Common/AudioManager\";\r\nimport GameCtr from \"../../Controller/GameCtr\";\r\nimport Util from \"../../Common/Util\";\r\n@ccclass\r\nexport default class NewClass extends cc.Component {\r\n\r\n    @property(cc.Prefab)\r\n    levelUpgrade:cc.Prefab=null;\r\n\r\n    private lb_level=null;\r\n    private lb_money=null;\r\n    private lb_time=null;\r\n    private btn_upgrade=null;\r\n    private icon_Arrow=null;\r\n    private progress=null;\r\n    private currentTime=null;\r\n    private money_up=null;\r\n    private curMoney=null;\r\n\r\n    onLoad(){\r\n        GameCtr.getInstance().setLevel(this);\r\n        this.initNode();\r\n        this.updateTime();\r\n    }\r\n\r\n    initNode(){\r\n        this.lb_level=this.node.getChildByName(\"lb_level\");\r\n        this.lb_money=this.node.getChildByName(\"lb_money\");\r\n        this.lb_time=this.node.getChildByName(\"lb_time\");\r\n        this.btn_upgrade=this.node.getChildByName(\"btn_upgrade\");\r\n        this.icon_Arrow=this.btn_upgrade.getChildByName(\"arrow\");\r\n        this.progress=this.node.getChildByName(\"progress\");\r\n\r\n        this.icon_Arrow.active=false;\r\n        this.progress.getComponent(cc.ProgressBar).progress=0;\r\n        this.lb_money.getComponent(cc.Label).string=0;\r\n\r\n        if(GameCtr.getInstance().getMoney()){\r\n            this.lb_money.getComponent(cc.Label).string=Util.formatNumber(GameCtr.getInstance().getMoney());\r\n        }\r\n        if(GameCtr.getInstance().getLevelMoney()){\r\n            this.progress.getComponent(cc.ProgressBar).progress=GameCtr.getInstance().getLevelMoney()/GameCtr.levelConfig[GameCtr.level-1].need;\r\n        }\r\n\r\n        this.initBtnEvent(this.btn_upgrade);\r\n        this.setLevel();\r\n        this.showBtnUpGrade();\r\n        this.initMoneyVal();\r\n    }\r\n\r\n    initBtnEvent(btn){\r\n        btn.on(cc.Node.EventType.TOUCH_END,(e)=>{\r\n            if(e.target.getName()==\"btn_upgrade\"){\r\n                if(!this.btn_upgrade.getComponent(cc.Button).interactable){return}\r\n                if(cc.find(\"Canvas\").getChildByName(\"levelUpgrade\")){return;}\r\n                if(this.isMaxLevel()){return}\r\n                let levelUpgrade=cc.instantiate(this.levelUpgrade);\r\n                levelUpgrade.parent=cc.find(\"Canvas\");\r\n                levelUpgrade.setLocalZOrder(1);\r\n                levelUpgrade.y=-1218;\r\n                levelUpgrade.runAction(cc.moveBy(0.4,cc.p(0,1218)).easing(cc.easeElasticOut(3.0)));\r\n                GameCtr.getInstance().getGame().setMaskVisit(true);\r\n                AudioManager.getInstance().playSound(\"audio/open_panel\");\r\n\r\n                if(!GameCtr.getInstance().getGame().isGuideStepOver(4)){\r\n                    GameCtr.getInstance().getGame().completeGuideStep(GameCtr.getInstance().getGame().node,4);\r\n                }\r\n            }\r\n        })\r\n    }\r\n\r\n    upgrade(){\r\n        GameCtr.money+=GameCtr.levelConfig[GameCtr.level-1].award;\r\n        GameCtr.rich+=GameCtr.levelConfig[GameCtr.level-1].award;\r\n        GameCtr.levelMoney=0;\r\n        this.setMoney();\r\n        GameCtr.level+=1;\r\n        this.showBtnUpGrade();\r\n        this.setLevel();\r\n        GameCtr.getInstance().setPlayerLevel();\r\n        this.progress.getComponent(cc.ProgressBar).progress=0;\r\n    }\r\n\r\n\r\n\r\n    setLevel(){\r\n        this.lb_level.getComponent(cc.Label).string=\"Lv\"+GameCtr.level;\r\n        if(GameCtr.combConfig[GameCtr.comblevel].needLevel==GameCtr.level){\r\n            GameCtr.getInstance().getGame().unlockComb();\r\n        }\r\n    }\r\n\r\n    setMoney(){\r\n        this.lb_money.target=Math.floor(GameCtr.money);\r\n        if(this.lb_money.value>this.lb_money.target){\r\n            this.lb_money.getComponent(cc.Label).string=Util.formatNumber(this.lb_money.target);\r\n            this.lb_money.value=this.lb_money.target;\r\n        }\r\n        GameCtr.getInstance().getGame().noticeMoneyUpdate();\r\n    } \r\n\r\n    initMoneyVal(){\r\n        this.lb_money.getComponent(cc.Label).string=Util.formatNumber(GameCtr.money);\r\n        this.lb_money.value=GameCtr.money;\r\n    }\r\n\r\n    updateMoney(){\r\n        if(this.lb_money.target && this.lb_money.target!=this.lb_money.value){\r\n            this.money_up=null;\r\n\r\n            for(let i =1;i<50;i++){\r\n                if(this.lb_money.target-this.lb_money.value<Math.pow(10,i)){\r\n                    this.money_up=i==1?1:Math.pow(10,i-1)\r\n                    break;\r\n                }\r\n            }\r\n            this.lb_money.getComponent(cc.Label).string=Util.formatNumber(this.lb_money.value+this.money_up);\r\n            this.lb_money.value+=this.money_up;\r\n        }\r\n    }\r\n\r\n    updateLevelProgress(){\r\n        if(GameCtr.level>=GameCtr.maxPlayerLevel){return}\r\n        this.progress.getComponent(cc.ProgressBar).progress=GameCtr.levelMoney/GameCtr.levelConfig[GameCtr.level-1].need;\r\n    }\r\n\r\n    updateTime(){\r\n        this.currentTime = new Date(Date.now());\r\n        if(this.currentTime.getMinutes()<10){\r\n            this.lb_time.getComponent(cc.Label).string= this.currentTime.getHours()+\":0\"+this.currentTime.getMinutes();\r\n        }else{\r\n            this.lb_time.getComponent(cc.Label).string= this.currentTime.getHours()+\":\"+this.currentTime.getMinutes();\r\n        }\r\n        this.scheduleOnce(this.updateTime.bind(this),30)\r\n    }\r\n\r\n    showBtnUpGrade(){\r\n        if(this.isMaxLevel()){\r\n            let word_levelUP=this.btn_upgrade.getChildByName(\"word_levelUp\");\r\n            let word_fullLevel=this.btn_upgrade.getChildByName(\"word_fullLevel\");\r\n            word_levelUP.active=false;\r\n            word_fullLevel.active=true;\r\n            this.enabledBtn(false);\r\n            return;\r\n        }\r\n\r\n        if(GameCtr.levelMoney>=GameCtr.levelConfig[GameCtr.level-1].need){\r\n            this.enabledBtn(true);\r\n            //新手引导4\r\n            if(!cc.find(\"Canvas\").getChildByTag(GameCtr.tipHandTag+4) &&! GameCtr.getInstance().getGame().isGuideStepOver(4)){\r\n                GameCtr.getInstance().getGame().showGuideStep4();\r\n            }\r\n        }else{\r\n            this.enabledBtn(false);\r\n            if(!GameCtr.getInstance().getGame().isGuideStepOver(4)){\r\n                GameCtr.getInstance().getGame().closeGuideStep(GameCtr.getInstance().getGame().node,4);\r\n            }\r\n        }\r\n    }\r\n\r\n    enabledBtn(isEffectable){\r\n        this.btn_upgrade.getComponent(cc.Button).interactable=isEffectable;\r\n        this.icon_Arrow.active=isEffectable;\r\n\r\n        if(this.icon_Arrow.active){\r\n            this.btn_upgrade.runAction(cc.repeatForever(cc.sequence(\r\n                cc.scaleTo(0.3,1.1),\r\n                cc.scaleTo(0.3,1.0)\r\n            )))\r\n        }else{\r\n            this.btn_upgrade.stopAllActions();\r\n        }\r\n    }\r\n\r\n    isMaxLevel(){\r\n        return GameCtr.level==GameCtr.maxPlayerLevel;\r\n    }\r\n\r\n\r\n}\r\n"]}
{"version":3,"sources":["..\\..\\..\\..\\..\\..\\assets\\Script\\UI\\component/assets\\Script\\UI\\component\\bee.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"..\\..\\..\\..\\..\\..\\assets\\Script\\UI\\component","sourcesContent":["import GameCtr from \"../../Controller/GameCtr\";\r\n\r\nconst {ccclass, property} = cc._decorator;\r\n\r\n@ccclass\r\nexport default class NewClass extends cc.Component {\r\n    _stage1=null;\r\n    _stage2=null;\r\n    _level=null;\r\n    jobPos=null;\r\n    _honey=null;\r\n    _honeyEft=null;\r\n    _combsUnlock=null;\r\n    _speed=1;\r\n\r\n    step=1;\r\n    interval=0;\r\n\r\n\r\n    @property(cc.SpriteAtlas)\r\n    beeAtlas:cc.SpriteAtlas=null;\r\n\r\n    @property(cc.Prefab)\r\n    honeyEft:cc.Prefab=null;\r\n\r\n    onLoad(){\r\n        this._stage1=this.node.getChildByName(\"stage1\");\r\n        this._stage2=this.node.getChildByName(\"stage2\");\r\n        this._stage1.active=true;\r\n        this._stage2.active=false;\r\n        this.node.rotation=-90;\r\n\r\n        this._honey=cc.instantiate(this.honeyEft);\r\n        this._honey.parent=this.node.parent.parent;\r\n        this._honey.active=false;\r\n\r\n        this._speed=this.node.parent.parent.getComponent(\"honeycomb\").isSpeedUp()?\r\n        GameCtr.combConfig[GameCtr.comblevel-1].baseSpeed*(1-GameCtr.combConfig[GameCtr.comblevel-1].speedMatrix):\r\n        GameCtr.combConfig[GameCtr.comblevel-1].baseSpeed;\r\n    }\r\n\r\n    init(level,jobPos){\r\n        this._level=level;\r\n        this.jobPos=jobPos;\r\n        this.initBeeFrame();\r\n        this.fly();\r\n    }\r\n\r\n    initBeeFrame(){\r\n        let spr1=this.beeAtlas.getSpriteFrame(this._level+\"-1\");\r\n        let spr2=this.beeAtlas.getSpriteFrame(this._level+\"-2\");\r\n        this._stage1.getComponent(cc.Sprite).spriteFrame=spr1;\r\n        this._stage2.getComponent(cc.Sprite).spriteFrame=spr2;\r\n    }\r\n\r\n    fly(){\r\n        this.node.runAction(cc.repeatForever(\r\n            cc.sequence(\r\n                cc.delayTime(0.2),\r\n                cc.callFunc(()=>{\r\n                    this._stage1.active=true;\r\n                    this._stage2.active=false;\r\n                }),\r\n                cc.delayTime(0.2),\r\n                cc.callFunc(()=>{\r\n                    this._stage1.active=false;\r\n                    this._stage2.active=true;\r\n                })\r\n            )\r\n        ))\r\n    }\r\n\r\n    playHoneyEft(){\r\n        this._honey.active=true;\r\n        this._honey.x=this.jobPos.x;\r\n        this._honey.y=this.jobPos.y;\r\n        this._honey.getComponent(\"eft_honey\").play();\r\n    }\r\n\r\n    updateHoneyValue(){\r\n        this._combsUnlock=GameCtr.getInstance().getCombsUnlock();\r\n\r\n        GameCtr.honeyValue+=GameCtr.combConfig[this._level-1].initialIncome+\r\n                             (this._combsUnlock[this._level-1])*GameCtr.combConfig[this._level-1].incomeMatrix;\r\n        GameCtr.getInstance().getManufacture().setHoneyValue();\r\n        //console.log(\"log--------------GameCtr.honeyValue=:\",GameCtr.honeyValue);\r\n    }\r\n\r\n\r\n    // update(dt){\r\n    //     this._interval+=dt;\r\n\r\n    //     if(this._interval>=0.1){\r\n    //         //console.log(\"log------------bee word---------\")\r\n    //         if(this._step==1){//飞向工作区\r\n    //             this.node.x-=1000/(this._speed*60/GameCtr.globalSpeedRate)*6;\r\n    //             if(Math.floor(this.node.x-this.jobPos.x)<5){\r\n    //                 GameCtr.getInstance().emitEvent(\"bubbleHoney\"+this._level,{comblevel:this._level});\r\n    //                 this.playHoneyEft();\r\n    //                 this.updateHoneyValue();\r\n    //                 this.node.x=this.jobPos.x;\r\n    //                 this.node.rotation+=180\r\n    //                 this._step++;\r\n    //             }\r\n    //         }\r\n    //         if(this._step==2){//采蜜 阶段1\r\n    //             if(this.node.rotation<-45){\r\n    //                 this.node.rotation+=45/(60/GameCtr.globalSpeedRate*(1-GameCtr.combConfig[GameCtr.comblevel-1].speedMatrix));\r\n    //             }else{\r\n    //                 this.node.rotation+=135/(60/GameCtr.globalSpeedRate*(1-GameCtr.combConfig[GameCtr.comblevel-1].speedMatrix));\r\n    //             }\r\n    //             if(Math.abs(this.node.rotation-90)<20){\r\n    //                 this._step++;\r\n    //             }\r\n    //         }\r\n    //         if(this._step==3){//飞回采蜜区\r\n    //             this.node.x+=1000/(this._speed*60/GameCtr.globalSpeedRate)*6;\r\n    //             if(Math.abs(this.node.x-this.jobPos.x-1000)<=1000/(this._speed*60/GameCtr.globalSpeedRate)*6){\r\n    //                 this.node.rotation=-90;\r\n    //                 this.node.x=this.jobPos.x+1000;\r\n    //                 this._step=1;\r\n    //             }\r\n    //         }\r\n    //         this._interval=0;\r\n    //     }\r\n    // }\r\n\r\n}\r\n"]}
{"version":3,"sources":["..\\..\\..\\..\\..\\assets\\Script\\Controller/assets\\Script\\Controller\\WXCtr.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"..\\..\\..\\..\\..\\assets\\Script\\Controller","sourcesContent":["//微信全局方法\r\nimport Http from \"../Common/Http\";\r\nimport UserManager from \"../Common/UserManager\";\r\nimport ViewManager from \"../Common/ViewManager\";\r\nimport HttpCtr from \"./HttpCtr\";\r\nimport GameCtr from \"./GameCtr\";\r\nimport GameData from \"../Common/GameData\";\r\nimport Util from \"../Common/Util\";\r\n\r\nconst { ccclass, property } = cc._decorator;\r\n\r\nenum Message_Type {\r\n    Get_SelfData,                       //获取自己信息\r\n    Get_FriendData,                     //获取好友排行榜数据\r\n    Get_GroupData,                      //获取群排名\r\n    Submit_SelfScore,                   //提交自己得分\r\n    Compare_Score,                      //比较自己与好友得分\r\n    Show_WholeRanking,                  //显示完整排行榜   \r\n    Show_OverRanking,                   //显示结束排行榜\r\n    Close_WholeRanking,                 //关闭好友排行\r\n    Close_OverRanking,                  //关闭结束排行\r\n};\r\n\r\nconst I6P = {\r\n    w: 375.0,\r\n    h: 667.0\r\n};\r\n\r\n@ccclass\r\nexport default class WXCtr {\r\n\r\n    static wxLoginSuccess: boolean = false;\r\n    static shareTitle;\r\n    static shareImg;\r\n    static onShowCall = null;\r\n    static videoAd = null;\r\n    static videoAdCallback = null;\r\n    static bannerAd = null;\r\n    static bannerId = null;\r\n    static launchOption;\r\n    static userInfoBtn;\r\n\r\n    static screenWidth;\r\n    static screenHeight;\r\n    static widthRatio;\r\n    static heightRatio;\r\n\r\n    static authed = false;\r\n    static outvideoAdCallback = null;\r\n\r\n    constructor() {\r\n        if (WXCtr.videoAdCallback == null) {\r\n            WXCtr.videoAdCallback = (res) => {\r\n                WXCtr.onCloseVideo(res);\r\n            }\r\n        }\r\n    }\r\n\r\n    //获取启动参数\r\n    static getLaunchOptionsSync() {\r\n        if (window.wx != undefined) {\r\n\r\n            WXCtr.launchOption = window.wx.getLaunchOptionsSync();\r\n            console.log(\"获取启动参数\", WXCtr.launchOption);\r\n           \r\n\r\n            let fileMgr = wx.getFileSystemManager();\r\n            fileMgr.getSavedFileList({\r\n                success: (res) => {\r\n                    console.log(\"获取本地缓存文件列表成功\", res);\r\n                },\r\n            });\r\n        }\r\n    }\r\n\r\n    static getSystemInfo() {\r\n        if (window.wx != undefined) {\r\n            wx.getSystemInfo({\r\n                success: (res) => {\r\n                    console.log(\"获取设备信息成功\", res);\r\n                    WXCtr.screenWidth = res.screenWidth;\r\n                    WXCtr.screenHeight = res.screenHeight;\r\n                    WXCtr.widthRatio = WXCtr.screenWidth / I6P.w;\r\n                    WXCtr.heightRatio = WXCtr.screenHeight / I6P.h;\r\n                }\r\n            });\r\n        }\r\n    }\r\n\r\n    //退出当前小游戏\r\n    static exitGame() {\r\n        if (window.wx != undefined) {\r\n            wx.exitMiniProgram();\r\n        }\r\n    }\r\n\r\n    static getAuthSetting() {\r\n        if (window.wx != undefined) {\r\n            wx.getSetting({\r\n                success: function (res) {\r\n                    var authSetting = res.authSetting\r\n                    if (authSetting['scope.userInfo'] === true) {\r\n                        // 用户已授权\r\n                        WXCtr.authed = true;\r\n                    } else if (authSetting['scope.userInfo'] === false) {\r\n                        // 用户已拒绝授权\r\n                        WXCtr.authed = false;\r\n                    } else {\r\n                        // 未询问过用户授权，调用相关 API 或者 wx.authorize 会弹窗询问用户\r\n                        WXCtr.authed = false;\r\n                    }\r\n                }\r\n            });\r\n        }\r\n    }\r\n\r\n    //创建用户授权按钮\r\n    static createUserInfoBtn() {\r\n        if (window.wx != undefined) {\r\n            let screenWidth;\r\n            let screenHeight;\r\n            let widthRatio;\r\n            let heightRatio;\r\n            wx.getSystemInfo({\r\n                success: (res) => {\r\n                    WXCtr.Height = res.windowHeight;\r\n                    console.log(\"获取设备信息成功\", res);\r\n                    screenWidth = res.screenWidth;\r\n                    screenHeight = res.screenHeight;\r\n                    widthRatio = screenWidth / I6P.w;\r\n                    heightRatio = screenHeight / I6P.h;\r\n                }\r\n            });\r\n\r\n            WXCtr.userInfoBtn = wx.createUserInfoButton({\r\n                type: 'image',\r\n                image: 'res/raw-assets/resources/textures/rank/authBtn.png',\r\n                style: {\r\n                    left: (screenWidth / 2-80) ,\r\n                    top: (screenHeight / 2-40) + (50 * heightRatio),\r\n                    width: 160 * widthRatio,\r\n                    height: 40 * heightRatio,\r\n                }\r\n            });\r\n\r\n            WXCtr.userInfoBtn.hide();\r\n            WXCtr.userInfoBtn.onTap((res) => {\r\n                console.log(\"UserInfoBtn tap\", res);\r\n                if (res.userInfo) {\r\n                    GameCtr.getInstance().getRanking().showAuthTip(false)\r\n                    WXCtr.wxOnLogin(res.userInfo,true);\r\n                }\r\n            });\r\n        }\r\n    }\r\n\r\n\r\n\r\n\r\n\r\n    //登录微信\r\n    static wxOnLogin(userInfo = null,showWorldRanking=false) {\r\n        if (window.wx != undefined) {\r\n            //登录微信\r\n            if (userInfo) {\r\n                WXCtr.wxLoginSuccess = true;\r\n            }\r\n\r\n            window.wx.login({\r\n                success: function (loginResp) {\r\n                    console.log(\"微信登录返回值res\", loginResp);\r\n                    HttpCtr.login(loginResp.code,showWorldRanking);\r\n                    WXCtr.getUserInfo();\r\n                    WXCtr.getSelfData();\r\n                    WXCtr.getShareConfig();\r\n                    HttpCtr.getAdConfig();\r\n                }\r\n            })\r\n        }\r\n    }\r\n\r\n    static getUserInfo(){\r\n        //获取用户信息\r\n        window.wx.getUserInfo({\r\n            openIdList: ['selfOpenId'],\r\n            withCredentials: true,\r\n            lang:\"zh_CN\",\r\n            success: function (res) {\r\n                let info = res.userInfo;\r\n                let data = {\r\n                    avatarUrl: info.avatarUrl,\r\n                    city: info.city,\r\n                    country: info.country,\r\n                    gender: info.gender,\r\n                    language: info.language,\r\n                    nickName: info.nickName,\r\n                    openId: info.openId,\r\n                    province: info.province,\r\n                };\r\n                GameCtr.getInstance().saveSelfInfoToLocal(res.userInfo);\r\n                //GameCtr.getInstance().emitEvent(\"getSelfInfoSuccess\",null);\r\n                WXCtr.wxLoginSuccess = true;\r\n                WXCtr.authed = true;\r\n                HttpCtr.saveUserInfo(res);\r\n                //console.log(\"获取自己信息返回值\", res);\r\n            },\r\n            fail: function (res) {\r\n                console.log(\"获取自己信息失败\", res);\r\n            }\r\n        })\r\n    }\r\n\r\n\r\n    //获取分享配置\r\n    static getShareConfig() {\r\n        Http.send({\r\n            url: Http.UrlConfig.GET_SHARE,\r\n            success: (resp) => {\r\n                console.log(\"获取分享配置信息\", resp);\r\n                WXCtr.shareTitle = resp.data.share_title;\r\n                WXCtr.shareImg = resp.data.share_img;\r\n                wx.onShareAppMessage(function () {\r\n                    return {\r\n                        title: WXCtr.shareTitle,\r\n                        imageUrl: WXCtr.shareImg,\r\n                    }\r\n                });\r\n            },\r\n            data: {\r\n                share_type: \"index\",\r\n            }\r\n        });\r\n    }\r\n\r\n    //获取复活配置\r\n    static getReviveData() {\r\n        Http.send({\r\n            url: Http.UrlConfig.REVIVECONFIG,\r\n            success: (resp) => {\r\n                console.log(\"获取复活配置信息\", resp);\r\n                GameCtr.reviveData = resp.data;\r\n            }\r\n        });\r\n    }\r\n\r\n    //显示分享按钮\r\n    static showShareMenu() {\r\n        if (window.wx != undefined) {\r\n            console.log(\"显示分享按钮！！！！！！\");\r\n            window.wx.showShareMenu({\r\n                withShareTicket: true,\r\n                success: (res) => {\r\n                    \r\n                },\r\n                fail: (res) => {\r\n                    \r\n                },\r\n                complete: (res) => {\r\n                    \r\n                }\r\n            });\r\n        }\r\n    }\r\n\r\n    //设置转发信息（右上角按钮点击->转发）\r\n    static setShareAppMessage() {\r\n        if (window.wx != undefined) {\r\n            wx.onShareAppMessage(function () {\r\n                return {\r\n                    title: WXCtr.shareTitle,\r\n                    imageUrl: WXCtr.shareImg,\r\n                }\r\n            });\r\n        }\r\n    }\r\n\r\n    //监听小游戏回到前台的事件\r\n    static onShow(callback = null) {\r\n        console.log(\"监听小游戏回到前台的事件\");\r\n        if (window.wx != undefined) {\r\n            let call: Function = (res) => {\r\n                if (callback) {\r\n                    callback();\r\n                }\r\n            };\r\n            window.wx.onShow(call);\r\n\r\n            WXCtr.onShowCall = call;\r\n        }\r\n    }\r\n\r\n    //取消监听小游戏回到前台的事件\r\n    static offShow() {\r\n        if (window.wx != undefined) {\r\n            console.log(\"取消监听小游戏回到前台的事件\");\r\n            window.wx.offShow(WXCtr.onShowCall);\r\n        }\r\n    }\r\n\r\n    //预览图片\r\n    static previewImg(imgUrl) {\r\n        if (window.wx != undefined) {\r\n            wx.previewImage({\r\n                urls: [imgUrl],\r\n                success: (res) => {\r\n                    console.log(\"预览图片成功回调\", res);\r\n                }\r\n            });\r\n        }\r\n    }\r\n\r\n\r\n\r\n    static restoreVideoAdOnClose(callback: Function = null) {\r\n        WXCtr.videoAd.onClose(() => {\r\n            if (callback != null) {\r\n                WXCtr.videoAd.offClose(callback);\r\n            }\r\n            WXCtr.videoAd.onClose(WXCtr.videoAdCallback);\r\n        });\r\n        WXCtr.setBannerAd(100,300);\r\n    }\r\n\r\n   \r\n\r\n    static showBannerAd() {\r\n        if (cc.isValid(WXCtr.bannerAd) && WXCtr.bannerAd) {\r\n            WXCtr.bannerAd.show();\r\n        }\r\n    }\r\n\r\n    static hideBannerAd() {\r\n        if (cc.isValid(WXCtr.bannerAd) && WXCtr.bannerAd) {\r\n            WXCtr.bannerAd.hide();\r\n        }\r\n    }\r\n\r\n    //banner广告\r\n    static setBannerAd(height = null, width = null) {\r\n        if (window.wx != undefined && wx.createBannerAd) {\r\n            if (WXCtr.bannerAd && WXCtr.bannerAd.destroy) {\r\n                WXCtr.bannerAd.destroy();\r\n            }\r\n            let top = 140;\r\n            if (height) top = height;\r\n            let widthNum = 375;\r\n            let left = 0;\r\n            if (width) {\r\n                widthNum = width;\r\n                let realWidth = width * WXCtr.widthRatio;\r\n                realWidth = realWidth < 300 ? 300 : realWidth;\r\n                left = (WXCtr.screenWidth - realWidth) / 2;\r\n            }\r\n            WXCtr.bannerAd = wx.createBannerAd({\r\n                adUnitId:\"adunit-4d43fbf2baf8747c\",\r\n                style: {\r\n                    left: left,\r\n                    top: WXCtr.screenHeight - top * WXCtr.heightRatio,\r\n                    width: widthNum * WXCtr.widthRatio,\r\n                }\r\n            });\r\n            WXCtr.bannerAd.show();\r\n            WXCtr.bannerAd.onError(() => {\r\n            })\r\n        }\r\n    }\r\n\r\n    //分享 \r\n    static share(data?: {\r\n        invite?: boolean,                               //邀请好友\r\n        Challenge?: boolean,                            //挑战 \r\n        pfTurnable?:boolean,\r\n        callback?: Function\r\n    }) {\r\n        let qureyInfo = \"\";\r\n        if (data && data.invite) {\r\n            qureyInfo = \"invite=\";\r\n        }\r\n        if (data && data.Challenge){\r\n            qureyInfo = \"Challenge=\";\r\n        }\r\n        if (window.wx != undefined) {\r\n            window.wx.shareAppMessage({\r\n                title: WXCtr.shareTitle,\r\n                imageUrl: WXCtr.shareImg,\r\n                query: qureyInfo + UserManager.user_id,\r\n                success: (res) => {\r\n                    if(GameCtr.setting.share){\r\n                        if (res.shareTickets != undefined && res.shareTickets.length > 0) {\r\n                            console.log(\"shareTickets == \", res.shareTickets);\r\n                            WXCtr.getWxShareInfo(res.shareTickets[0], data.callback);\r\n                        } else {\r\n                            GameCtr.getInstance().getGame().showToast(\"请分享到群！\");\r\n                        }\r\n                    }else{\r\n                        if(data.callback){\r\n                            data.callback()\r\n                        }\r\n                    }\r\n                   \r\n                },\r\n                complete: () => {\r\n\r\n                }\r\n            });\r\n        } else {\r\n\r\n        }\r\n    }\r\n\r\n    //获取分享转发详细信息\r\n    static getWxShareInfo(shareTicket, callback) {\r\n        if (window.wx != undefined) {\r\n            window.wx.getShareInfo({\r\n                shareTicket: shareTicket,\r\n                success: (resp) => {\r\n                    console.log(\"获取分享信息成功！！！\", resp);\r\n                    HttpCtr.shareGroupCheck(resp.encryptedData, resp.iv, callback);\r\n                },\r\n            });\r\n        }\r\n    }\r\n\r\n    static showToast(msg){\r\n        if(window.wx != undefined){\r\n            window.wx.showToast({\r\n                title:msg,\r\n                duration:2,\r\n                fail:(res)=>{\r\n                    WXCtr.showToast(msg)\r\n                },\r\n                success:(res)=>{\r\n                    return;\r\n                }\r\n            })\r\n        }\r\n    }\r\n\r\n    //保存数据到本地\r\n    static getStorageData(key, callback = null) {\r\n        if (window.wx != undefined) {\r\n            wx.getStorage({\r\n                key: key,\r\n                success: (resp) => {\r\n                    if (callback) {\r\n                        callback(resp.data);\r\n                    }\r\n                },\r\n                fail: (resp) => {\r\n                    if (callback) {\r\n                        callback(null);\r\n                    }\r\n                },\r\n            });\r\n        }\r\n    }\r\n\r\n    //获取本地数据\r\n    static setStorageData(key, data) {\r\n        if (window.wx != undefined) {\r\n            wx.setStorage({\r\n                key: key,\r\n                data: data,\r\n                success: (resp) => {\r\n\r\n                }\r\n            });\r\n        }\r\n    }\r\n\r\n    //导航到其他小程序\r\n    static gotoOther(data) {\r\n        console.log(\"data = \", data);\r\n        if (data.appid) {\r\n            wx.navigateToMiniProgram({\r\n                appId: data.appid,\r\n                path: data.path,\r\n                success(res) {\r\n                    // 打开成功\r\n                    console.log('打开成功');\r\n\r\n                },\r\n                fail(err) {\r\n                    wx.showToast({\r\n                        title: '打开失败!',\r\n                        icon: 'none'\r\n                    })\r\n                }\r\n            })\r\n        }\r\n    }\r\n\r\n    //打开客服消息\r\n    static customService() {\r\n        wx.openCustomerServiceConversation({\r\n            success: () => {\r\n                WXCtr.exitGame();\r\n            }\r\n        });\r\n    }\r\n\r\n\r\n    static setVideoAd() {\r\n        if (window.wx != undefined && wx.createRewardedVideoAd) {\r\n            WXCtr.videoAd = wx.createRewardedVideoAd({ adUnitId:\"adunit-cf448a58c6f5d542\"});\r\n            WXCtr.videoAd.onLoad(() => {\r\n            });\r\n            WXCtr.videoAd.load();\r\n            WXCtr.videoAd.onError(err => {\r\n                WXCtr.videoAd = null; \r\n                console.log(err)\r\n            }); \r\n        }\r\n    }\r\n\r\n    static showVideoAd() {\r\n        if (WXCtr.videoAd) {\r\n            WXCtr.videoAd.show();\r\n            GameCtr.vedioTimes--;\r\n            console.log(\"今天剩余观看视频次数为：\", GameCtr.vedioTimes);\r\n            localStorage.setItem(\"VideoTimes\", JSON.stringify({ day: Util.getCurrTimeYYMMDD(), times: GameCtr.vedioTimes }));\r\n        }\r\n    }\r\n\r\n    \r\n    static onCloseVideo(callback) {\r\n        let call: Function = (res) => {\r\n            if (res && res.isEnded || res === undefined) {\r\n                // 正常播放结束，可以下发游戏奖励\r\n                callback(true);\r\n                HttpCtr.videoCheck(WXCtr.launchOption.query);\r\n            }\r\n            else {\r\n                // 播放中途退出，不下发游戏奖励\r\n                callback(false);\r\n            }\r\n        };\r\n        WXCtr.videoAd.onClose(call);\r\n        WXCtr.videoAdCallback = call;\r\n    }\r\n\r\n    static offCloseVideo() {\r\n        if (WXCtr.videoAdCallback) {\r\n            WXCtr.videoAd.offClose(WXCtr.videoAdCallback);\r\n            WXCtr.videoAdCallback = null;\r\n        }\r\n    }\r\n\r\n\r\n\r\n    /**\r\n     * 子域消息相关方法\r\n     */\r\n    /**\r\n     * 子域消息相关方法\r\n     */\r\n\r\n    static initSharedCanvas() {\r\n        if (window.wx != undefined) {\r\n            window.sharedCanvas.width = 880;\r\n            window.sharedCanvas.height = 1000;\r\n        }\r\n    }\r\n\r\n    //获取自己信息\r\n    static getSelfData() {\r\n        if (window.wx != undefined) {\r\n            // 发消息给子域\r\n            window.wx.postMessage({\r\n                messageType: Message_Type.Get_SelfData,\r\n            });\r\n        }\r\n    }\r\n\r\n    //获取群数据\r\n    static getGroupRankingData() {\r\n        console.log(\"获取群数据！！！！！！\");\r\n        if (window.wx != undefined) {\r\n            window.wx.shareAppMessage({\r\n                title: WXCtr.shareTitle,\r\n                imageUrl: WXCtr.shareImg,\r\n                success: (res) => {\r\n                    console.log(\"分享成功回调返回值\", res);\r\n                    if (res.shareTickets != undefined && res.shareTickets.length > 0) {\r\n                        window.wx.postMessage({\r\n                            messageType: Message_Type.Get_GroupData,\r\n                            SCORE_KEY: \"Rank_SCORE\",\r\n                            LOCATION_KEY: \"LOACTION\",\r\n                            shareTicket: res.shareTickets[0]\r\n                        });\r\n                    }\r\n                }\r\n            });\r\n        }\r\n    }\r\n\r\n     //获取好友排行榜数据\r\n     static getFriendRankingData() {\r\n        if (window.wx != undefined) {\r\n            // 发消息给子域\r\n            window.wx.postMessage({\r\n                messageType: Message_Type.Get_FriendData,\r\n                LIST_KEY: \"Rank_Data\"\r\n            });\r\n        }\r\n    }\r\n\r\n\r\n    //显示结束界面好友排行\r\n    static showOverRanking() {\r\n        if (window.wx != undefined) {\r\n            console.log(\"主域发送消息____显示结束好友排行\");\r\n            window.wx.postMessage({\r\n                messageType: Message_Type.Show_OverRanking,\r\n            });\r\n        }\r\n    }\r\n\r\n    //显示完整好友排行\r\n    static showFriendRanking(_pageIndex) {\r\n        if (window.wx != undefined) {\r\n            console.log(\"主域发送消息____显示好友排行\");\r\n            window.wx.postMessage({\r\n                messageType: Message_Type.Show_WholeRanking,\r\n                pageIndex:_pageIndex,\r\n            });\r\n        }\r\n    }\r\n\r\n    //关闭好友排行\r\n    static closeFriendRanking() {\r\n        if (window.wx != undefined) {\r\n            console.log(\"主域发送消息____关闭好友排行\");\r\n            window.wx.postMessage({\r\n                messageType: Message_Type.Close_WholeRanking,\r\n            });\r\n        }\r\n    }\r\n\r\n    //提交分数到微信\r\n    static submitScoreToWx(score) {\r\n        if (window.wx != undefined) {\r\n            console.log(\"主域发送消息____提交分数\");\r\n            window.wx.postMessage({\r\n                messageType: Message_Type.Submit_SelfScore,\r\n                LIST_KEY: \"Rank_Data\",\r\n                score: score,\r\n            });\r\n        }\r\n    }\r\n\r\n    //对比自己的分数和好友的Compare_Score\r\n    static submitScoreToWxComparetFriend(score) {\r\n        if (window.wx != undefined) {\r\n            console.log(\"主域发送消息____提交分数\");\r\n            window.wx.postMessage({\r\n                messageType: Message_Type.Compare_Score,\r\n                LIST_KEY: \"Rank_Data\",\r\n                score: score,\r\n            });\r\n        }\r\n    }\r\n\r\n}\r\n"]}
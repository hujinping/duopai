require=function i(l,c,r){function s(t,e){if(!c[t]){if(!l[t]){var n="function"==typeof require&&require;if(!e&&n)return n(t,!0);if(u)return u(t,!0);var o=new Error("Cannot find module '"+t+"'");throw o.code="MODULE_NOT_FOUND",o}var a=c[t]={exports:{}};l[t][0].call(a.exports,function(e){return s(l[t][1][e]||e)},a,a.exports,i,l,c,r)}return c[t].exports}for(var u="function"==typeof require&&require,e=0;e<r.length;e++)s(r[e]);return s}({AudioManager:[function(e,t,n){"use strict";cc._RF.push(t,"55d02b1p5hDgagEsZ4zByL4","AudioManager"),Object.defineProperty(n,"__esModule",{value:!0});var o=cc._decorator,a=o.ccclass,i=(o.property,function(){function e(){this.string=null,this.musicId=null,this.soundId=null,this._musicOn=!0,this._soundOn=!0}return(t=e).getInstance=function(){return null==t.mAudioManager&&(t.mAudioManager=new t),t.mAudioManager},e.prototype.playMusic=function(n,o,a){return void 0===o&&(o=!0),void 0===a&&(a=1),__awaiter(this,void 0,void 0,function(){var t;return __generator(this,function(e){switch(e.label){case 0:if(!n)return[2];e.label=1;case 1:return e.trys.push([1,4,,5]),this.musicPath==n?[3,3]:(null!=this.musicId&&cc.audioEngine.stop(this.musicId),[4,(t=this).play(n,o,a)]);case 2:t.musicId=e.sent(),e.label=3;case 3:return this.musicPath=n,this.musicOn||this.pauseMusic(),[3,5];case 4:return e.sent(),[3,5];case 5:return[2]}})})},e.prototype.getMusicId=function(){return this.musicId},e.prototype.pauseMusic=function(){cc.audioEngine.pause(this.musicId)},e.prototype.resumeMusic=function(){cc.audioEngine.resume(this.musicId)},e.prototype.playSoundAsync=function(e,t,n,o){void 0===t&&(t=!1);var a=this.playSound(e,t);if(a){if(n&&o)return void a.then(n,o);o&&a.catch(o)}else o&&o(null)},e.prototype.playSound=function(n,o){return void 0===o&&(o=!1),__awaiter(this,void 0,void 0,function(){var t;return __generator(this,function(e){switch(e.label){case 0:if(!n)return[2];if(!this.soundOn)return[2];e.label=1;case 1:return e.trys.push([1,3,,4]),[4,(t=this).play(n,o)];case 2:return t.soundId=e.sent(),[2,this.soundId];case 3:return e.sent(),[3,4];case 4:return[2]}})})},e.prototype.stopSound=function(e){"number"==typeof e&&cc.audioEngine.stop(e)},e.prototype.stopAll=function(){this.musicPath=null,this.musicId=null,cc.audioEngine.stopAll()},e.prototype.play=function(t,i,l){return void 0===i&&(i=!1),void 0===l&&(l=1),__awaiter(this,void 0,void 0,function(){return __generator(this,function(e){return[2,new Promise(function(o,a){cc.loader.loadRes(t,function(e,t){if(e)cc.error(e),a(e);else{var n=cc.audioEngine.play(t,i,l);o(n)}})})]})})},Object.defineProperty(e.prototype,"musicOn",{get:function(){return this._musicOn},set:function(e){this._musicOn!=e&&((this._musicOn=e)?this.resumeMusic():this.pauseMusic())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"soundOn",{get:function(){return this._soundOn},set:function(e){this._soundOn=e},enumerable:!0,configurable:!0}),e=t=__decorate([a],e);var t}());n.default=i,cc._RF.pop()},{}],BaseDialog:[function(e,t,n){"use strict";cc._RF.push(t,"dfe29FRZ8NPSpj5hr0RuVh2","BaseDialog"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("./PopupView"),a=e("../../Common/Util"),i=cc._decorator,l=i.ccclass,c=(i.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),(n=t).prototype.onLoad=function(){var e=a.default.findChildByName(n.ButtonTag.SURE,this.node);e&&(this._sureButton=e.getComponent(cc.Button)),(e=a.default.findChildByName(n.ButtonTag.CANCEL,this.node))&&(this._cancelButton=e.getComponent(cc.Button)),(e=a.default.findChildByName(n.ButtonTag.CLOSE,this.node))&&(this._closeButton=e.getComponent(cc.Button)),this.initButton(this._sureButton,n.ButtonTag.SURE),this.initButton(this._cancelButton,n.ButtonTag.CANCEL),this.initButton(this._closeButton,n.ButtonTag.CLOSE),this.initData()},t.prototype.initData=function(){},t.prototype.setData=function(e){this._data=e},t.prototype.dismiss=function(){if(this.node.parent){var e=this.node.parent.getComponent(o.default);e?e.dismiss():this.node.destroy()}},t.prototype.onButtonClick=function(e,t){switch(t){case n.ButtonTag.SURE:break;case n.ButtonTag.CANCEL:case n.ButtonTag.CLOSE:this.dismiss()}},t.prototype.initButton=function(e,t){if(cc.isValid(e)){var n=new cc.Component.EventHandler;n.target=this.node,n.component="BaseDialog",n.handler="onButtonClick",n.customEventData=t,e.clickEvents.push(n)}},t.ButtonTag={SURE:"button_sure",CANCEL:"button_cancel",CLOSE:"button_close"},t=n=__decorate([l],t);var n}(cc.Component));n.default=c,cc._RF.pop()},{"../../Common/Util":"Util","./PopupView":"PopupView"}],GameCtr:[function(e,t,n){"use strict";cc._RF.push(t,"ea049dlKOtItKkSXQ54e5Sr","GameCtr"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../Common/UserManager"),a=e("./WXCtr"),i=e("../Common/Http"),l=cc._decorator,c=l.ccclass,r=(l.property,function(){function e(){this.eventTarget=null,n.ins=this,a.default.getSystemInfo(),a.default.getLaunchOptionsSync(),a.default.createUserInfoBtn(),a.default.getAuthSetting(),a.default.showShareMenu(),a.default.wxOnLogin(),n.honeyPool=new cc.NodePool,n.jarPool=new cc.NodePool,n.bubbleMoneyPool=new cc.NodePool}return(n=e).getInstance=function(){return n.ins||(n.ins=new n),n.ins},e.prototype.getAdaptScaleRate=function(){var e=cc.view.getFrameSize(),t=1920*e.width/1080;return e.height/t},e.prototype.initEventTarget=function(){this.eventTarget=new cc.EventTarget},e.prototype.getEventTarget=function(){return this.eventTarget},e.prototype.emitEvent=function(e,t){this.eventTarget.emit(e,t)},e.prototype.addListener=function(e,t){this.eventTarget.on(e,t)},e.prototype.removeListener=function(e){this.eventTarget.off(e)},e.prototype.setLoading=function(e){this.mLoading=e},e.prototype.getLoding=function(){return this.mLoading},e.prototype.setGame=function(e){this.mGame=e},e.prototype.setManufacture=function(e){this.mManufacture=e},e.prototype.setLevel=function(e){this.mLevel=e},e.prototype.setRanking=function(e){this.mRanking=e},e.prototype.getRanking=function(){return this.mRanking},e.prototype.setCombsUnlock=function(){window.localStorage.setItem("combsUnlock",JSON.stringify(n.combsUnlock))},e.prototype.getCombsUnlock=function(){return window.localStorage.getItem("combsUnlock")},e.prototype.setPlayerLevel=function(){window.localStorage.setItem("level",n.level)},e.prototype.getPlayerLevel=function(){return Number(window.localStorage.getItem("level"))},e.prototype.setManufactureLevel=function(){window.localStorage.setItem("ManufactureLevel",n.ManufactureLevel)},e.prototype.getManufactureLevel=function(){return Number(window.localStorage.getItem("ManufactureLevel"))},e.prototype.setCombLevel=function(){window.localStorage.setItem("comblevel",n.comblevel)},e.prototype.getCombLevel=function(){return Number(window.localStorage.getItem("comblevel"))},e.prototype.setTimestamp=function(){window.localStorage.setItem("timestamp",Date.now().toString())},e.prototype.setPlayTimes=function(){var e=window.localStorage.getItem("playTimes");e?window.localStorage.setItem("playTimes",Number(e)+1+""):window.localStorage.setItem("playTimes","1")},e.prototype.getPlayTimes=function(){return window.localStorage.getItem("playTimes")},e.prototype.getTimestamp=function(){return Number(window.localStorage.getItem("timestamp"))},e.prototype.setMoney=function(){window.localStorage.setItem("money",n.money+"")},e.prototype.getMoney=function(){return Number(window.localStorage.getItem("money"))},e.prototype.setRich=function(){window.localStorage.setItem("rich",n.rich+"")},e.prototype.getRich=function(){return Number(window.localStorage.getItem("rich"))},e.prototype.setLevelMoney=function(){window.localStorage.setItem("levelMoney",n.levelMoney+"")},e.prototype.getLevelMoney=function(){return Number(window.localStorage.getItem("levelMoney"))},e.prototype.setHoneyValue=function(){window.localStorage.setItem("honeyValue",n.honeyValue+"")},e.prototype.getHoneyValue=function(){return Number(window.localStorage.getItem("honeyValue"))},e.prototype.setGuide=function(){window.localStorage.setItem("guide",JSON.stringify(n.guide))},e.prototype.getGuide=function(){return JSON.parse(window.localStorage.getItem("guide"))},e.prototype.getGame=function(){return this.mGame},e.prototype.getManufacture=function(){return this.mManufacture},e.prototype.getLevel=function(){return this.mLevel},e.gotoScene=function(e){cc.director.loadScene(e)},e.showEnd=function(){n.gotoScene("End")},e.showStart=function(){n.gotoScene("Start")},e.showStrongest=function(){n.gotoScene("Strongest")},e.showRevive=function(){n.ins},e.loadImg=function(n,e){cc.loader.load({url:e,type:"png"},function(e,t){n.spriteFrame=new cc.SpriteFrame(t)})},e.startGame=function(){n.score=0,n.gotoScene("Game")},e.showRanking=function(e){n.rankingEntrance=e,n.gotoScene("Ranking")},e.revive=function(){},e.playBgm=function(){},e.addScore=function(e){n.ins&&(n.score+=e)},e.gameOver=function(){n.ins},e.prototype.saveSelfInfoToLocal=function(e){var t={avatarUrl:e.avatarUrl,city:e.city,country:e.country,gender:e.gender,language:e.language,nickName:e.nickName,province:e.province};window.localStorage.setItem("selfInfo",JSON.stringify(t))},e.prototype.getSelfInfoFromLocal=function(){var e=window.localStorage.getItem("selfInfo");if(e)return JSON.parse(e)},e.getSliderConfig=function(t){i.default.send({url:i.default.UrlConfig.GET_ALL_SLIDES,success:function(e){console.log("getSlider数据",e),"index"==t||"settlement"==t||"nav"==t&&(n.newGameData=e.data)},data:{slide_type:t}})},e.showLoading=function(e){void 0===e&&(e=!0),null!=window.wx&&wx.showLoading({title:"疯狂加载中",mask:e})},e.hideLoading=function(){null!=window.wx&&wx.hideLoading()},e.shareGroupCheck=function(e,t,n){i.default.send({url:i.default.UrlConfig.SHARE_GROUP,data:{user_id:o.default.user_id,encrypted_data:e,iv:t},success:function(e){console.log("分享到群成功",e),console.log(403==e.code),200==e.code||e.code}})},e.login=function(e,t,n){void 0===n&&(n=!1),i.default.send({url:i.default.UrlConfig.LOGIN,success:function(e){e.code==i.default.Code.OK&&(o.default.user_id=e.data.user_id)},data:{code:e}})},e.selfInfo=null,e.isAudited=!1,e.reviveTimes=0,e.globalSpeedRate=1,e.incomeRate=1,e.score=0,e.rankingEntrance="Start",e.navigatorData=null,e.challengerData=null,e.challengeSwitch=!1,e.reviveData=null,e.maxPerCombLevel=30,e.maxCombsCount=30,e.maxPlayerLevel=145,e.maxManufactureLevel=300,e.money=0,e.levelMoney=0,e.rich=0,e.honeyValue=0,e.level=null,e.ManufactureLevel=null,e.comblevel=null,e.combsUnlock=null,e.levelConfig=null,e.manufactureConfig=null,e.combConfig=null,e.pfTurnTableConfig=null,e.otherConfig=null,e.setting=null,e.upper_boundary=null,e.lower_boundary=null,e.newGameData=null,e.guide=null,e.tipHandTag=1500,e.realMoney=null,e.vedioTimes=6,e.honeyPool=null,e.jarPool=null,e.bubbleMoneyPool=null,e.isGetSetting=!1,e.advTime=120,e.advVedioTime=60,e.clickType={speedUp:1,invite:2,more:3,ufo:4,attention:5,shop:6,rank:7,buy:8,goldNotEnoughShare:9,offLineShare:10,offLineVedio:11,pfTurntable:12},e=n=__decorate([c],e);var n}());n.default=r,cc._RF.pop()},{"../Common/Http":"Http","../Common/UserManager":"UserManager","./WXCtr":"WXCtr"}],GameData:[function(e,t,n){"use strict";cc._RF.push(t,"4d95fg2LhFK4rd0bQKU3a0m","GameData"),Object.defineProperty(n,"__esModule",{value:!0});var a=e("../Controller/GameCtr"),i=e("../Controller/WXCtr"),o=cc._decorator,c=o.ccclass,l=(o.property,function(){function e(){}return(l=e).init=function(){setInterval(function(){l.submitGameData();var e=(new Date).getTime();i.default.setStorageData("lastTime",e)},6e4);for(var e=1;e<=l.maxPlane;e++){var t="feiji_shop_"+e;l.localData.planeData[t]=0}},e.valueData_1=function(e){for(var t in console.log("//初始化各种变量1",l.localData),l.localData=e,l._guideStep=l.localData._guideStep,l.experience=l.localData.experience,l.gold=l.localData.gold,l.level=l.localData.level,l.diamonds=l.localData.diamonds,l.maxPlaneLevel=l.localData.maxPlaneLevel,l.localData.planeData)l.planeData[t]=l.localData.planeData[t];a.default.startGame()},e.getLocalData=function(){var e=cc.sys.localStorage.getItem("localData");if(console.log("cc.sys.localStorage GameData.localData=",e),e)l.localData=e,l.valueData_0();else{console.log("微信获取本地数据"),i.default.getStorageData("guideStep",function(e){console.log("resp guideStep == ",e),e?(l._guideStep=e,l.localData._guideStep=e,cc.sys.localStorage.setItem("localData",l.localData)):l.getNetData()}),i.default.getStorageData("exp",function(e){e&&(l.experience=e,l.localData.experience=e,cc.sys.localStorage.setItem("localData",l.localData))}),i.default.getStorageData("gold",function(e){console.log("resp gold == ",e),e&&(l.gold=e,l.localData.gold=e,cc.sys.localStorage.setItem("localData",l.localData))}),i.default.getStorageData("level",function(e){e&&(l.level=e,l.localData.level=e,cc.sys.localStorage.setItem("localData",l.localData))}),i.default.getStorageData("diamonds",function(e){e&&(l.diamonds=e,l.localData.diamonds=e,cc.sys.localStorage.setItem("localData",l.localData))}),i.default.getStorageData("maxPlaneLevel",function(e){e&&(l.maxPlaneLevel=e,l.localData.maxPlaneLevel=e,cc.sys.localStorage.setItem("localData",l.localData))});for(var t=function(e){var t="feiji_shop_"+e;i.default.getStorageData(t,function(e){e&&(l.planeData[t]=e,l.localData.planeData[t]=l.planeData[t],cc.sys.localStorage.setItem("localData",l.localData))})},n=1;n<=l.maxPlane;n++)t(n);var o=function(t){var n="feiji_"+t,o="feiji_switch_"+t;i.default.getStorageData(n,function(e){e&&(l.planeData[n]=e,console.log("",n,"=",e),l.localData.planeData[n]=l.planeData[n],cc.sys.localStorage.setItem("localData",l.localData))}),i.default.getStorageData(o,function(e){e&&(l.planeData[o]=e,l.localData.planeData[o]=l.planeData[o],cc.sys.localStorage.setItem("localData",l.localData),t==l.maxApron&&a.default.startGame())})};for(n=1;n<=l.maxApron;n++)o(n)}},e.valueData_0=function(){for(var e in console.log("//获取到本地数据之后，则数据获取完毕，直接使用",l.localData),l._guideStep=l.localData._guideStep,l._experience=l.localData.experience,l._gold=l.localData.gold,l._level=l.localData.level,l._diamond=l.localData.diamonds,l._maxPlaneLevel=l.localData.maxPlaneLevel,l.localData.planeData)l.planeData[e]=l.localData.planeData[e];a.default.startGame()},e.setUserData=function(e,t){for(var n in void 0===t&&(t=null),e)t?l.localData.planeData[n]=e[n]:l.localData[n]=e[n],l.localData.storageTime=(new Date).getTime(),cc.sys.localStorage.setItem("localData",l.localData);if(t){var o={data_3:(new Date).getTime(),maxfeiji:0,money:0};for(var n in l.localData)if("object"==typeof l.localData[n]){var a=l.localData[n];for(var i in a)o[i]=a[i]}else o[n]=l.localData[n],"maxPlaneLevel"==n?(console.log("if(key ==maxPlaneLevel)",l.localData),o.maxfeiji=l.localData[n]):"diamonds"==n&&(o.money=l.localData.diamonds);console.log("上传数据",l.localData),l.submitGameData(o)}},e.getNextExperience=function(){var e=l.level+1;return Math.floor(.75*Math.pow(2,e)+5)},e.addExperience=function(e){var t=Math.floor(Math.pow(2,e)*(1/e));l.experience+=t},Object.defineProperty(e,"experience",{get:function(){return l._experience},set:function(e){console.log("//设置经验值"),l._experience=e,l.setUserData({exp:l._experience})},enumerable:!0,configurable:!0}),Object.defineProperty(e,"guideStep",{get:function(){return l._guideStep},set:function(e){l._guideStep},enumerable:!0,configurable:!0}),Object.defineProperty(e,"level",{get:function(){return l._level},set:function(e){console.log("//设置等级",e),l._level=e,l.setUserData({level:l._level})},enumerable:!0,configurable:!0}),Object.defineProperty(e,"profit",{get:function(){return l._profit},set:function(e){console.log("//设置收益"),l._profit=e,l.setUserData({profit:l._profit})},enumerable:!0,configurable:!0}),e.addProfitOfPlane=function(e){var t=l.getProfitOfPlane(e);l.profit+=t},e.reduceProfitOfPlane=function(e){var t=l.getProfitOfPlane(e);l.profit-=t,l.profit<=0&&(l.profit=0)},e.getProfitOfPlane=function(e){var t=l.getSpeedOfPlane(e);return Math.floor(25*Math.pow(2,.9*(e-1))/t)},e.getBaseProfitOfPlane=function(e){return Math.floor(25*Math.pow(2,.9*(e-1)))},Object.defineProperty(e,"gold",{get:function(){return l._gold},set:function(e){e<0&&(e=0),l._gold=e,l.setUserData({gold:l._gold})},enumerable:!0,configurable:!0}),e.submitScore=function(){l._gold},e.submitGameData=function(e){void 0===e&&(e=null),e||(e={gold:l._gold,profit:l._profit,money:l._diamond,level:l._level,exp:l._experience})},e.addGold=function(e){},e.addGoldChangeless=function(e){l.gold+=e},e.addDiamondsChangeless=function(e){l.diamonds+=e},e.reduceGold=function(e){l.gold-=e},Object.defineProperty(e,"diamonds",{get:function(){return l._diamond},set:function(e){console.log("//设置钻石数量",e),e<0&&(e=0),l._diamond=e,l.setUserData({diamonds:l._diamond})},enumerable:!0,configurable:!0}),e.changeDiamonds=function(e,t){void 0===t&&(t=null)},Object.defineProperty(e,"maxPlaneLevel",{get:function(){return l._maxPlaneLevel},set:function(e){console.log("//设置自己拥有的最高飞机等级"),l._maxPlaneLevel=e,l.setUserData({maxPlaneLevel:l._maxPlaneLevel})},enumerable:!0,configurable:!0}),e.getPriceOfPlane=function(e,t){var n;if(1==e)n=Math.floor(100*Math.pow(1.25,t));else{var o=l.getProfitOfPlane(e-1);n=Math.floor(10*Math.floor(360*o*Math.pow(1.5,e-1)/10)*Math.pow(1.25,t))}return n},e.getSpeedOfPlane=function(e){return 5*(1-Math.pow(.001,1/e))},e.setBuyTimesOfPlane=function(e,t){console.log("//设置飞机的购买次数");var n="feiji_shop_"+e;l.planeData&&(l.planeData[n]=t);var o={};o[n]=t,l.setUserData(o,!0)},e.getBuyTimesOfPlane=function(e){var t=0,n="feiji_shop_"+e;return l.planeData&&l.planeData[n]&&(t=l.planeData[n]),t},e.setApronState=function(e,t){var n="feiji_"+e;l.planeData&&(l.planeData[n]=t);var o={};o[n]=t,console.log("设置停机坪状态"),l.setUserData(o,!0)},e.getApronState=function(e){console.log("//获取停机坪状态");var t=0,n="feiji_"+e;for(var o in l.planeData)n==o&&(t=l.planeData[o]);return l.planeData&&l.planeData[n]&&0!=l.planeData[n]&&(t=l.planeData[n]),t},e.setPlaneStateOfApron=function(e,t){void 0===t&&(t=!1),console.log("设置停机坪飞机状态（是否在跑道）");var n="feiji_switch_"+e;l.planeData&&(l.planeData[n]=t);var o={};o[n]=t,l.setUserData(o,!0)},e.getPlaneStateOfApron=function(e){console.log("//获取停机坪飞机状态");var t=!1,n="feiji_switch_"+e;return l.planeData&&l.planeData[n]&&(t=l.planeData[n]),t},e._name=0,e._ID=0,e._experience=0,e._gold=1e4,e._profit=0,e._level=0,e._diamond=0,e._maxPlaneLevel=1,e._guideStep=0,e.offLineProfit=0,e.pfTurntable=1,e.planeData={},e.maxPlane=30,e.maxApron=12,e.localData={_guideStep:0,experience:0,gold:1e4,level:0,diamonds:0,maxPlaneLevel:1,planeData:{},storageTime:0},e=l=__decorate([c],e);var l}());n.default=l,cc._RF.pop()},{"../Controller/GameCtr":"GameCtr","../Controller/WXCtr":"WXCtr"}],Game:[function(e,t,n){"use strict";cc._RF.push(t,"f1f06VxNc1Fi7PAUDkZyb/2","Game"),Object.defineProperty(n,"__esModule",{value:!0});var s=e("../../Controller/GameCtr"),u=e("../../Controller/WXCtr"),d=e("../../Controller/HttpCtr"),p=e("../../Common/AudioManager"),o=cc._decorator,a=o.ccclass,i=o.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._honeycombContent=null,e._pipelineNode=null,e._glassPipelineNode=null,e._noticeNode=null,e._authTipNode=null,e._bonusFrame=null,e._btn_bonus=null,e._btn_pfTurntable=null,e._btn_upSpeed=null,e._btn_rank=null,e._btn_sevenLogin=null,e._btn_exchange=null,e._btn_invite=null,e._btn_more=null,e._lb_upSpeedTime=null,e._lb_money=null,e._lb_notice=null,e._exchange=null,e._mask=null,e._combUpgrade=null,e._otherNode=null,e._carouselNode=null,e._carouselIndex=0,e._vedioCD=-1,e._interval3=0,e._pfTurnableTime=0,e._manufactureUpgrade=null,e._ufoTime=0,e._timeCount=-1,e._speedTime=-1,e._bannerTime=0,e._combList=[],e._pusgMsg=[],e._carouseAds=[],e._canUpSpeed=!0,e.honeyComb=null,e.pipeline=null,e.glassPipeline=null,e.rocket=null,e.offlineIncome=null,e.pfTurntable=null,e.toast=null,e.tipHand=null,e.signIn=null,e.invite=null,e.exchange=null,e.moreNode=null,e.ufo=null,e.ranking=null,e.bubbleHoney=null,e.goldNotEnough=null,e.bgMusic=null,e.ad=null,e}return __extends(e,t),e.prototype.onLoad=function(){s.default.getInstance().setGame(this),s.default.getInstance().initEventTarget(),this.initEvent(),this.initNode(),this.initBubbleHoneys(),this.setRealMoney(0),this.checkOffline(),s.default.getInstance().setPlayTimes(),u.default.getFriendRankingData(),this.commitDataToServer(),this.scheduleOnce(this.updateGameData.bind(this),1),this.initBgMusic(),this.refreshBanner()},e.prototype.start=function(){},e.prototype.initBgMusic=function(){for(;this.node.getChildByTag(999999);)this.node.removeChildByTag(999999);var e=cc.instantiate(this.bgMusic);e.parent=this.node,e.tag=999999},e.prototype.initEvent=function(){var e=this;cc.game.on(cc.game.EVENT_SHOW,function(){e.checkOffline(),e.initBgMusic()}),cc.game.on(cc.game.EVENT_HIDE,function(){s.default.getInstance().setTimestamp()})},e.prototype.initNode=function(){this._otherNode=this.node.getChildByName("otherNode"),this._mask=this._otherNode.getChildByName("mask"),this._bonusFrame=this._otherNode.getChildByName("bonusFrame"),this._btn_pfTurntable=this._bonusFrame.getChildByName("btn_pfTurntable"),this._btn_sevenLogin=this._bonusFrame.getChildByName("btn_sevenLogin"),this._btn_invite=this._bonusFrame.getChildByName("btn_invite"),this._btn_rank=this._bonusFrame.getChildByName("btn_rank"),this._btn_bonus=this._otherNode.getChildByName("btn_bonus"),this._btn_upSpeed=this._otherNode.getChildByName("btn_speedUp"),this._btn_more=this._otherNode.getChildByName("btn_more"),this._exchange=this._otherNode.getChildByName("exchange"),this._carouselNode=this._otherNode.getChildByName("carouselNode"),this._btn_exchange=this._exchange.getChildByName("btn_exchange"),this._lb_money=this._otherNode.getChildByName("exchange").getChildByName("lb_money"),this._lb_upSpeedTime=this._otherNode.getChildByName("lb_upSpeedTime"),this._authTipNode=this.node.getChildByName("authTipNode"),this._honeycombContent=this.node.getChildByName("honeycombNode").getChildByName("content"),this._pipelineNode=this._honeycombContent.getChildByName("pipelineNode"),this._glassPipelineNode=this._honeycombContent.getChildByName("glassPipelineNode"),this._btn_bonus.runAction(cc.repeatForever(cc.sequence(cc.moveBy(.5,cc.p(20,0)),cc.moveBy(.5,cc.p(-20,0))))),this._btn_upSpeed.runAction(cc.repeatForever(cc.sequence(cc.scaleTo(.2,1.15),cc.scaleTo(.2,1)))),this._btn_more.runAction(cc.repeatForever(cc.sequence(cc.rotateBy(.1,-10),cc.rotateBy(.2,20),cc.rotateBy(.1,-10),cc.rotateBy(.05,-10),cc.rotateBy(.1,20),cc.rotateBy(.05,-10),cc.delayTime(2)))),this._lb_upSpeedTime.active=!1,this._authTipNode.active=!1,this._pipelineNode.tag=1e3,this._glassPipelineNode.tag=1e3,this._otherNode.setLocalZOrder(1),this._glassPipelineNode.setLocalZOrder(0),this._pipelineNode.setLocalZOrder(10),this.initCombContentEvent(),this.initBtnEvent(this._btn_bonus),this.initBtnEvent(this._btn_pfTurntable),this.initBtnEvent(this._btn_sevenLogin),this.initBtnEvent(this._btn_invite),this.initBtnEvent(this._btn_upSpeed),this.initBtnEvent(this._btn_rank),this.initBtnEvent(this._btn_exchange),this.initBtnEvent(this._btn_more),this._btn_sevenLogin.active=s.default.isAudited,this._btn_pfTurntable.active=s.default.isAudited,this._btn_invite.active=s.default.isAudited,this._exchange.active=s.default.isAudited,this._btn_more.active=s.default.isAudited,this._btn_upSpeed.active=s.default.isAudited,this._btn_bonus.active=s.default.isAudited,this._btn_upSpeed.active=!0,this.initCombs(),this.initCarousel()},e.prototype.initCarousel=function(){var e=this;if(s.default.isAudited&&s.default.setting.nav.navB&&!(s.default.setting.nav.navB<=0)){for(var t=0;t<s.default.setting.nav.navB.length;t++){var n=cc.instantiate(this.ad);n.parent=this._carouselNode,n.scale=1,n.x=0==t?0:-1800,n.getComponent("ad").init(s.default.setting.nav.navB[t]),this._carouseAds.push(n)}this._carouselIndex=0,this.scheduleOnce(function(){e._carouseAds[e._carouselIndex].getComponent("ad").doScale()},2),this.scheduleOnce(this.doCarousel.bind(this),5)}},e.prototype.doCarousel=function(){if(!(this._carouseAds.length<=1)){this._carouseAds[this._carouselIndex].x=0,this._carouseAds[this._carouselIndex].getComponent("ad").doScale();for(var e=0;e<this._carouseAds.length;e++)e!=this._carouselIndex&&(this._carouseAds[e].scale=1,this._carouseAds[e].getComponent("ad").stopActions(),this._carouseAds[e].x=-1800);this._carouselIndex++,this._carouselIndex=this._carouselIndex%this._carouseAds.length,this.scheduleOnce(this.doCarousel.bind(this),5)}},e.prototype.initBtnEvent=function(e){var r=this;e.on(cc.Node.EventType.TOUCH_END,function(e){if(p.default.getInstance().playSound("audio/open_panel"),"btn_speedUp"==e.target.getName()){if(!r._btn_upSpeed.getComponent(cc.Button).interactable)return;if(1<s.default.globalSpeedRate)return void r.showToast("正在加速中...");d.default.openClick(s.default.clickType.speedUp);var t=function(){s.default.globalSpeedRate=2,s.default.getInstance().getManufacture().resetLineAction(),r._speedTime=0,r.startSpeedUpTimer(s.default.otherConfig.speedUpPersist),r._btn_upSpeed.getComponent(cc.Button).interactable=!1,r._btn_upSpeed.stopAllActions(),r._canUpSpeed=!1};if(r._bonusFrame.active=!1,s.default.vedioTimes<=0){if(!s.default.isAudited)return void s.default.getInstance().getGame().showToast("今日视频已看完");u.default.share({callback:t})}else{if(0<r._vedioCD)return void u.default.share({callback:t});u.default.offCloseVideo(),u.default.showVideoAd(),u.default.onCloseVideo(function(e){e?t():r.showToast("视频未看完，无法领取奖励")})}}else if("btn_rank"==e.target.getName()){if(r._bonusFrame.active=!1,cc.find("Canvas").getChildByName("ranking"))return;var n=cc.instantiate(r.ranking);n.parent=cc.find("Canvas"),n.setLocalZOrder(10),d.default.openClick(s.default.clickType.rank)}else if("btn_pfTurntable"==e.target.getName()){if(r._bonusFrame.active=!1,!r._btn_pfTurntable.getComponent(cc.Button).interactable)return void r.showToast("转盘冷却中...");if(cc.find("Canvas").getChildByName("pfTurntable"))return;var o=cc.instantiate(r.pfTurntable);o.setLocalZOrder(1),o.parent=cc.find("Canvas")}else if("btn_sevenLogin"==e.target.getName()){if(r._bonusFrame.active=!1,cc.find("Canvas").getChildByName("signIn"))return;r.setMaskVisit(!0);var a=cc.instantiate(r.signIn);a.parent=cc.find("Canvas"),a.setLocalZOrder(1)}else if("btn_invite"==e.target.getName()){if(r._bonusFrame.active=!1,cc.find("Canvas").getChildByName("invite"))return;r.setMaskVisit(!0);var i=cc.instantiate(r.invite);i.parent=cc.find("Canvas"),i.setLocalZOrder(1),d.default.openClick(s.default.clickType.invite)}else if("btn_exchange"==e.target.getName()){if(r._bonusFrame.active=!1,cc.find("Canvas").getChildByName("exchange1"))return;var l=cc.instantiate(r.exchange);l.parent=cc.find("Canvas"),l.setLocalZOrder(1)}else if("btn_more"==e.target.getName()){if(r._bonusFrame.active=!1,cc.find("Canvas").getChildByName("moreNode"))return;var c=cc.instantiate(r.moreNode);c.parent=cc.find("Canvas"),c.setLocalZOrder(1),d.default.openClick(s.default.clickType.more)}else"btn_bonus"==e.target.getName()&&(r._bonusFrame.active=!r._bonusFrame.active)}),this.node.on(cc.Node.EventType.TOUCH_END,function(e){r._bonusFrame.active=!1})},e.prototype.initBubbleHoneys=function(){for(var e=0;e<5;e++){var t=cc.instantiate(this.bubbleHoney);s.default.honeyPool.put(t)}},e.prototype.initCombContentEvent=function(){var t=this;this._honeycombContent.on(cc.Node.EventType.TOUCH_START,function(e){}),this._honeycombContent.on(cc.Node.EventType.TOUCH_MOVE,function(e){t._honeycombContent.y<=0&&e.touch._point.y-e.touch._prevPoint.y<0||t._honeycombContent.y>=408*(s.default.comblevel+4)&&0<e.touch._point.y-e.touch._prevPoint.y||(t._honeycombContent.y+=e.touch._point.y-e.touch._prevPoint.y,t._honeycombContent.y<=0&&(t._honeycombContent.y=0),t._honeycombContent.y>=408*(s.default.comblevel+4)&&(t._honeycombContent.y=408*(s.default.comblevel+4)))}),this._honeycombContent.on(cc.Node.EventType.TOUCH_END,function(e){}),this._honeycombContent.on(cc.Node.EventType.TOUCH_CANCEL,function(e){})},e.prototype.initCombs=function(){for(var e=0;e<s.default.comblevel+5;e++)this.initComb(e);this._honeycombContent.setContentSize(cc.size(1080,408*(s.default.comblevel+5)+200))},e.prototype.initComb=function(e){var t=JSON.parse(s.default.getInstance().getCombsUnlock()),n=cc.instantiate(this.pipeline),o=cc.instantiate(this.honeyComb),a=cc.instantiate(this.glassPipeline);n.parent=this._pipelineNode,o.parent=this._honeycombContent,a.parent=this._glassPipelineNode,n.x=-460,n.y=-190-408*e,o.x=60,o.y=-220-408*e,a.x=-492,a.y=-190-408*e;var i=t[e]?t[e].level:0,l=!!t[e]&&t[e].unlock;o.tag=e,o.setLocalZOrder(2),o.getComponent("honeycomb").setLevel(e+1,i,l),o.getComponent("honeycomb").initBtn(),this._combList.push(o)},e.prototype.unlockComb=function(){if(!(30<=s.default.comblevel)){s.default.comblevel++,s.default.getInstance().getManufacture().doCaculateHoneyJar();var e=this.getComb(s.default.comblevel),t=this.getComb(s.default.comblevel-1);t&&t.getComponent("honeycomb").getUnlock()&&e.getComponent("honeycomb").showUnlockBtn(!0),s.default.comblevel+4<30&&(this.initComb(s.default.comblevel+4),this._honeycombContent.setContentSize(cc.size(1080,408*(s.default.comblevel+5)+200)),s.default.getInstance().setCombLevel())}},e.prototype.startSpeedUpTimer=function(e){this._timeCount=e,this._lb_upSpeedTime.active=!0,s.default.getInstance().emitEvent("startSpeedUp",null),this.setCombsSpeed(2),this.countDown()},e.prototype.countDown=function(){var n=this;this._lb_upSpeedTime.stopAllActions();var e=Math.floor(this._timeCount/60)<10?"0"+Math.floor(this._timeCount/60):""+Math.floor(this._timeCount/60),t=this._timeCount%60<10?"0"+this._timeCount%60:""+this._timeCount%60;this._lb_upSpeedTime.getComponent(cc.Label).string=e+":"+t,this._lb_upSpeedTime.runAction(cc.repeat(cc.sequence(cc.delayTime(1),cc.callFunc(function(){n._timeCount-=1;var e=Math.floor(n._timeCount/60)<10?"0"+Math.floor(n._timeCount/60):""+Math.floor(n._timeCount/60),t=n._timeCount%60<10?"0"+n._timeCount%60:""+n._timeCount%60;n._lb_upSpeedTime.getComponent(cc.Label).string=e+":"+t,n._timeCount<0&&(n.setCombsSpeed(1),s.default.globalSpeedRate=1,n._btn_upSpeed.getComponent(cc.Button).interactable=!1,n._btn_upSpeed.stopAllActions(),n._lb_upSpeedTime.active=!1,s.default.getInstance().getManufacture().resetLineAction(),s.default.getInstance().emitEvent("stopSpeedUp",null),n._lb_upSpeedTime.stopAllActions(),n._canUpSpeed&&(n._btn_upSpeed.getComponent(cc.Button).interactable=!0,n._btn_upSpeed.runAction(cc.repeatForever(cc.sequence(cc.scaleTo(.2,1.15),cc.scaleTo(.2,1))))))})),this._timeCount+2))},e.prototype.stopUpSpeedAction=function(){this._btn_upSpeed.getComponent(cc.Button).interactable=!1,this._btn_upSpeed.stopAllActions()},e.prototype.setVedioCD=function(){s.default.setting?this._vedioCD=s.default.setting.advVideoTime:this._vedioCD=60},e.prototype.getVedioCD=function(){return this._vedioCD},e.prototype.showGoldNotEnough=function(){if(s.default.isAudited&&!cc.find("Canvas").getChildByName("goldNotEnough")){var e=cc.instantiate(this.goldNotEnough);e.parent=cc.find("Canvas"),e.setLocalZOrder(1)}},e.prototype.refreshBanner=function(){this._bannerTime++,this._bannerTime>=s.default.advTime&&(u.default.setBannerAd(100,300),this._bannerTime=0),this.scheduleOnce(this.refreshBanner.bind(this),1)},e.prototype.getCurSpeedUpTime=function(){return this._timeCount},e.prototype.checkOffline=function(){if(s.default.getInstance().getPlayTimes()&&!cc.find("Canvas").getChildByName("offlineIncome")){var e=(Date.now()-s.default.getInstance().getTimestamp())/1e3;if(!(e<120)){e=28800<e?28800:e;var t=cc.instantiate(this.offlineIncome);t.parent=cc.find("Canvas"),t.setLocalZOrder(1),t.getComponent("offlineIncome").init(e)}}},e.prototype.getComb=function(e){return this._honeycombContent.getChildByTag(e-1)},e.prototype.setMaskVisit=function(e){this._mask.active=e},e.prototype.setRealMoney=function(e){s.default.realMoney+=e,cc.find("Canvas").getChildByName("noticeNode").getComponent("notice").addNotice(e),s.default.realMoney&&(this._lb_money.getComponent(cc.Label).string=(s.default.realMoney/100).toFixed(2))},e.prototype.showAuthTip=function(){this._authTipNode.active=!0},e.prototype.hideAuthTip=function(){this._authTipNode.active=!1},e.prototype.setCombUpgrade=function(e){this._combUpgrade=e},e.prototype.setManufactureUpgrade=function(e){this._manufactureUpgrade=e},e.prototype.clearCombUpGrade=function(){this._combUpgrade=null},e.prototype.clearManufactureUpgrade=function(){this._manufactureUpgrade=null},e.prototype.showToast=function(e){if(!cc.find("Canvas").getChildByName("toast")){var t=cc.instantiate(this.toast);t.parent=cc.find("Canvas"),t.setLocalZOrder(1e3),t.getComponent("toast").show(e),t.runAction(cc.sequence(cc.delayTime(1),cc.fadeOut(.3),cc.callFunc(function(){t.destroy()})))}},e.prototype.noticeMoneyUpdate=function(){for(var e=0;e<s.default.comblevel;e++)s.default.getInstance().emitEvent("moneyUpdate"+(e+1),null)},e.prototype.setCombsSpeed=function(e){for(var t=0;t<this._combList.length;t++)this._combList[t].getComponent("honeycomb").setSpeedRate(e)},e.prototype.createTipHand=function(e){var t=cc.instantiate(this.tipHand);t.parent=e;var n=t.getChildByName("sp");return n.runAction(cc.repeatForever(cc.sequence(cc.delayTime(.3),cc.callFunc(function(){n.y+=40}),cc.delayTime(.3),cc.callFunc(function(){n.y-=40})))),t},e.prototype.showGuideStep1=function(){var e=this.createTipHand(cc.find("Canvas"));e.tag=s.default.tipHandTag+1,e.active=!1,e.scale=.6,e.x=200,e.y=300,this.scheduleOnce(function(){e.active=!0},3)},e.prototype.showGuideStep2=function(){var e=this.createTipHand(this.getComb(1));e.setLocalZOrder(50),e.tag=s.default.tipHandTag+2,e.scale=.6,e.x=300,e.y=0},e.prototype.showGuideStep3=function(){var e=this.createTipHand(s.default.getInstance().getManufacture().node);e.tag=s.default.tipHandTag+3,e.scale=.6,e.x=-400,e.y=150},e.prototype.showGuideStep4=function(){var e=this.createTipHand(this.node);e.tag=s.default.tipHandTag+4,e.scale=.6,e.x=12,e.y=565},e.prototype.closeGuideStep=function(e,t){for(;e.getChildByTag(s.default.tipHandTag+t);)e.removeChildByTag(s.default.tipHandTag+t)},e.prototype.completeGuideStep=function(e,t){this.closeGuideStep(e,t),s.default.guide.push(t),s.default.getInstance().setGuide()},e.prototype.isGuideStepOver=function(e){for(var t=0;t<s.default.guide.length;t++)if(e==s.default.guide[t])return!0;return!1},e.prototype.startPfTurntableTime=function(){this._pfTurnableTime=0,this.countPfTurnableTime()},e.prototype.countPfTurnableTime=function(){this._pfTurnableTime++,this._pfTurnableTime>=s.default.otherConfig.pfTurntableInterval?this._btn_pfTurntable.getComponent(cc.Button).interactable=!0:(this.unschedule(this.countPfTurnableTime.bind(this)),this.scheduleOnce(this.countPfTurnableTime.bind(this),1))},e.prototype.disableBtnPfturnable=function(){this._btn_pfTurntable.getComponent(cc.Button).interactable=!1},e.prototype.updateSpeedUpState=function(e){0<=this._speedTime&&(this._speedTime+=e,this._speedTime>=s.default.otherConfig.speedUpInterval&&(this._canUpSpeed=!0,1==s.default.globalSpeedRate&&(this._btn_upSpeed.getComponent(cc.Button).interactable=!0,this._btn_upSpeed.runAction(cc.repeatForever(cc.sequence(cc.scaleTo(.2,1.15),cc.scaleTo(.2,1))))),this._speedTime=-1))},e.prototype.updateUfoTime=function(e){0<=this._ufoTime&&(this._ufoTime+=e,this._ufoTime>=s.default.advVedioTime&&(cc.instantiate(this.ufo).parent=this.node,this._ufoTime=0))},e.prototype.caculateHideHoney=function(){for(var e=JSON.parse(s.default.getInstance().getCombsUnlock()),t=0;t<e.length;t++)this._honeycombContent.y>=408*(t+1)&&(s.default.honeyValue+=(s.default.combConfig[t].initialIncome+s.default.combConfig[t].incomeMatrix*(e[t].level-1)*e[t].level)/(2*s.default.combConfig[t].baseSpeed)),2<t-Math.floor(this._honeycombContent.y/408)&&(s.default.honeyValue+=(s.default.combConfig[t].initialIncome+s.default.combConfig[t].incomeMatrix*(e[t].level-1)*e[t].level)/(2*s.default.combConfig[t].baseSpeed))},e.prototype.upgradeNodeUpdate=function(){this._combUpgrade&&this._combUpgrade.getComponent("combUpgrade").doUpdate(),this._manufactureUpgrade&&this._manufactureUpgrade.getComponent("manufactureUpgrade").doUpdate()},e.prototype.updateGameData=function(){s.default.getInstance().setRich(),s.default.getInstance().setMoney(),s.default.getInstance().setTimestamp(),s.default.getInstance().setLevelMoney(),this.updateSpeedUpState(1),this.updateUfoTime(1),this.caculateHideHoney(),this.upgradeNodeUpdate(),this.unschedule(this.updateGameData.bind(this)),this.scheduleOnce(this.updateGameData.bind(this),1)},e.prototype.commitDataToServer=function(){d.default.setGold(s.default.rich),u.default.submitScoreToWx(s.default.rich),this.unschedule(this.commitDataToServer.bind(this)),this.scheduleOnce(this.commitDataToServer.bind(this),10)},e.prototype.playGoldEft=function(){for(var e=1;e<=2;e++){var t=this.node.getChildByName("otherNode").getChildByName("offLineEft"+e).getComponent(cc.ParticleSystem);t.resetSystem();for(var n=0;n<t.totalParticles;n++)t.addParticle()}p.default.getInstance().playSound("audio/gold")},e.prototype.update=function(e){this._interval3+=e;for(var t=0;t<s.default.comblevel;t++)this._honeycombContent.y>=408*(t+1)?this._combList[t].getComponent("honeycomb").stopWork():2<t-Math.floor(this._honeycombContent.y/408)?this._combList[t].getComponent("honeycomb").stopWork():this._combList[t].getComponent("honeycomb").startWork(e);.1<=this._interval3&&(s.default.getInstance().getLevel().updateMoney(),this._interval3=0),0<=this._vedioCD&&(this._vedioCD-=e)},__decorate([i(cc.Prefab)],e.prototype,"honeyComb",void 0),__decorate([i(cc.Prefab)],e.prototype,"pipeline",void 0),__decorate([i(cc.Prefab)],e.prototype,"glassPipeline",void 0),__decorate([i(cc.Prefab)],e.prototype,"rocket",void 0),__decorate([i(cc.Prefab)],e.prototype,"offlineIncome",void 0),__decorate([i(cc.Prefab)],e.prototype,"pfTurntable",void 0),__decorate([i(cc.Prefab)],e.prototype,"toast",void 0),__decorate([i(cc.Prefab)],e.prototype,"tipHand",void 0),__decorate([i(cc.Prefab)],e.prototype,"signIn",void 0),__decorate([i(cc.Prefab)],e.prototype,"invite",void 0),__decorate([i(cc.Prefab)],e.prototype,"exchange",void 0),__decorate([i(cc.Prefab)],e.prototype,"moreNode",void 0),__decorate([i(cc.Prefab)],e.prototype,"ufo",void 0),__decorate([i(cc.Prefab)],e.prototype,"ranking",void 0),__decorate([i(cc.Prefab)],e.prototype,"bubbleHoney",void 0),__decorate([i(cc.Prefab)],e.prototype,"goldNotEnough",void 0),__decorate([i(cc.Prefab)],e.prototype,"bgMusic",void 0),__decorate([i(cc.Prefab)],e.prototype,"ad",void 0),e=__decorate([a],e)}(cc.Component);n.default=l,cc._RF.pop()},{"../../Common/AudioManager":"AudioManager","../../Controller/GameCtr":"GameCtr","../../Controller/HttpCtr":"HttpCtr","../../Controller/WXCtr":"WXCtr"}],HttpCtr:[function(e,t,n){"use strict";cc._RF.push(t,"e7a76N18wxAD6bqHIHxO/KK","HttpCtr"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../Common/Http"),a=e("../Common/UserManager"),i=e("./WXCtr"),l=e("./GameCtr"),c=e("../Common/ViewManager"),r=e("../Common/Util"),s=cc._decorator,u=s.ccclass,d=(s.property,function(){function e(){}return(n=e).login=function(e,t){void 0===t&&(t=!1),o.default.send({url:o.default.UrlConfig.LOGIN,success:function(e){1==e.ret&&(console.log("log-------------http:login---\x3eresp=:",e),a.default.user_id=e.data.uid,a.default.voucher=e.data.voucher,n.getUserInfo(null,t),n.getSettingConfig(),n.chanelCheck(i.default.launchOption.query),i.default.launchOption.query&&n.invitedByFriend(i.default.launchOption.query))},data:{code:e}})},e.getShareConfig=function(){o.default.send({url:o.default.UrlConfig.GET_SHARE,success:function(e){console.log("获取分享配置信息",e),i.default.shareTitle=e.data.share_title,i.default.shareImg=e.data.share_img,i.default.setShareAppMessage()},data:{share_type:"index"}})},e.getUserInfo=function(t,n){void 0===t&&(t=null),void 0===n&&(n=!1),o.default.send({url:o.default.UrlConfig.GET_USERINFO,success:function(e){console.log("log-------getUserInfo---\x3eresp=:",e),e.success==o.default.Code.OK&&(a.default.user=e.user,l.default.realMoney=e.user.cash,console.log("log--------GameCtr.realMoney=:",l.default.realMoney),t&&t(e.user),n&&(console.log("log---------排行授权  刷新排行"),l.default.getInstance().getRanking().showWorldRanking(),l.default.getInstance().getRanking().initSelfInfo()))},data:{uid:a.default.user_id,voucher:a.default.voucher}})},e.saveUserInfo=function(e){console.log("log---------------saveUserInfo-----  data=:",a.default.user_id,e),o.default.send({url:o.default.UrlConfig.SET_USER_DATA,data:{uid:a.default.user_id,voucher:a.default.voucher,encryptedData:e.encryptedData,iv:e.iv},success:function(){console.log("log-----------------上传信息成功------------")}})},e.chanelCheck=function(e){o.default.send({url:o.default.UrlConfig.CHANEL_RECORD,data:{channel_id:e.channel_id,cuid:e.cuid,cvoucher:e.cvoucher,cid:e.cid,pid:e.pid},success:function(e){console.log("渠道验证成功",e)}})},e.getSettingConfig=function(){o.default.send({url:o.default.UrlConfig.GET_SETTING,success:function(e){console.log("获取游戏配置=：",e),l.default.isAudited=e.ok,console.log("获取游戏配置 GameCtr.isAudited=：",l.default.isAudited),l.default.setting=e,l.default.advTime=e.advTime,l.default.advVedioTime=e.advVideoTime,l.default.isGetSetting=!0,l.default.getInstance().getLoding().refreshMoreNewGame();var t=localStorage.getItem("VideoTimes");if(t){var n=JSON.parse(t);n.day!=r.default.getCurrTimeYYMMDD()?l.default.vedioTimes=l.default.setting.advSum:l.default.vedioTimes=n.times}else l.default.vedioTimes=l.default.setting.advSum}})},e.videoCheck=function(e){o.default.send({url:o.default.UrlConfig.VideoOpen,data:{user_id:a.default.user_id,channel_id:e.channel_id,cuid:e.cuid,cvoucher:e.cvoucher,cid:e.cid,pid:e.pid}})},e.shareGroupCheck=function(e,t,n){o.default.send({url:o.default.UrlConfig.SHARE_GROUP,data:{uid:a.default.user_id,voucher:a.default.voucher,encrypted_data:e,iv:t},success:function(e){1==e.ret?n&&n():0==e.ret&&l.default.getInstance().getGame().showToast(e.msg)}})},e.getAdConfig=function(){o.default.send({url:o.default.UrlConfig.ADConfig,success:function(e){console.log("获取广告配置",e),i.default.setVideoAd(),e.data.advid&&(i.default.bannerId=e.data.advid,i.default.setBannerAd(100,300))},data:{uid:a.default.user_id,voucher:a.default.voucher}})},e.invitedByFriend=function(e){o.default.send({url:o.default.UrlConfig.INVITED_BY_FRIEND,success:function(e){console.log("log--------------invitedByFriend=:",e)},data:{uid:a.default.user_id,voucher:a.default.voucher,touid:e.invite}})},e.getInviteResult=function(t){void 0===t&&(t=null),o.default.send({url:o.default.UrlConfig.SEEK_LOG,success:function(e){console.log("log-----------邀请好友结果-=:",e),t&&t(e.data)},data:{uid:a.default.user_id,voucher:a.default.voucher}})},e.chanelCheck1=function(e){console.log("log----------渠道验证--------query=",e),o.default.send({url:o.default.UrlConfig.CHANEL_RECORD,data:{uid:a.default.user_id,voucher:a.default.voucher,channel_id:e.channel_id},success:function(e){console.log("渠道验证成功",e)}})},e.channelGift=function(e){88==e.channel_id&&e.guanzu},e.getLoginAwardList=function(t){void 0===t&&(t=null),o.default.send({url:o.default.UrlConfig.GET_TODAY,success:function(e){t&&t(e)},data:{uid:a.default.user_id,voucher:a.default.voucher}})},e.sign=function(t){o.default.send({url:o.default.UrlConfig.DO_TODAY,success:function(e){console.log("log-------DO_TODAY-res=:",e),e.m?t(e):l.default.getInstance().getGame().showToast(e.msg)},data:{uid:a.default.user_id,voucher:a.default.voucher}})},e.getRankList=function(e,t){o.default.send({url:o.default.UrlConfig.GET_RANK_LIST,success:function(e){e.code==o.default.Code.OK?t(!0):(c.default.toast(e.msg),t(!1))},data:{uid:a.default.user_id,type:e}})},e.setGold=function(t){o.default.send({url:o.default.UrlConfig.SET_GOLD_DATA,success:function(e){1==e.ret?console.log("log-----------金币上报成功--------------_gold=:",t):c.default.toast(e.msg)},data:{uid:a.default.user_id,voucher:a.default.voucher,gold:t}})},e.setUserDataState=function(e,t){var n={uid:a.default.user_id,voucher:a.default.voucher};n["data_"+e]=t,console.log("log---------sendData=:",n),o.default.send({url:o.default.UrlConfig.SET_GOLD_DATA,success:function(e){1==e.ret?console.log("log------上报领取邀请奖励成功"):c.default.toast(e.msg)},data:n})},e.openRed=function(e,t){o.default.send({url:o.default.UrlConfig.OPEN_RED,success:function(e){e.m?t(e.m):l.default.getInstance().getGame().showToast(e.msg)},data:{uid:a.default.user_id,voucher:a.default.voucher,clickid:e}})},e.doExchange=function(e){o.default.send({url:o.default.UrlConfig.DO_EXCHANGE,success:function(e){if(1!=e.ret)l.default.getInstance().getGame().showToast(e.msg);else{l.default.realMoney-=1e3,l.default.getInstance().getGame().showToast("兑换成功"),l.default.getInstance().getGame().setRealMoney(0);var t=cc.find("Canvas").getChildByName("exchange1");if(t){t.getComponent("exchange1").setRealyMoney();var n=t.getChildByName("exchange2");n&&n.getComponent("exchange2").setRealMoney()}}},data:{uid:a.default.user_id,voucher:a.default.voucher,rewardid:1,exchangeUser:e}})},e.openClick=function(e,t){void 0===t&&(t=null),l.default.setting&&(t||l.default.setting.onclick)&&o.default.send({url:o.default.UrlConfig.OPEN_CLICK,success:function(e){1!=e.ret&&l.default.getInstance().getGame().showToast(e.msg)},data:{uid:a.default.user_id,voucher:a.default.voucher,clickid:e,appid:t}})},e.getCash=function(t){o.default.send({url:o.default.UrlConfig.GET_CASH,success:function(e){e.m?t(e):l.default.getInstance().getGame().showToast(e.msg)},data:{uid:a.default.user_id,voucher:a.default.voucher}})},e.pushMsg=function(t){o.default.send({url:o.default.UrlConfig.PUSH_MSG,success:function(e){console.log("log---------pushMsg --\x3eres=:",e),1==e.ret&&t(e.data)},data:{uid:a.default.user_id,voucher:a.default.voucher}})},e=n=__decorate([u],e);var n}());n.default=d,cc._RF.pop()},{"../Common/Http":"Http","../Common/UserManager":"UserManager","../Common/Util":"Util","../Common/ViewManager":"ViewManager","./GameCtr":"GameCtr","./WXCtr":"WXCtr"}],Http:[function(e,t,n){"use strict";cc._RF.push(t,"ba804Fwfo1B7pM2bIm/ruPv","Http"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("./UrlConfig"),a=cc._decorator,i=a.ccclass,l=(a.property,function(){function e(){this.isCancel=!1,this.xhr=new XMLHttpRequest,this.xhr.timeout=1e4}return(v=e).send=function(e){var t=e.mountNode,n=void 0===t?null:t,o=e.tag,a=void 0===o?null:o,i=e.url,l=void 0===i?null:i,c=e.data,r=void 0===c?{}:c,s=e.method,u=void 0===s?"POST":s,d=e.success,p=void 0===d?function(e,t){}:d,h=e.error,f=void 0===h?null:h,g=e.async,_=void 0===g||g;if(l){!/^http/.test(l)&&v.rootUrl&&(l=v.rootUrl+l),cc.log("request url:%s method:%s",l,u),r.tk,cc.log(JSON.stringify(r));var m=new v;return m.request({mountNode:n,tag:a,url:l,data:r,method:u,success:p,error:f,async:_}),cc.log("sendsendsendsendsendsendsend",l,u),m}},e.prototype.request=function(e){var t=this,n=e.mountNode,o=void 0===n?null:n,a=e.tag,i=void 0===a?null:a,l=e.url,c=void 0===l?null:l,r=e.data,s=void 0===r?{}:r,u=e.method,d=void 0===u?"GET":u,p=e.success,h=void 0===p?function(e,t){}:p,f=e.error,g=void 0===f?null:f,_=e.async,m=void 0===_||_;d=d||"GET";var v="";for(var y in s)""!=v&&(v+="&"),v+=y+"="+encodeURIComponent(s[y]);"GET"==d&&""!=v&&(-1==c.indexOf("?")&&(c+="?"),c+=v);var b=function(e){t.isCancel?cc.log("request canceled!"):(null==o||cc.isValid(o))&&g&&(g(e,i),g=null)};this.xhr.onreadystatechange=function(){if(4==t.xhr.readyState&&!t.isCancel)if(200<=t.xhr.status&&t.xhr.status<=400){var e=t.xhr.responseText;try{if(cc.log(e),0==e.indexOf("{")&&(e=JSON.parse(e)),null!=o&&!cc.isValid(o))return;h&&h(e,i)}catch(e){cc.error(e)}}else cc.warn("http request problem:"+t.xhr.status),b("连接失败:"+t.xhr.status)},this.xhr.onerror=function(e){cc.error("http request onerror"),b("连接失败，请检查网络")},this.xhr.ontimeout=function(){cc.error("http request ontimeout"),b("连接超时")},this.xhr.open(d,c,m),this.xhr.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),"GET"==d?(cc.log("send Get!!"),this.xhr.send()):"POST"==d?(cc.log("send Post!!"),this.xhr.send(v)):cc.log("[HTTP] no send")},e.prototype.cancel=function(){this.isCancel=!0},e.Code={OK:"300"},e.UrlConfig=o.default,e.rootUrl=v.UrlConfig.rootUrl,e=v=__decorate([i],e);var v}());n.default=l,cc._RF.pop()},{"./UrlConfig":"UrlConfig"}],MemoryDetector:[function(e,t,n){"use strict";cc._RF.push(t,"86461BkJVpNt4ZELh7OE6Sl","MemoryDetector"),Object.defineProperty(n,"__esModule",{value:!0});var o=cc._decorator,a=o.ccclass,i=(o.property,function(){function e(){}return(t=e).showMemoryStatus=function(){if(!cc.sys.isNative&&!t._inited){cc.profiler;cc.director.on(cc.Director.EVENT_AFTER_VISIT,function(){var e=0,t=cc.textureCache._textures;for(var n in t){var o=t[n];e+=o.getPixelWidth()*o.getPixelHeight()*4}var a=cc.textureCache._textureColorsCache;for(var n in a){var i=a[n];for(var l in i){var c=i[l];e+=c.width*c.height*4}}console.log("log-----------------------memory=:",(e/1048576).toFixed(2)+"M")}),t._inited=!0}},e._inited=!1,e=t=__decorate([a],e);var t}());n.MemoryDetector=i,cc._RF.pop()},{}],PopupView:[function(e,t,n){"use strict";cc._RF.push(t,"19031wwCBpBi6olCmXjcj5x","PopupView"),Object.defineProperty(n,"__esModule",{value:!0});var o=cc._decorator,a=o.ccclass,i=(o.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._maskNode=null,e._maskOpacity=0,e._localZOrder=0,e}return __extends(e,t),e.prototype.onLoad=function(){cc.log("PopupView onLoad %s",this.name),this._maskNode=this.node.getChildByName("mask"),this._maskNode&&(this._maskNode.active=this._showMask,this._maskNode.opacity=this._maskOpacity,this._maskNode.on(cc.Node.EventType.TOUCH_START,this.onTouchMask,this),this._maskNode.on(cc.Node.EventType.TOUCH_END,this.onTouchMask,this))},e.prototype.onDestroy=function(){cc.log("PopupView onDestroy %s",this.name),this._maskNode&&(this._maskNode.off(cc.Node.EventType.TOUCH_START,this.onTouchMask,this),this._maskNode.off(cc.Node.EventType.TOUCH_END,this.onTouchMask,this)),this.destroyCallback&&this.destroyCallback(this)},e.prototype.onTouchMask=function(e){e.stopPropagation(),e.type==cc.Node.EventType.TOUCH_END&&this.closeOnTouchOutside&&this.contentNode&&!cc.rectContainsPoint(this.contentNode.getBoundingBoxToWorld(),e.getLocation())&&this.dismiss()},e.prototype.show=function(e){cc.isValid(this)&&cc.isValid(e)&&(this.node.parent=e,this.node.setLocalZOrder(this.localZOrder||0),cc.isValid(this._showActionTarget)&&cc.isValid(this._showAction)&&(this._showActionTarget.stopAllActions(),this._showActionTarget.runAction(this._showAction)))},e.prototype.dismiss=function(){cc.isValid(this.node)&&(cc.isValid(this._dismissActionTarget)&&cc.isValid(this._dismissAction)?(this._dismissActionTarget.stopAllActions(),this._dismissActionTarget.runAction(this._dismissAction)):this.doDismiss())},e.prototype.doDismiss=function(){this.node.destroy()},e.prototype.setMask=function(e,t){this._showMask=e,this._maskOpacity=t},e.prototype.setShowAction=function(e,t){cc.isValid(t)&&cc.isValid(e)&&(this._showAction=e,this._showActionTarget=t)},e.prototype.setDismissAction=function(e,t){var n=this;cc.isValid(t)&&cc.isValid(e)&&(this._dismissAction=cc.sequence(e,cc.callFunc(function(){n.doDismiss()})),this._dismissActionTarget=t)},e.prototype.setOnDestroyCallback=function(e){this.destroyCallback=e},Object.defineProperty(e.prototype,"closeOnTouchOutside",{get:function(){return this._closeOnTouchOutside},set:function(e){this._closeOnTouchOutside=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"closeOnKeyBack",{get:function(){return this._closeOnKeyBack},set:function(e){this._closeOnKeyBack=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"localZOrder",{get:function(){return this._localZOrder},set:function(e){this._localZOrder=e},enumerable:!0,configurable:!0}),e=__decorate([a],e)}(cc.Component));n.default=i,cc._RF.pop()},{}],PromptDialog:[function(e,t,n){"use strict";cc._RF.push(t,"107f6idJYdHi6R3QKRQ4W4g","PromptDialog"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("./BaseDialog"),a=e("../../Common/Util"),i=cc._decorator,l=i.ccclass,c=i.property,r=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.promptLabel=null,e._promptText="",e.singleButton=!1,e}return __extends(e,t),e.prototype.onLoad=function(){t.prototype.onLoad.call(this)},e.prototype.initData=function(){var e="确定",t="取消";this._data&&(this.cancelButtonClick=this._data.cancelButtonClick,this.sureButtonClick=this._data.sureButtonClick,this.singleButton=!!this._data.singleButton,"string"==typeof this._data.message&&(this._promptText=this._data.message,this.promptLabel.string=this._promptText),e=this._data.rightText||e,t=this._data.leftText||t),this._sureButton&&a.default.setString(a.default.findChildByName("Label",this._sureButton.node),e),this._cancelButton&&a.default.setString(a.default.findChildByName("Label",this._cancelButton.node),t),this.singleButton&&(cc.isValid(this._sureButton)&&(this._sureButton.node.x=0),cc.isValid(this._cancelButton)&&(this._cancelButton.node.active=!1))},e.prototype.onButtonClick=function(e,t){switch(t){case o.default.ButtonTag.SURE:if(this.sureButtonClick&&this.sureButtonClick())return;this.dismiss();break;case o.default.ButtonTag.CANCEL:if(this.cancelButtonClick&&this.cancelButtonClick())return;this.dismiss();break;case o.default.ButtonTag.CLOSE:this.dismiss()}},__decorate([c(cc.Label)],e.prototype,"promptLabel",void 0),e=__decorate([l],e)}(o.default);n.default=r,cc._RF.pop()},{"../../Common/Util":"Util","./BaseDialog":"BaseDialog"}],RankingCell:[function(e,t,n){"use strict";cc._RF.push(t,"31f9f5AnaRKtZm39HiZkXn2","RankingCell"),Object.defineProperty(n,"__esModule",{value:!0});var l=e("../../Common/Util"),o=cc._decorator,a=o.ccclass,i=o.property,c=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.sprBg=null,e.sprMedal=null,e.sprHead=null,e.lbRank=null,e.lbName=null,e.lbCity=null,e.lbScore=null,e.medalFrames=[],e}return __extends(e,t),e.prototype.setData=function(e,t){var n=t.nick?t.nick:t.nickname,o=t.Icon?t.Icon:t.avatarUrl,a=t.City?t.City:t.KVDataList[0].value,i=t.value?t.value:t.KVDataList[1].value;this.lbCity.string=a,this.lbName.string=l.default.cutstr(n,10),this.lbScore.string=l.default.formatNumber(i)+"",this.setMedal(e),this.loadImg(this.sprHead,o)},e.prototype.setMedal=function(e){e<=3?(this.sprMedal.node.active=!0,this.sprMedal.spriteFrame=this.medalFrames[e-1],this.lbRank.node.active=!0,this.lbRank.string=""):(this.lbRank.node.active=!0,this.lbRank.string=e,this.sprMedal.node.active=!1)},e.prototype.setBgColor=function(e){e%=2,this.sprBg.node.color=0==e?cc.hexToColor("#1966EE"):cc.hexToColor("#5990F1")},e.prototype.loadImg=function(n,e){e&&""!=e&&cc.loader.load({url:e,type:"jpg"},function(e,t){n.spriteFrame=new cc.SpriteFrame(t)})},__decorate([i(cc.Sprite)],e.prototype,"sprBg",void 0),__decorate([i(cc.Sprite)],e.prototype,"sprMedal",void 0),__decorate([i(cc.Sprite)],e.prototype,"sprHead",void 0),__decorate([i(cc.Label)],e.prototype,"lbRank",void 0),__decorate([i(cc.Label)],e.prototype,"lbName",void 0),__decorate([i(cc.Label)],e.prototype,"lbCity",void 0),__decorate([i(cc.Label)],e.prototype,"lbScore",void 0),__decorate([i([cc.SpriteFrame])],e.prototype,"medalFrames",void 0),e=__decorate([a],e)}(cc.Component);n.default=c,cc._RF.pop()},{"../../Common/Util":"Util"}],RankingView:[function(e,t,n){"use strict";cc._RF.push(t,"ccb460UQXtHubIzenjgDSa0","RankingView"),Object.defineProperty(n,"__esModule",{value:!0});var r=e("./RankingCell"),o=e("../../Controller/GameCtr"),a=e("../../Controller/WXCtr"),i=e("../../Common/Http"),l=e("../../Common/UserManager"),c=e("../../Common/AudioManager"),s=cc._decorator,u=s.ccclass,d=s.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.ndRanking=null,e.sprFreindRankScroll=null,e.ndWorldScr=null,e.ndWorldContent=null,e.pfCell=null,e.friendToggle=null,e.worldToggle=null,e.ndAuthTip=null,e.btn_pageUp=null,e.btn_pageDown=null,e.btn_share=null,e.btn_joinRank=null,e.headImg=null,e.lb_name=null,e.lb_location=null,e.worldListData=[],e.friendListData=null,e.tex=null,e.isGetWorldList=!1,e.isGetFriendList=!1,e.curPageIndex=0,e.interval=0,e.isShowFrenidRank=!1,e}return __extends(e,t),e.prototype.onLoad=function(){o.default.getInstance().setRanking(this),this.btn_share.active=o.default.isAudited},e.prototype.start=function(){null!=window.wx&&(this.tex=new cc.Texture2D,window.sharedCanvas.width=900,window.sharedCanvas.height=1200),this.initRank(),this.initSelfInfo()},e.prototype.initRank=function(){this.friendToggle.isChecked?(this.curPageIndex=0,this.showFreindRanking()):this.worldToggle.isChecked&&(this.curPageIndex=0,this.showWorldRanking())},e.prototype.initSelfInfo=function(){if(l.default.user){this.loadImg(this.headImg,l.default.user.icon);var e=l.default.user.nick?l.default.user.nick:"游客",t=l.default.user.city?l.default.user.city:"未知";this.lb_name.string=e,this.lb_location.string=t}},e.prototype.back=function(){c.default.getInstance().playSound("audio/btnClose"),this.showAuthTip(!1),this.isGetFriendList=!1,this.node.parent.destroy()},e.prototype.showWorldRanking=function(){console.log("点击了世界排行榜"),this.curPageIndex=0,this.ndWorldScr.active=!0,this.sprFreindRankScroll.node.active=!1,a.default.authed?this.btn_joinRank.active=!1:(console.log("未授权，引导获取授权！！！"),this.btn_joinRank.active=!0),this.isGetWorldList||this.getWorldRankingData()},e.prototype.onBtnPageUp=function(){c.default.getInstance().playSound("audio/open_panel"),0!=this.curPageIndex&&(this.curPageIndex--,this.ndWorldScr.active&&this.showRanklist(this.ndWorldScr,this.worldListData,this.curPageIndex),this.sprFreindRankScroll.node.active&&(a.default.showFriendRanking(this.curPageIndex),this.scheduleOnce(function(){this.tex&&(this.tex.initWithElement(window.sharedCanvas),this.tex.handleLoadedTexture(),this.sprFreindRankScroll.spriteFrame=new cc.SpriteFrame(this.tex))},1)))},e.prototype.onBtnPageDown=function(){c.default.getInstance().playSound("audio/open_panel"),this.ndWorldScr.active&&7*(this.curPageIndex+1)>=this.worldListData.length||(this.curPageIndex++,this.ndWorldScr.active&&this.showRanklist(this.ndWorldScr,this.worldListData,this.curPageIndex),this.sprFreindRankScroll.node.active&&(a.default.showFriendRanking(this.curPageIndex),this.scheduleOnce(function(){this.tex&&(this.tex.initWithElement(window.sharedCanvas),this.tex.handleLoadedTexture(),this.sprFreindRankScroll.spriteFrame=new cc.SpriteFrame(this.tex))},1)))},e.prototype.onBtnJoinRank=function(){c.default.getInstance().playSound("audio/open_panel"),this.showAuthTip(!0)},e.prototype.onBtnShare=function(){c.default.getInstance().playSound("audio/open_panel"),a.default.share()},e.prototype.showRanklist=function(e,t,n){void 0===n&&(n=0),this.curPageIndex=n,e.removeAllChildren();for(var o=7*n,a=7*n+7>t.length?t.length:7*n+7,i=o;i<a;i++){var l=3<=i%7?-35:0,c=cc.instantiate(this.pfCell);e.addChild(c),c.x=2,c.y=530+i%7*-132+l,c.getComponent(r.default).setData(i+1,t[i])}},e.prototype.showAuthTip=function(e){void 0===e&&(e=!1),(this.ndAuthTip.active=e)?a.default.userInfoBtn.show():a.default.userInfoBtn.hide()},e.prototype.getWorldRankingData=function(){var t=this;i.default.send({url:i.default.UrlConfig.GET_RANK_LIST,success:function(e){console.log("getWorldList response == ",e),t.isGetWorldList=!0,t.setWorldList(e.data)},data:{uid:l.default.user_id,voucher:l.default.voucher}})},e.prototype.setWorldList=function(e){for(var t in e)this.worldListData.push(e[t]);this.showRanklist(this.ndWorldScr,this.worldListData,0)},e.prototype.setSelfWorldData=function(e,t){var n=this.ndWorldScr.getChildByName("SelfRanking");n.active=!0,n.getComponent(r.default).setData(e,t)},e.prototype.showFreindRanking=function(){this.curPageIndex=0,this.sprFreindRankScroll.node.active=!0,this.ndWorldScr.active=!1,this.showAuthTip(!1),this.isGetFriendList||(this.isGetFriendList=!0,a.default.showFriendRanking(this.curPageIndex)),this.isShowFrenidRank||(window.sharedCanvas.width=1080,window.sharedCanvas.height=1920,this.scheduleOnce(function(){this.tex&&(this.tex.initWithElement(window.sharedCanvas),this.tex.handleLoadedTexture(),this.sprFreindRankScroll.spriteFrame=new cc.SpriteFrame(this.tex))},1),this.isShowFrenidRank=!0)},e.prototype.loadImg=function(n,e){e&&""!=e&&cc.loader.load({url:e,type:"jpg"},function(e,t){n.spriteFrame=new cc.SpriteFrame(t)})},e.prototype.onCloseRank=function(){this.ndRanking.active=!1},__decorate([d(cc.Node)],e.prototype,"ndRanking",void 0),__decorate([d(cc.Sprite)],e.prototype,"sprFreindRankScroll",void 0),__decorate([d(cc.Node)],e.prototype,"ndWorldScr",void 0),__decorate([d(cc.Node)],e.prototype,"ndWorldContent",void 0),__decorate([d(cc.Prefab)],e.prototype,"pfCell",void 0),__decorate([d(cc.Toggle)],e.prototype,"friendToggle",void 0),__decorate([d(cc.Toggle)],e.prototype,"worldToggle",void 0),__decorate([d(cc.Node)],e.prototype,"ndAuthTip",void 0),__decorate([d(cc.Node)],e.prototype,"btn_pageUp",void 0),__decorate([d(cc.Node)],e.prototype,"btn_pageDown",void 0),__decorate([d(cc.Node)],e.prototype,"btn_share",void 0),__decorate([d(cc.Node)],e.prototype,"btn_joinRank",void 0),__decorate([d(cc.Sprite)],e.prototype,"headImg",void 0),__decorate([d(cc.Label)],e.prototype,"lb_name",void 0),__decorate([d(cc.Label)],e.prototype,"lb_location",void 0),e=__decorate([u],e)}(cc.Component);n.default=p,cc._RF.pop()},{"../../Common/AudioManager":"AudioManager","../../Common/Http":"Http","../../Common/UserManager":"UserManager","../../Controller/GameCtr":"GameCtr","../../Controller/WXCtr":"WXCtr","./RankingCell":"RankingCell"}],ToastView:[function(e,t,n){"use strict";cc._RF.push(t,"1a52bS/p5tF7oHdbdFrndcM","ToastView"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("./PopupView"),a=cc._decorator,i=a.ccclass,l=a.property,c=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.messageLabel=null,e._showTime=1.5,e}return __extends(e,t),e.prototype.onLoad=function(){t.prototype.onLoad.call(this)},e.prototype.setMessage=function(e){this.message=e||"提示",this.messageLabel.string=e},e.prototype.setFontSize=function(e){void 0===e&&(e=0),0<e&&(this.messageLabel.fontSize=e,this.messageLabel.lineHeight=e)},e.prototype.setTextColor=function(e){void 0===e&&(e=null),e&&(this.messageLabel.node.color=e)},e.prototype.show=function(e){t.prototype.show.call(this,e),this.unscheduleAllCallbacks(),this.schedule(this.delayDismiss.bind(this),this._showTime)},e.prototype.delayDismiss=function(){this.dismiss()},__decorate([l(cc.Label)],e.prototype,"messageLabel",void 0),e=__decorate([i],e)}(o.default);n.default=c,cc._RF.pop()},{"./PopupView":"PopupView"}],UrlConfig:[function(e,t,n){"use strict";cc._RF.push(t,"aa7e0ISVFNKh4mRZZ+qgLW/","UrlConfig"),Object.defineProperty(n,"__esModule",{value:!0});var o=cc._decorator,a=o.ccclass,i=(o.property,function(){function e(){}return e.rootUrl="https://fengshui.2-00.cn/api_game_mifeng",e.LOGIN="/publicapi.php?method=getuid",e.SET_USER_DATA="/publicapi.php?method=setUserData",e.DISPOSE_USER="publicapi.php?method=disposeUser",e.GET_USERINFO="/publicapi.php?method=getUserInfo",e.GET_SETTING="/weixinapi.php?method=getsetting",e.SETTLEMENT="/weixinapi.php?method=settlement",e.REVIVE="/weixinapi.php?method=revive",e.GAME_OVER_SHARE_SWITCH="/weixinapi.php?method=GameOverShareSwitch",e.GET_GOLD="/weixinapi.php?method=getGoldByShare",e.GET_SHARE="/weixinapi.php?method=getShare",e.SHARE_SWITCH="/weixinapi.php?method=shareSwitch",e.FRIEND_SWITCH="/weixinapi.php?method=friendSwitch",e.ADD_FRIEND="/weixinapi.php?method=addFriend",e.SHARE_FRIEND_RESULT="/weixinapi.php?method=friendResult",e.RECEIVE_PRIZE="/weixinapi.php?method=receivePrize",e.GET_RANDOM_USER="/weixinapi.php?method=getRandomUser",e.GET_ALL_SLIDES="/weixinapi.php?method=getAllSlides",e.REVIVECONFIG="/weixinapi.php?method=reviveConfig",e.CHANEL_RECORD="/weixinapi.php?method=addChannelRecord",e.ADConfig="/weixinapi.php?method=getAdv",e.VideoOpen="/weixinapi.php?method=openAdv",e.GET_WORLD_LIST="/weixinapi.php?method=getWorldList",e.SET_GOLD_DATA="/weixinapi.php?method=setData",e.GET_PROFIT="/weixinapi.php?method=getprofit",e.SET_FORMID="/weixinapi.php?method=setformId",e.INVITED_BY_FRIEND="/weixinapi.php?method=addSeek",e.SEEK_LOG="/weixinapi.php?method=SeekLog",e.SHARE_GROUP="/weixinapi.php?method=shareGroup",e.GET_RANK_LIST="/weixinapi.php?method=getRankList",e.MONEY_TOTICES="/weixinapi.php?method=moneynotices",e.GET_TODAY="/weixinapi.php?method=getToday",e.DO_TODAY="/weixinapi.php?method=doToday",e.OPEN_RED="/weixinapi.php?method=openRed",e.DO_EXCHANGE="/weixinapi.php?method=doexchange",e.OPEN_CLICK="/weixinapi.php?method=openClick",e.GET_CASH="/weixinapi.php?method=getCash",e.PUSH_MSG="/weixinapi.php?method=pushMsg",e=__decorate([a],e)}());n.default=i,cc._RF.pop()},{}],UserManager:[function(e,t,n){"use strict";cc._RF.push(t,"1c7810/IFZD5LG6YNJImyPA","UserManager"),Object.defineProperty(n,"__esModule",{value:!0});var o=cc._decorator,a=o.ccclass,i=(o.property,function(){function e(){}return t=e,Object.defineProperty(e,"user",{get:function(){return t._user},set:function(e){t._user=e},enumerable:!0,configurable:!0}),Object.defineProperty(e,"user_id",{get:function(){return null!=t._user_id?t._user_id:null},set:function(e){t._user_id=e},enumerable:!0,configurable:!0}),Object.defineProperty(e,"voucher",{get:function(){return t._voucher},set:function(e){t._voucher=e},enumerable:!0,configurable:!0}),e._user=null,e._user_id=null,e._voucher=null,e=t=__decorate([a],e);var t}());n.default=i,cc._RF.pop()},{}],Util:[function(e,t,n){"use strict";cc._RF.push(t,"2190bA9XapLCKNN06NNZmnm","Util"),Object.defineProperty(n,"__esModule",{value:!0});var o=cc._decorator,a=o.ccclass,i=(o.property,function(){function e(){}return(i=e).loadImg=function(n,e){cc.loader.load({url:e,type:"png"},function(e,t){n.spriteFrame=new cc.SpriteFrame(t)})},e.findChildByName=function(e,t){if(!e||!t||!t.children)return null;var n=t.getChildByName(e);if(n)return n;for(var o=t.children,a=0;a<o.length;a++)if(n=i.findChildByName(e,o[a]))return n;return null},e.setString=function(e,t){if("number"==typeof t&&(t+=""),t=t||"",e instanceof cc.Node){var n=e.getComponent(cc.Label);if(cc.isValid(n))return void(n.string=t);var o=e.getComponent(cc.EditBox);cc.isValid(o)&&(o.string=t)}else cc.isValid(e)&&(e.string=t)},e.cutstr=function(e,t){var n,o=0,a=new String;n=e.length;for(var i=0;i<n;i++){var l=e.charAt(i);if(o++,4<escape(l).length&&o++,a=a.concat(l),t<o)return a=a.concat("...")}return e},e.getCurrTimeYYMMDD=function(){var e=new Date;return e.getFullYear()+"-"+(e.getMonth()+1<10?"0"+(e.getMonth()+1):e.getMonth()+1)+"-"+(e.getDate()<10?"0"+e.getDate():e.getDate())},e.formatNumber=function(e){return e>Math.pow(10,33)?(e/Math.pow(10,33)).toFixed(1)+"gg":e>Math.pow(10,30)?(e/Math.pow(10,30)).toFixed(1)+"ff":e>Math.pow(10,27)?(e/Math.pow(10,27)).toFixed(1)+"ee":e>Math.pow(10,24)?(e/Math.pow(10,24)).toFixed(1)+"dd":e>Math.pow(10,21)?(e/Math.pow(10,21)).toFixed(1)+"cc":e>Math.pow(10,18)?(e/Math.pow(10,18)).toFixed(1)+"bb":e>Math.pow(10,15)?(e/Math.pow(10,15)).toFixed(1)+"aa":e>Math.pow(10,12)?(e/Math.pow(10,12)).toFixed(1)+"T":e>Math.pow(10,9)?(e/Math.pow(10,9)).toFixed(1)+"B":e>Math.pow(10,6)?(e/Math.pow(10,6)).toFixed(1)+"M":e>Math.pow(10,3)?(e/Math.pow(10,3)).toFixed(1)+"K":e},e=i=__decorate([a],e);var i}());n.default=i,cc._RF.pop()},{}],ViewManager:[function(e,t,n){"use strict";cc._RF.push(t,"6563a/+s49FAIpNK6zU9CmC","ViewManager"),Object.defineProperty(n,"__esModule",{value:!0});var x=e("../ui/view/PopupView"),o=e("../ui/view/PromptDialog"),l=e("../UI/view/ToastView"),a=cc._decorator,i=a.ccclass,c=a.property,r=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.popupView=null,e.promptDialog=null,e.toastView=null,e.popupViewList=new Array,e.popupViewMap={},e}return __extends(e,t),(L=e).prototype.onLoad=function(){L.mViewManager=this,cc.game.addPersistRootNode(this.node),cc.systemEvent.on(cc.SystemEvent.EventType.KEY_DOWN,this.onKeyDown,this)},e.prototype.onDestroy=function(){cc.systemEvent.off(cc.SystemEvent.EventType.KEY_DOWN,this.onKeyDown,this)},e.prototype.onKeyDown=function(e){if(e.keyCode==cc.KEY.back)for(;0<this.popupViewList.length;){var t=this.popupViewList.pop();if(this.removeFromMap(t),cc.isValid(t)){t.dismiss();break}}},e.prototype.onPopupDestroy=function(e){this.removeFromMap(e),this.removeFromArray(e)},e.prototype.show=function(e,t){void 0===t&&(t=null),cc.isValid(e)&&(e.closeOnKeyBack&&this.popupViewList.push(e),L.getPopupView(e.name)!=e&&L.dismiss(e.name),e.name&&(this.popupViewMap[e.name]=e),e.setOnDestroyCallback(this.onPopupDestroy.bind(this)),e.show(t||L.getRoot()))},e.prototype.removeFromMap=function(e){e&&e.name&&(this.popupViewMap[e.name]=null)},e.prototype.removeFromArray=function(e){if(e){var t=this.popupViewList.indexOf(e);0<=t&&this.popupViewList.splice(t,1)}},e.checkValid=function(){return!!L.mViewManager},e.show=function(e){var t=e.node,n=void 0===t?null:t,o=e.name,a=void 0===o?null:o,i=e.parent,l=void 0===i?null:i,c=e.localZOrder,r=void 0===c?0:c,s=(e.data,e.closeOnTouchOutside),u=void 0!==s&&s,d=e.closeOnKeyBack,p=void 0!==d&&d,h=e.mask,f=void 0===h||h,g=e.maskOpacity,_=void 0===g?200:g,m=e.transitionShow,v=void 0!==m&&m,y=e.transitionDismiss,b=void 0===y||y,C=e.showAction,w=void 0===C?null:C,N=e.showActionTarget,T=void 0===N?null:N,M=e.dismissAction,S=void 0===M?null:M,B=e.dismissActionTarget,I=void 0===B?null:B;if(cc.isValid(n)&&L.checkValid()&&cc.isValid(L.mViewManager.popupView)){var k=n.getComponent(x.default);if(k)k.contentNode=k.contentNode||k.node.getChildByName("ContentNode")||k.node;else(k=cc.instantiate(L.mViewManager.popupView).getComponent(x.default)).contentNode=n,k.contentNode.parent=k.node;return L.showPopup({popupView:k,name:a,parent:l,localZOrder:r,closeOnTouchOutside:u,closeOnKeyBack:p,mask:f,maskOpacity:_,transitionShow:v,transitionDismiss:b,showAction:w,showActionTarget:T,dismissAction:S,dismissActionTarget:I}),k}},e.showPopup=function(e){var t=e.popupView,n=void 0===t?null:t,o=e.name,a=void 0===o?null:o,i=e.parent,l=void 0===i?null:i,c=e.localZOrder,r=void 0===c?0:c,s=e.closeOnTouchOutside,u=void 0!==s&&s,d=e.closeOnKeyBack,p=void 0!==d&&d,h=e.mask,f=void 0===h||h,g=e.maskOpacity,_=void 0===g?200:g,m=e.transitionShow,v=void 0!==m&&m,y=e.transitionDismiss,b=void 0===y||y,C=e.showAction,w=void 0===C?null:C,N=e.showActionTarget,T=void 0===N?null:N,M=e.dismissAction,S=void 0===M?null:M,B=e.dismissActionTarget,I=void 0===B?null:B;L.checkValid()&&cc.isValid(n)&&(u&&(f=!0),n.setMask(f,_),T=T||n.contentNode,v&&cc.isValid(T)&&(w=w||cc.sequence(cc.callFunc(function(){T.scale=0}),cc.scaleTo(.1,1,1).easing(cc.easeOut(3)))),n.setShowAction(w,T),I=I||n.contentNode,b&&(S=S||null),n.setDismissAction(S,I),n.closeOnTouchOutside=u,n.closeOnKeyBack=p,n.name=a||n.name,n.localZOrder=r||0,L.mViewManager.show(n,l))},e.dismissPopup=function(e){e&&(cc.isValid(e)&&e.dismiss(),L.checkValid()&&(L.mViewManager.removeFromMap(e),L.mViewManager.removeFromArray(e)))},e.dismiss=function(e){if(e&&L.checkValid()){var t=L.mViewManager.popupViewMap[e];cc.isValid(t)&&t.dismiss(),L.mViewManager.popupViewMap[e]=null,L.mViewManager.removeFromMap(t),L.mViewManager.removeFromArray(t)}},e.isShow=function(e){return!!e&&(!!L.checkValid()&&cc.isValid(L.mViewManager.popupViewMap[e]))},e.getPopupView=function(e){return e&&L.checkValid()?cc.isValid(L.mViewManager.popupViewMap[e])?L.mViewManager.popupViewMap[e]:(L.mViewManager.popupViewMap[e]&&(L.mViewManager.popupViewMap[e]=null),null):null},e.createDialog=function(e){if(L.checkValid());},e.showPromptDialog=function(e){if(L.checkValid()){var t=cc.instantiate(L.mViewManager.promptDialog);t.getComponent(o.default).setData(e),L.show({node:t,name:e.name||L.View.PromptDialog,localZOrder:L.LocalZOrder.PromptDialog,mask:!0,maskOpacity:200,transitionShow:!0})}},e.toast=function(e,t,n){if(void 0===t&&(t=cc.color(255,255,255)),void 0===n&&(n=0),L.checkValid()){var o,a,i=L.getPopupView(L.View.ToastView);i instanceof l.default?(o=i.node,a=i):a=(o=cc.instantiate(L.mViewManager.toastView)).getComponent(l.default),a.setMessage(e),a.setFontSize(n),a.setTextColor(t),L.show({node:o,name:L.View.ToastView,localZOrder:L.LocalZOrder.Toast,mask:!1,transitionDismiss:!1})}},e.getRoot=function(){return cc.director.getScene().getChildByName("Canvas")},e.LocalZOrder={PromptDialog:1e3,Loading:1001,Toast:1002},e.View={PromptDialog:"PromptDialog",ToastView:"ToastView"},__decorate([c(cc.Prefab)],e.prototype,"popupView",void 0),__decorate([c(cc.Prefab)],e.prototype,"promptDialog",void 0),__decorate([c(cc.Prefab)],e.prototype,"toastView",void 0),e=L=__decorate([i],e);var L}(cc.Component);n.default=r,cc._RF.pop()},{"../UI/view/ToastView":"ToastView","../ui/view/PopupView":"PopupView","../ui/view/PromptDialog":"PromptDialog"}],WXCtr:[function(e,t,n){"use strict";cc._RF.push(t,"e659baZaMVDzKDI5WvkuwsU","WXCtr"),Object.defineProperty(n,"__esModule",{value:!0});var o,a,i=e("../Common/Http"),c=e("../Common/UserManager"),r=e("./HttpCtr"),s=e("./GameCtr"),u=e("../Common/Util"),l=cc._decorator,d=l.ccclass;l.property;(a=o||(o={}))[a.Get_SelfData=0]="Get_SelfData",a[a.Get_FriendData=1]="Get_FriendData",a[a.Get_GroupData=2]="Get_GroupData",a[a.Submit_SelfScore=3]="Submit_SelfScore",a[a.Compare_Score=4]="Compare_Score",a[a.Show_WholeRanking=5]="Show_WholeRanking",a[a.Show_OverRanking=6]="Show_OverRanking",a[a.Close_WholeRanking=7]="Close_WholeRanking",a[a.Close_OverRanking=8]="Close_OverRanking";var p=375,h=667,f=function(){function e(){null==l.videoAdCallback&&(l.videoAdCallback=function(e){l.onCloseVideo(e)})}return(l=e).getLaunchOptionsSync=function(){null!=window.wx&&(l.launchOption=window.wx.getLaunchOptionsSync(),console.log("获取启动参数",l.launchOption),wx.getFileSystemManager().getSavedFileList({success:function(e){console.log("获取本地缓存文件列表成功",e)}}))},e.getSystemInfo=function(){null!=window.wx&&wx.getSystemInfo({success:function(e){console.log("获取设备信息成功",e),l.screenWidth=e.screenWidth,l.screenHeight=e.screenHeight,l.widthRatio=l.screenWidth/p,l.heightRatio=l.screenHeight/h}})},e.exitGame=function(){null!=window.wx&&wx.exitMiniProgram()},e.getAuthSetting=function(){null!=window.wx&&wx.getSetting({success:function(e){var t=e.authSetting;!0===t["scope.userInfo"]?l.authed=!0:(t["scope.userInfo"],l.authed=!1)}})},e.createUserInfoBtn=function(){var t,n,o,a;null!=window.wx&&(wx.getSystemInfo({success:function(e){l.Height=e.windowHeight,console.log("获取设备信息成功",e),t=e.screenWidth,n=e.screenHeight,o=t/p,a=n/h}}),l.userInfoBtn=wx.createUserInfoButton({type:"image",image:"res/raw-assets/resources/textures/rank/authBtn.png",style:{left:t/2-80,top:n/2-40+50*a,width:160*o,height:40*a}}),l.userInfoBtn.hide(),l.userInfoBtn.onTap(function(e){console.log("UserInfoBtn tap",e),e.userInfo&&(s.default.getInstance().getRanking().showAuthTip(!1),l.wxOnLogin(e.userInfo,!0))}))},e.wxOnLogin=function(e,t){void 0===e&&(e=null),void 0===t&&(t=!1),null!=window.wx&&(e&&(l.wxLoginSuccess=!0),window.wx.login({success:function(e){console.log("微信登录返回值res",e),r.default.login(e.code,t),l.getUserInfo(),l.getSelfData(),l.getShareConfig(),r.default.getAdConfig()}}))},e.getUserInfo=function(){window.wx.getUserInfo({openIdList:["selfOpenId"],withCredentials:!0,lang:"zh_CN",success:function(e){var t=e.userInfo;t.avatarUrl,t.city,t.country,t.gender,t.language,t.nickName,t.openId,t.province;s.default.getInstance().saveSelfInfoToLocal(e.userInfo),l.wxLoginSuccess=!0,l.authed=!0,r.default.saveUserInfo(e)},fail:function(e){console.log("获取自己信息失败",e)}})},e.getShareConfig=function(){i.default.send({url:i.default.UrlConfig.GET_SHARE,success:function(e){console.log("获取分享配置信息",e),l.shareTitle=e.data.share_title,l.shareImg=e.data.share_img,wx.onShareAppMessage(function(){return{title:l.shareTitle,imageUrl:l.shareImg}})},data:{share_type:"index"}})},e.getReviveData=function(){i.default.send({url:i.default.UrlConfig.REVIVECONFIG,success:function(e){console.log("获取复活配置信息",e),s.default.reviveData=e.data}})},e.showShareMenu=function(){null!=window.wx&&(console.log("显示分享按钮！！！！！！"),window.wx.showShareMenu({withShareTicket:!0,success:function(e){},fail:function(e){},complete:function(e){}}))},e.setShareAppMessage=function(){null!=window.wx&&wx.onShareAppMessage(function(){return{title:l.shareTitle,imageUrl:l.shareImg}})},e.onShow=function(t){if(void 0===t&&(t=null),console.log("监听小游戏回到前台的事件"),null!=window.wx){var e=function(e){t&&t()};window.wx.onShow(e),l.onShowCall=e}},e.offShow=function(){null!=window.wx&&(console.log("取消监听小游戏回到前台的事件"),window.wx.offShow(l.onShowCall))},e.previewImg=function(e){null!=window.wx&&wx.previewImage({urls:[e],success:function(e){console.log("预览图片成功回调",e)}})},e.showBannerAd=function(){cc.isValid(l.bannerAd)&&l.bannerAd&&l.bannerAd.show()},e.hideBannerAd=function(){cc.isValid(l.bannerAd)&&l.bannerAd&&l.bannerAd.hide()},e.setBannerAd=function(e,t){if(void 0===e&&(e=null),void 0===t&&(t=null),null!=window.wx&&wx.createBannerAd){l.bannerAd&&l.bannerAd.destroy&&l.bannerAd.destroy();var n=140;e&&(n=e);var o=375,a=0;if(t){var i=(o=t)*l.widthRatio;i=i<300?300:i,a=(l.screenWidth-i)/2}l.bannerAd=wx.createBannerAd({adUnitId:"adunit-4d43fbf2baf8747c",style:{left:a,top:l.screenHeight-n*l.heightRatio,width:o*l.widthRatio}}),l.bannerAd.show(),l.bannerAd.onError(function(){})}},e.share=function(t){var e="";t&&t.invite&&(e="invite="),t&&t.Challenge&&(e="Challenge="),null!=window.wx&&window.wx.shareAppMessage({title:l.shareTitle,imageUrl:l.shareImg,query:e+c.default.user_id,success:function(e){s.default.setting.share?null!=e.shareTickets&&0<e.shareTickets.length?(console.log("shareTickets == ",e.shareTickets),l.getWxShareInfo(e.shareTickets[0],t.callback)):s.default.getInstance().getGame().showToast("请分享到群！"):t.callback&&t.callback()},complete:function(){}})},e.getWxShareInfo=function(e,t){null!=window.wx&&window.wx.getShareInfo({shareTicket:e,success:function(e){console.log("获取分享信息成功！！！",e),r.default.shareGroupCheck(e.encryptedData,e.iv,t)}})},e.showToast=function(t){null!=window.wx&&window.wx.showToast({title:t,duration:2,fail:function(e){l.showToast(t)},success:function(e){}})},e.getStorageData=function(e,t){void 0===t&&(t=null),null!=window.wx&&wx.getStorage({key:e,success:function(e){t&&t(e.data)},fail:function(e){t&&t(null)}})},e.setStorageData=function(e,t){null!=window.wx&&wx.setStorage({key:e,data:t,success:function(e){}})},e.gotoOther=function(e){console.log("data = ",e),e.appid&&wx.navigateToMiniProgram({appId:e.appid,path:e.path,success:function(e){console.log("打开成功")},fail:function(e){wx.showToast({title:"打开失败!",icon:"none"})}})},e.customService=function(){wx.openCustomerServiceConversation({success:function(){l.exitGame()}})},e.setVideoAd=function(){null!=window.wx&&wx.createRewardedVideoAd&&(l.videoAd=wx.createRewardedVideoAd({adUnitId:"adunit-cf448a58c6f5d542"}),l.videoAd.onLoad(function(){}),l.videoAd.load(),l.videoAd.onError(function(e){l.videoAd=null,console.log(e)}))},e.showVideoAd=function(){l.videoAd&&(l.videoAd.show(),s.default.vedioTimes--,console.log("今天剩余观看视频次数为：",s.default.vedioTimes),localStorage.setItem("VideoTimes",JSON.stringify({day:u.default.getCurrTimeYYMMDD(),times:s.default.vedioTimes})),s.default.getInstance().getGame().setVedioCD())},e.onCloseVideo=function(t){var e=function(e){e&&e.isEnded||void 0===e?(t(!0),r.default.videoCheck(l.launchOption.query)):t(!1)};l.videoAd&&l.videoAd.onClose(e),l.videoAdCallback=e},e.offCloseVideo=function(){l.videoAdCallback&&(l.videoAd&&l.videoAd.offClose(l.videoAdCallback),l.videoAdCallback=null)},e.initSharedCanvas=function(){null!=window.wx&&(window.sharedCanvas.width=880,window.sharedCanvas.height=1e3)},e.getSelfData=function(){null!=window.wx&&window.wx.postMessage({messageType:o.Get_SelfData})},e.getGroupRankingData=function(){console.log("获取群数据！！！！！！"),null!=window.wx&&window.wx.shareAppMessage({title:l.shareTitle,imageUrl:l.shareImg,success:function(e){console.log("分享成功回调返回值",e),null!=e.shareTickets&&0<e.shareTickets.length&&window.wx.postMessage({messageType:o.Get_GroupData,SCORE_KEY:"Rank_SCORE",LOCATION_KEY:"LOACTION",shareTicket:e.shareTickets[0]})}})},e.getFriendRankingData=function(){null!=window.wx&&window.wx.postMessage({messageType:o.Get_FriendData,LIST_KEY:"Rank_Data"})},e.showOverRanking=function(){null!=window.wx&&(console.log("主域发送消息____显示结束好友排行"),window.wx.postMessage({messageType:o.Show_OverRanking}))},e.showFriendRanking=function(e){null!=window.wx&&(console.log("主域发送消息____显示好友排行"),window.wx.postMessage({messageType:o.Show_WholeRanking,pageIndex:e}))},e.closeFriendRanking=function(){null!=window.wx&&(console.log("主域发送消息____关闭好友排行"),window.wx.postMessage({messageType:o.Close_WholeRanking}))},e.submitScoreToWx=function(e){null!=window.wx&&(console.log("主域发送消息____提交分数"),window.wx.postMessage({messageType:o.Submit_SelfScore,LIST_KEY:"Rank_Data",score:e}))},e.submitScoreToWxComparetFriend=function(e){null!=window.wx&&(console.log("主域发送消息____提交分数"),window.wx.postMessage({messageType:o.Compare_Score,LIST_KEY:"Rank_Data",score:e}))},e.wxLoginSuccess=!1,e.onShowCall=null,e.videoAd=null,e.videoAdCallback=null,e.bannerAd=null,e.bannerId=null,e.authed=!1,e.outvideoAdCallback=null,e=l=__decorate([d],e);var l}();n.default=f,cc._RF.pop()},{"../Common/Http":"Http","../Common/UserManager":"UserManager","../Common/Util":"Util","./GameCtr":"GameCtr","./HttpCtr":"HttpCtr"}],ad:[function(e,t,n){"use strict";cc._RF.push(t,"aede1AJKXxKY7Ot4z8YYugy","ad"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../Controller/GameCtr"),a=e("../../Controller/WXCtr"),i=e("../../Controller/HttpCtr"),l=cc._decorator,c=l.ccclass,r=(l.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._adSprite=null,e._adName=null,e}return __extends(e,t),e.prototype.onLoad=function(){this._adSprite=this.node.getChildByName("sp"),this._adName=this.node.getChildByName("name")},e.prototype.init=function(e){var t=this._adSprite.getComponent(cc.Sprite);o.default.loadImg(t,e.img);var n={appid:e.appid,path:e.path};this._adSprite.on(cc.Node.EventType.TOUCH_START,function(){a.default.gotoOther(n),i.default.openClick(null,e.appid)}),this._adName.getComponent(cc.Label).string=e.title},e.prototype.doShake=function(){this.node.runAction(cc.repeatForever(cc.sequence(cc.rotateBy(.1,-10),cc.rotateBy(.2,20),cc.rotateBy(.1,-10),cc.rotateBy(.05,-10),cc.rotateBy(.1,20),cc.rotateBy(.05,-10),cc.delayTime(2))))},e.prototype.doScale=function(){this.node.runAction(cc.repeatForever(cc.sequence(cc.scaleTo(.3,1.1),cc.scaleTo(.3,1),cc.scaleTo(.3,1.1),cc.scaleTo(.3,1),cc.delayTime(2))))},e.prototype.stopActions=function(){this.node.stopAllActions()},e=__decorate([c],e)}(cc.Component));n.default=r,cc._RF.pop()},{"../../Controller/GameCtr":"GameCtr","../../Controller/HttpCtr":"HttpCtr","../../Controller/WXCtr":"WXCtr"}],award:[function(e,t,n){"use strict";cc._RF.push(t,"e825eK36zpNLZPA0J3dYF6G","award"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../Common/AudioManager"),l=e("../../Controller/GameCtr"),i=e("../../Common/Util"),a=cc._decorator,c=a.ccclass,r=(a.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._btn_getAward=null,e._lb_des=null,e._award=null,e._light=null,e._starNode=null,e._awarData=null,e}return __extends(e,t),e.prototype.onLoad=function(){this.initNode(),this.initStarAction()},e.prototype.initNode=function(){this._btn_getAward=this.node.getChildByName("btn_get"),this._lb_des=this.node.getChildByName("lb_des"),this._award=this.node.getChildByName("award"),this._light=this.node.getChildByName("light"),this._starNode=this.node.getChildByName("starNode"),this.initBtnEvent(this._btn_getAward)},e.prototype.initBtnEvent=function(e){var t=this;e.on(cc.Node.EventType.TOUCH_END,function(e){"btn_get"==e.target.getName()&&(o.default.getInstance().playSound("audio/btnClose"),t.getAward(),t.node.destroy(),t.node.parent.destroy())})},e.prototype.initStarAction=function(){this._starNode.children[0].runAction(cc.repeatForever(cc.sequence(cc.scaleTo(1,1.2),cc.scaleTo(1.5,.4)))),this._starNode.children[1].runAction(cc.repeatForever(cc.sequence(cc.scaleTo(1,.4),cc.scaleTo(1.5,1)))),this._starNode.children[2].runAction(cc.repeatForever(cc.sequence(cc.scaleTo(1,.8),cc.scaleTo(1.5,1)))),this._starNode.children[3].runAction(cc.repeatForever(cc.sequence(cc.scaleTo(1,1.1),cc.scaleTo(1.5,.7)))),this._starNode.children[4].runAction(cc.repeatForever(cc.sequence(cc.scaleTo(1,.3),cc.scaleTo(1.5,.9))))},e.prototype.showAward=function(o){var a=this;this._awarData=o,cc.loader.loadRes("textures/game1/award_"+(o.id-1),cc.SpriteFrame,function(e,t){if(a._award.getComponent(cc.Sprite).spriteFrame=t,a._lb_des.getComponent(cc.Label).string=o.des,o.gold){a._lb_des.getComponent(cc.Label).string=o.des;var n=a.getIncomeSpeed();a._lb_des.getComponent(cc.Label).string=i.default.formatNumber(Math.floor(n*o.gold*60))+"金币"}})},e.prototype.getAward=function(){var e=this._awarData.gold,t=(this._awarData.realMoney,this._awarData.speedup),n=this._awarData.doubleIncome;if(e){var o=this.getIncomeSpeed();l.default.money+=Math.floor(o*e*60),l.default.rich+=Math.floor(o*e*60)}if(t){l.default.globalSpeedRate=2,l.default.getInstance().getManufacture().resetLineAction();var a=l.default.getInstance().getGame().getCurSpeedUpTime(),i=0<a?60*t+a:60*t;l.default.getInstance().getGame().startSpeedUpTimer(i),l.default.getInstance().getGame().stopUpSpeedAction()}n&&(l.default.incomeRate=2,l.default.getInstance().getManufacture().startDoubleTimer(60*t),l.default.getInstance().getManufacture().disableDoubleIncome())},e.prototype.getIncomeSpeed=function(){for(var e=JSON.parse(l.default.getInstance().getCombsUnlock()),t=l.default.manufactureConfig[l.default.ManufactureLevel-1].perBonus/(l.default.manufactureConfig[l.default.ManufactureLevel-1].productTime+l.default.manufactureConfig[l.default.ManufactureLevel-1].transferTime),n=0,o=0;o<l.default.comblevel;o++)n+=(l.default.combConfig[o].initialIncome+l.default.combConfig[o].incomeMatrix*(e[o].level-1)*e[o].level)/(2*l.default.combConfig[o].baseSpeed);return t<=n?t:n},e=__decorate([c],e)}(cc.Component));n.default=r,cc._RF.pop()},{"../../Common/AudioManager":"AudioManager","../../Common/Util":"Util","../../Controller/GameCtr":"GameCtr"}],bubbleMoney:[function(e,t,n){"use strict";cc._RF.push(t,"05d679GjZhA36ojonrE6hi4","bubbleMoney"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../Common/Util"),a=cc._decorator,i=a.ccclass,l=(a.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.onLoad=function(){this.node.active=!0},t.prototype.setMoney=function(e){this.node.getComponent(cc.Label).string="+$"+o.default.formatNumber(e)},t=__decorate([i],t)}(cc.Component));n.default=l,cc._RF.pop()},{"../../Common/Util":"Util"}],combUpgrade:[function(e,t,n){"use strict";cc._RF.push(t,"40cb7pLa8JN2axI5Uo8PUBD","combUpgrade"),Object.defineProperty(n,"__esModule",{value:!0});var o=cc._decorator,a=o.ccclass,i=(o.property,e("../../Common/AudioManager")),l=e("../../Controller/GameCtr"),c=e("../../Common/Util"),r=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._lb_des=null,e._btn_close=null,e._btn_upgrade=null,e._lb_cost=null,e._level=null,e._unlockNum=null,e}return __extends(e,t),e.prototype.onLoad=function(){this.initNode()},e.prototype.initNode=function(){this._lb_des=this.node.getChildByName("lb_des"),this._btn_close=this.node.getChildByName("btn_close"),this.initBtnEvent(this._btn_close)},e.prototype.init=function(e,t){this._level=e,this._unlockNum=t,this._lb_des.getComponent(cc.Label).string=this._unlockNum+1,this._unlockNum>=l.default.maxPerCombLevel&&(this._lb_des.getComponent(cc.Label).string=this._unlockNum),this.showCells(),this.showSpeed(),this.showhoneyProduction(),this.showUpgrade(),this.updateBtnState(),this.initBtnEvent(this._btn_upgrade)},e.prototype.showCells=function(){var e=this.node.getChildByName("cells"),t=e.getChildByName("lb_value"),n=e.getChildByName("lb_add");t.getComponent(cc.Label).string=""+this._unlockNum,n.getComponent(cc.Label).string="+1"},e.prototype.showSpeed=function(){var e=this.node.getChildByName("speed"),t=e.getChildByName("lb_value"),n=e.getChildByName("lb_add");t.getComponent(cc.Label).string=100+this._unlockNum+"%",n.getComponent(cc.Label).string="+"+100*l.default.combConfig[this._level-1].speedMatrix+"%"},e.prototype.showhoneyProduction=function(){var e=this.node.getChildByName("honeyProduction"),t=e.getChildByName("lb_value"),n=e.getChildByName("lb_add");t.getComponent(cc.Label).string=""+c.default.formatNumber(l.default.combConfig[this._level-1].initialIncome+l.default.combConfig[this._level-1].incomeMatrix*(this._unlockNum-1)),n.getComponent(cc.Label).string="+"+c.default.formatNumber(l.default.combConfig[this._level-1].incomeMatrix)},e.prototype.showUpgrade=function(){var e=this.node.getChildByName("upgrade");this._btn_upgrade=e.getChildByName("btn_upgrade"),this._lb_cost=this._btn_upgrade.getChildByName("lb_cost"),this._lb_cost.getComponent(cc.Label).string="$"+c.default.formatNumber(l.default.combConfig[this._level-1].levelUpCost+l.default.combConfig[this._level-1].upMatrix*(this._unlockNum-1))},e.prototype.initBtnEvent=function(e){var o=this;e.on(cc.Node.EventType.TOUCH_END,function(e){if("btn_close"==e.target.getName())o.node.destroy(),l.default.getInstance().getGame().setMaskVisit(!1),l.default.getInstance().getGame().clearCombUpGrade(),i.default.getInstance().playSound("audio/btnClose");else if("btn_upgrade"==e.target.getName()){if(o._unlockNum<l.default.maxPerCombLevel&&l.default.money<l.default.combConfig[o._level-1].levelUpCost+l.default.combConfig[o._level-1].upMatrix*(o._unlockNum-1))return void l.default.getInstance().getGame().showGoldNotEnough();if(!o._btn_upgrade.getComponent(cc.Button).interactable)return;if(i.default.getInstance().playSound("audio/levelup"),l.default.getInstance().getGame().getComb(o._level).getComponent("honeycomb").upgrade(),o._unlockNum++,o._lb_des.getComponent(cc.Label).string=o._unlockNum+1,o._unlockNum==l.default.maxPerCombLevel){o._btn_upgrade.getComponent(cc.Button).interactable=!1;var t=o._btn_upgrade.getChildByName("lb_cost"),n=o._btn_upgrade.getChildByName("word_levelFull");return t.active=!1,void(n.active=!0)}o.showCells(),o.showSpeed(),o.showhoneyProduction(),o.showUpgrade(),o.updateBtnState()}})},e.prototype.updateBtnState=function(){if(l.default.money<l.default.combConfig[this._level-1].levelUpCost+l.default.combConfig[this._level-1].upMatrix*(this._unlockNum-1)?this._btn_upgrade.getComponent(cc.Button).interactable=!1:this._btn_upgrade.getComponent(cc.Button).interactable=!0,this._unlockNum>=l.default.maxPerCombLevel){this._btn_upgrade.getComponent(cc.Button).interactable=!1;var e=this._btn_upgrade.getChildByName("lb_cost"),t=this._btn_upgrade.getChildByName("word_levelFull");e.active=!1,t.active=!0}},e.prototype.doUpdate=function(){this._btn_upgrade.getComponent(cc.Button).interactable||this._unlockNum>=l.default.maxPerCombLevel||this.updateBtnState()},e=__decorate([a],e)}(cc.Component);n.default=r,cc._RF.pop()},{"../../Common/AudioManager":"AudioManager","../../Common/Util":"Util","../../Controller/GameCtr":"GameCtr"}],eft_honey:[function(e,t,n){"use strict";cc._RF.push(t,"c0ef1c0uxNHpYalCG2KuUPj","eft_honey"),Object.defineProperty(n,"__esModule",{value:!0});var o=cc._decorator,a=o.ccclass,i=(o.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._aniNode=null,e._ani=null,e._gold=null,e._honey=null,e}return __extends(e,t),e.prototype.onLoad=function(){this._aniNode=this.node.getChildByName("eft"),this._gold=this.node.getChildByName("gold"),this._honey=this.node.getChildByName("honey"),this._aniNode.active=!1,this._gold.active=!1,this._honey.active=!1,this._gold.scale=.5,this._ani=this._aniNode.getComponent(cc.Animation),this._ani.on("finished",this.onFinish.bind(this))},e.prototype.play=function(){this.bubbleGold(),this._aniNode.active=!0,this._ani.play()},e.prototype.onFinish=function(){this._aniNode.active=!1},e.prototype.bubbleGold=function(){this._gold.active=!0,this._gold.runAction(cc.sequence(cc.moveBy(.7,cc.p(0,70)),cc.delayTime(.3),cc.callFunc(function(){this._gold.active=!1,this._gold.y-=70}.bind(this))))},e=__decorate([a],e)}(cc.Component));n.default=i,cc._RF.pop()},{}],exchange1:[function(e,t,n){"use strict";cc._RF.push(t,"d5c16a9v2lI0r79PPg31ZGc","exchange1"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../Common/AudioManager"),a=e("../../Controller/GameCtr"),i=cc._decorator,l=i.ccclass,c=i.property,r=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._btn_close=null,e._btn_exchange=null,e._btn_exchangeRecord=null,e._lb_money=null,e.exchange2=null,e.exchangeRecord=null,e}return __extends(e,t),e.prototype.onLoad=function(){this.initNode()},e.prototype.initNode=function(){this._btn_close=this.node.getChildByName("btn_close"),this._btn_exchange=this.node.getChildByName("btn_exchange"),this._btn_exchangeRecord=this.node.getChildByName("btn_exchangeRecord"),this._lb_money=this.node.getChildByName("lb_surplusMoney"),this._lb_money.getComponent(cc.Label).string="￥"+(a.default.realMoney/100).toFixed(2),this.initBtnEvent(this._btn_close),this.initBtnEvent(this._btn_exchange),this.initBtnEvent(this._btn_exchangeRecord)},e.prototype.initBtnEvent=function(e){var t=this;e.on(cc.Node.EventType.TOUCH_END,function(e){if("btn_close"==e.target.getName())t.node.destroy(),o.default.getInstance().playSound("audio/btnClose");else if("btn_exchange"==e.target.getName()){if(o.default.getInstance().playSound("audio/open_panel"),console.log("log----------GameCtr.realMoney=:",a.default.realMoney),a.default.realMoney<1e3)return void a.default.getInstance().getGame().showToast("金额不足10元,无法兑换");if(t.node.getChildByName("exchange2"))return;cc.instantiate(t.exchange2).parent=t.node}else if("btn_exchangeRecord"==e.target.getName()){if(o.default.getInstance().playSound("audio/open_panel"),t.node.getChildByName("exchangeRecord"))return;cc.instantiate(t.exchangeRecord).parent=t.node}})},e.prototype.setRealyMoney=function(){this._lb_money.getComponent(cc.Label).string="￥"+(a.default.realMoney/100).toFixed(2)},__decorate([c(cc.Prefab)],e.prototype,"exchange2",void 0),__decorate([c(cc.Prefab)],e.prototype,"exchangeRecord",void 0),e=__decorate([l],e)}(cc.Component);n.default=r,cc._RF.pop()},{"../../Common/AudioManager":"AudioManager","../../Controller/GameCtr":"GameCtr"}],exchange2:[function(e,t,n){"use strict";cc._RF.push(t,"89904K3bHtPI4+yM8KqANYe","exchange2"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../Common/AudioManager"),a=e("../../Controller/GameCtr"),i=e("../../Controller/HttpCtr"),l=cc._decorator,c=l.ccclass,r=(l.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._btn_close=null,e._btn_exchange=null,e._lb_money=null,e._editeBox_phoneNum=null,e}return __extends(e,t),e.prototype.onLoad=function(){this.initNode()},e.prototype.initNode=function(){this._btn_close=this.node.getChildByName("btn_close"),this._btn_exchange=this.node.getChildByName("btn_exchange"),this._lb_money=this.node.getChildByName("lb_surplusMoney"),this._editeBox_phoneNum=this.node.getChildByName("phoneNumber"),this._lb_money.getComponent(cc.Label).string="￥"+(a.default.realMoney/100).toFixed(2),this.initBtnEvent(this._btn_close),this.initBtnEvent(this._btn_exchange)},e.prototype.initBtnEvent=function(e){var t=this;e.on(cc.Node.EventType.TOUCH_END,function(e){"btn_close"==e.target.getName()?(t.node.destroy(),o.default.getInstance().playSound("audio/btnClose")):"btn_exchange"==e.target.getName()&&(o.default.getInstance().playSound("audio/open_panel"),t.requestExchange(t._editeBox_phoneNum.getComponent(cc.EditBox).string))})},e.prototype.isPhoneNum=function(e){if(!/^\d{11}$/i.test(e))return"电话号码不合法"},e.prototype.requestExchange=function(e){this.isPhoneNum(e)?a.default.getInstance().getGame().showToast("你的电话号码不合法"):i.default.doExchange(e)},e.prototype.setRealMoney=function(){this._lb_money.getComponent(cc.Label).string="￥"+(a.default.realMoney/100).toFixed(2)},e=__decorate([c],e)}(cc.Component));n.default=r,cc._RF.pop()},{"../../Common/AudioManager":"AudioManager","../../Controller/GameCtr":"GameCtr","../../Controller/HttpCtr":"HttpCtr"}],exchangeRecord:[function(e,t,n){"use strict";cc._RF.push(t,"55bf0TnyxRPIay2+X13X3OE","exchangeRecord"),Object.defineProperty(n,"__esModule",{value:!0});var o=cc._decorator,a=o.ccclass,i=(o.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._btn_close=null,e._recordNodes=[],e}return __extends(e,t),e.prototype.onLoad=function(){var t=this;this._btn_close=this.node.getChildByName("btn_close"),this._btn_close.on(cc.Node.EventType.TOUCH_END,function(e){t.node.destroy()}),this.initRecordNode(),this.showRecords(null)},e.prototype.initRecordNode=function(){for(var e=this.node.getChildByName("recordNode"),t=0;t<5;t++){var n=e.getChildByName("user"+(t+1)),o=e.getChildByName("time"+(t+1)),a=e.getChildByName("phoneNumber"+(t+1));n.active=!1,o.active=!1,a.active=!1,n.getComponent(cc.Label).string="",o.getComponent(cc.Label).string="",a.getComponent(cc.Label).string="",this._recordNodes.push({_user:n,_time:o,_phoneNumber:a})}},e.prototype.showRecords=function(e){(e=[]).push({user:"kankan",time:"2.02456464",phoneNumber:"1253649565"});for(var t=0;t<e.length;t++)this._recordNodes[t]._user.active=!0,this._recordNodes[t]._time.active=!0,this._recordNodes[t]._phoneNumber.active=!0,this._recordNodes[t]._user.getComponent(cc.Label).string=e[t].user,this._recordNodes[t]._time.getComponent(cc.Label).string=e[t].time,this._recordNodes[t]._phoneNumber.getComponent(cc.Label).string=e[t].phoneNumber},e=__decorate([a],e)}(cc.Component));n.default=i,cc._RF.pop()},{}],getRedPackage:[function(e,t,n){"use strict";cc._RF.push(t,"2f254/KMeJHZ6SVLhQys+9r","getRedPackage"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../Common/AudioManager"),a=e("../../Controller/GameCtr"),i=e("../../Controller/WXCtr"),l=cc._decorator,c=l.ccclass,r=(l.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._btn_close=null,e._btn_storage=null,e._lb_value=null,e._lb_surplusMoney=null,e._shareGet=!1,e._shareGetMoney=0,e}return __extends(e,t),e.prototype.onLoad=function(){this.initNode()},e.prototype.initNode=function(){this._btn_close=this.node.getChildByName("btn_close"),this._btn_storage=this.node.getChildByName("btn_storage"),this._lb_value=this.node.getChildByName("lb_value"),this._lb_surplusMoney=this.node.getChildByName("lb_surplusMoney"),this.initBtnEvent(this._btn_close),this.initBtnEvent(this._btn_storage)},e.prototype.initBtnEvent=function(e){var t=this;e.on(cc.Node.EventType.TOUCH_END,function(e){if("btn_close"==e.target.getName())t.node.destroy(),o.default.getInstance().playSound("audio/btnClose"),t._shareGetMoney&&a.default.getInstance().getGame().setRealMoney(t._shareGetMoney);else if("btn_storage"==e.target.getName())if(t._shareGet){o.default.getInstance().playSound("audio/open_panel");i.default.share({callback:function(){a.default.getInstance().getGame().setRealMoney(t._shareGetMoney),t.node.destroy()}})}else o.default.getInstance().playSound("audio/open_panel"),a.default.getInstance().getGame().showToast("存入成功"),t.node.destroy()})},e.prototype.setValue=function(e){this._lb_value.getComponent(cc.Label).string="￥"+e/100},e.prototype.setSurplusMoney=function(){this._lb_surplusMoney.getComponent(cc.Label).string="余额:"+a.default.realMoney/100},e.prototype.shouldShare=function(e){this._shareGet=!0,this._shareGetMoney=e},e=__decorate([c],e)}(cc.Component));n.default=r,cc._RF.pop()},{"../../Common/AudioManager":"AudioManager","../../Controller/GameCtr":"GameCtr","../../Controller/WXCtr":"WXCtr"}],goldNotEnough:[function(e,t,n){"use strict";cc._RF.push(t,"f720eRqKgtA3oGpzEAPoskw","goldNotEnough"),Object.defineProperty(n,"__esModule",{value:!0});var i=e("../../Common/Util"),l=e("../../Controller/GameCtr"),o=e("../../Common/AudioManager"),a=e("../../Controller/WXCtr"),c=e("../../Controller/HttpCtr"),r=cc._decorator,s=r.ccclass,u=(r.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._btn_get=null,e._btn_close=null,e._lb_bonus=null,e._offlineIncome=0,e}return __extends(e,t),e.prototype.onLoad=function(){this._btn_get=this.node.getChildByName("btn_get"),this._btn_close=this.node.getChildByName("btn_close"),this._lb_bonus=this.node.getChildByName("lb_bonus"),this._lb_bonus.getComponent(cc.Label).string="",this.initBtn(this._btn_get),this.initBtn(this._btn_close),this.init()},e.prototype.init=function(){for(var e=JSON.parse(l.default.getInstance().getCombsUnlock()),t=l.default.manufactureConfig[l.default.ManufactureLevel-1].perBonus/(l.default.manufactureConfig[l.default.ManufactureLevel-1].productTime+l.default.manufactureConfig[l.default.ManufactureLevel-1].transferTime),n=0,o=0;o<e.length;o++)n+=(l.default.combConfig[o].initialIncome+l.default.combConfig[o].incomeMatrix*(e[o].level-1)*e[o].level)/(2*l.default.combConfig[o].baseSpeed);var a=t<=n?t:n;this._offlineIncome=120*a,this._lb_bonus.getComponent(cc.Label).string="$"+i.default.formatNumber(Math.floor(this._offlineIncome))},e.prototype.initBtn=function(e){var t=this;e.on(cc.Node.EventType.TOUCH_END,function(e){if("btn_get"==e.target.getName()){a.default.share({callback:function(){l.default.money+=Math.floor(2*t._offlineIncome),l.default.rich+=Math.floor(2*t._offlineIncome),l.default.getInstance().getLevel().setMoney(),l.default.getInstance().getGame().playGoldEft(),t.node.destroy()}}),c.default.openClick(l.default.clickType.goldNotEnoughShare)}else"btn_close"==e.target.getName()&&t.node.destroy();o.default.getInstance().playSound("audio/btnClose")})},e=__decorate([s],e)}(cc.Component));n.default=u,cc._RF.pop()},{"../../Common/AudioManager":"AudioManager","../../Common/Util":"Util","../../Controller/GameCtr":"GameCtr","../../Controller/HttpCtr":"HttpCtr","../../Controller/WXCtr":"WXCtr"}],head:[function(e,t,n){"use strict";cc._RF.push(t,"de329DY9UtH75t9OgB25nWT","head"),Object.defineProperty(n,"__esModule",{value:!0});var o=cc._decorator,a=o.ccclass,i=(o.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.setHead=function(e){var t=this.node.getChildByName("mask").getChildByName("headImg").getComponent(cc.Sprite);this.loadImg(t,e)},t.prototype.loadImg=function(n,e){null!=e&&""!=e&&cc.loader.load({url:e,type:"png"},function(e,t){n.spriteFrame=new cc.SpriteFrame(t)})},t=__decorate([a],t)}(cc.Component));n.default=i,cc._RF.pop()},{}],honeycomb:[function(e,t,n){"use strict";cc._RF.push(t,"416201V29VMn5BZAtBlGiaj","honeycomb"),Object.defineProperty(n,"__esModule",{value:!0});var a=e("../../Controller/GameCtr"),o=e("../../Common/AudioManager"),i=cc._decorator,l=i.ccclass,c=i.property,r=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._level=null,e._unlockNum=null,e._lb_level=null,e._lb_unlockTip=null,e._btn_upgrade=null,e._word_unlock=null,e._word_levelUp=null,e._word_levelFull=null,e._icon_Arrow=null,e._combsUnlock=null,e._totalComb=null,e._beeNode=null,e._unlock=!1,e._speedUpTime=-1,e._combPosArr=[],e._interval=0,e._speed=1,e._hadRandom=!1,e._isWorking=!0,e._isActioning=!1,e.bee=null,e.unlockcomb=null,e.combUpgrade=null,e.bubbleHoney=null,e.unlockCombTip=null,e.flyBees=[],e}return __extends(e,t),e.prototype.onLoad=function(){this.initData(),this.initNode(),this._combsUnlock=JSON.parse(a.default.getInstance().getCombsUnlock())},e.prototype.initData=function(){for(var e=0;e<10;e++)for(var t=0;t<3;t++)t%2==0?this._combPosArr.push(cc.p(75*e-358,19-60*t)):this._combPosArr.push(cc.p(75*e-397,19-60*t))},e.prototype.initNode=function(){this._beeNode=this.node.getChildByName("beeNode"),this._lb_level=this.node.getChildByName("lb_level"),this._lb_unlockTip=this.node.getChildByName("lb_unlockTip"),this._totalComb=this.node.getChildByName("totalComb"),this._btn_upgrade=this.node.getChildByName("btn_upgrade"),this._icon_Arrow=this._btn_upgrade.getChildByName("arrow"),this._word_unlock=this._btn_upgrade.getChildByName("word_unlock"),this._word_levelUp=this._btn_upgrade.getChildByName("word_LeveUP"),this._word_levelFull=this._btn_upgrade.getChildByName("word_levelFull"),this._lb_unlockTip.active=!1,this.showUnlockBtn(!1),this._beeNode.setLocalZOrder(2)},e.prototype.initEvent=function(){a.default.getInstance().addListener("moneyUpdate"+this._level,this.onMoneyUpdate.bind(this))},e.prototype.initBtnState=function(){var e=a.default.getInstance().getGame().getComb(this._level-1);e&&!e.getComponent("honeycomb").getUnlock()||0!=this._unlockNum||this._unlock||(a.default.level>=a.default.combConfig[this._level-1].needLevel?this.showUnlockBtn(!0):this.showUnlockBtn(!1))},e.prototype.setLevel=function(e,t,n){this._level=e,this._unlock=n,this._unlockNum=t,this._lb_level.getComponent(cc.Label).string=e+"",this._lb_unlockTip.getComponent(cc.Label).string="玩家等级"+a.default.combConfig[this._level-1].needLevel+"级解锁";for(var o=0;o<t;o++)this.unlockComb(o),this.createBee(o);this.initBtnState(),this.updateBtnState(),this.initEvent(),0<t&&this.setUnlock(!0)},e.prototype.setUnlock=function(e){this._unlock=e},e.prototype.getUnlock=function(){return this._unlock},e.prototype.initBtn=function(){this.initBtnEvent(this._btn_upgrade),this.initBtnEvent(this._totalComb)},e.prototype.initBtnEvent=function(e){var t=this;e.on(cc.Node.EventType.TOUCH_END,function(e){"btn_upgrade"==e.target.getName()?(0!=t._unlockNum||t._unlock?(t.onUpgradeComb(),a.default.getInstance().getGame().isGuideStepOver(2)||a.default.getInstance().getGame().completeGuideStep(t.node,2)):t.onUnlockComb(),o.default.getInstance().playSound("audio/open_panel")):"totalComb"==e.target.getName()&&(t._speedUpTime=Date.now())})},e.prototype.onUnlockComb=function(){if(!cc.find("Canvas").getChildByName("unlockCombTip")){var e=cc.instantiate(this.unlockCombTip);e.parent=cc.find("Canvas"),e.y=-1218,e.setLocalZOrder(1),e.runAction(cc.moveBy(.4,cc.p(0,1218)).easing(cc.easeElasticOut(3))),e.getComponent("unlockCombTip").init(this._level),a.default.getInstance().getGame().setMaskVisit(!0),this._unlock=!0,a.default.combsUnlock.push({level:this._unlockNum,unlock:this._unlock}),a.default.getInstance().setCombsUnlock()}},e.prototype.onUpgradeComb=function(){if(!cc.find("Canvas").getChildByName("combUpgrade")){var e=cc.instantiate(this.combUpgrade);e.parent=cc.find("Canvas"),e.setLocalZOrder(1),e.getComponent("combUpgrade").init(this._level,this._unlockNum),e.y=-1218,e.runAction(cc.moveBy(.4,cc.p(0,1218)).easing(cc.easeElasticOut(3))),a.default.getInstance().getGame().setMaskVisit(!0),a.default.getInstance().getGame().setCombUpgrade(e)}},e.prototype.upgrade=function(){console.log("log---------GameCtr.combsUnlock this._level=:",a.default.combsUnlock,this._level),this.unlockComb(this._unlockNum),this.createBee(this._unlockNum),a.default.money-=a.default.combConfig[this._level-1].levelUpCost+a.default.combConfig[this._level-1].upMatrix*(this._unlockNum-1),a.default.getInstance().getLevel().setMoney(),this._unlockNum++,a.default.combsUnlock[this._level-1].level++,a.default.getInstance().setCombsUnlock(),this.updateBtnState(),this._combsUnlock=JSON.parse(a.default.getInstance().getCombsUnlock())},e.prototype.unlockComb=function(e){var t=cc.instantiate(this.unlockcomb);t.parent=this.node,t.setLocalZOrder(0),t.x=this._combPosArr[e].x,t.y=this._combPosArr[e].y},e.prototype.createBee=function(t){var n=this;this.node.runAction(cc.sequence(cc.delayTime(3*Math.random()),cc.callFunc(function(){var e=cc.instantiate(n.flyBees[n._level-1]);e.parent=n._beeNode,e.tag=t,e.setLocalZOrder(1),e.x=n._combPosArr[t].x+292,e.y=n._combPosArr[t].y+39,e.getComponent(sp.Skeleton).setEventListener(function(e){n.doBubbleHoney()})})))},e.prototype.showFullFillBtn=function(){this._btn_upgrade.active=!0,this._lb_unlockTip.active=!1,this._word_unlock.active=!1,this._word_levelUp.active=!1,this._word_levelFull.active=!0,this.enabledBtn(!1)},e.prototype.showUnlockBtn=function(e){this._btn_upgrade.active=e,this._lb_unlockTip.active=!e,this._word_unlock.active=!0,this._word_levelUp.active=!1,this._word_levelFull.active=!1,this.enabledBtn(e)},e.prototype.doBubbleHoney=function(){var e=this,t=null;0<a.default.honeyPool.size()&&((t=a.default.honeyPool.get()).parent=this.node.parent,t.x=60*(Math.random()-.5)-500,t.y=this.node.y-50,t.runAction(cc.sequence(cc.moveTo(.4*this._level,cc.p(t.x,0)),cc.callFunc(function(){a.default.honeyPool.put(t),e.updateHoneyValue()}))))},e.prototype.isSpeedUp=function(){return 0<this._speedUpTime},e.prototype.updateHoneyValue=function(){a.default.honeyValue+=a.default.combConfig[this._level-1].initialIncome+this._combsUnlock[this._level-1].level*a.default.combConfig[this._level-1].incomeMatrix,a.default.getInstance().setHoneyValue()},e.prototype.updateBtnState=function(){(0!=this._unlockNum||this._unlock)&&(this._unlockNum<a.default.maxPerCombLevel?(this._btn_upgrade.active=!0,this._word_unlock.active=!1,this._lb_unlockTip.active=!1,this._word_levelUp.active=!0,a.default.money>=a.default.combConfig[this._level-1].levelUpCost+a.default.combConfig[this._level-1].upMatrix*(this._unlockNum-1)?(this.enabledBtn(!0),this.node.getChildByTag(a.default.tipHandTag+2)||a.default.getInstance().getGame().isGuideStepOver(2)||a.default.getInstance().getGame().showGuideStep2()):(this.enabledBtn(!1),a.default.getInstance().getGame().isGuideStepOver(2)||a.default.getInstance().getGame().closeGuideStep(this.node,2))):this.showFullFillBtn())},e.prototype.enabledBtn=function(e){this._btn_upgrade.getComponent(cc.Button).interactable=e,this._icon_Arrow.active=e,this._icon_Arrow.active&&!this._isActioning?(this._isActioning=!0,this._btn_upgrade.runAction(cc.repeatForever(cc.sequence(cc.scaleTo(.3,1.1),cc.scaleTo(.3,1))))):(this._btn_upgrade.stopAllActions(),this._isActioning=!1)},e.prototype.stopWork=function(){this._beeNode.removeAllChildren(),this._isWorking=!1},e.prototype.startWork=function(e){if(!this._isWorking){for(var t=0;t<this._unlockNum;t++){if(this._beeNode.getChildByTag(t))return;this.createBee(t)}this._isWorking=!0}},e.prototype.onMoneyUpdate=function(){this.updateBtnState()},e.prototype.setSpeedRate=function(e){for(var t=0;t<this._beeNode.children.length;t++){this._beeNode.children[t].getComponent(sp.Skeleton).timeScale=e}},__decorate([c(cc.Prefab)],e.prototype,"bee",void 0),__decorate([c(cc.Prefab)],e.prototype,"unlockcomb",void 0),__decorate([c(cc.Prefab)],e.prototype,"combUpgrade",void 0),__decorate([c(cc.Prefab)],e.prototype,"bubbleHoney",void 0),__decorate([c(cc.Prefab)],e.prototype,"unlockCombTip",void 0),__decorate([c(cc.Prefab)],e.prototype,"flyBees",void 0),e=__decorate([l],e)}(cc.Component);n.default=r,cc._RF.pop()},{"../../Common/AudioManager":"AudioManager","../../Controller/GameCtr":"GameCtr"}],inviteFriendItem:[function(e,t,n){"use strict";cc._RF.push(t,"a1083ZR9FFIuIKS9AjsPaKU","inviteFriendItem"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../Common/AudioManager"),a=e("../../Controller/HttpCtr"),i=e("../../Controller/GameCtr"),l=e("../../Controller/WXCtr"),c=e("../../Common/Util"),r=cc._decorator,s=r.ccclass,u=r.property,d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._btn_get=null,e._lb_name=null,e._lb_count=null,e._head=null,e._name=null,e._url=null,e._defaultHead=null,e.getRedPackage=null,e}return __extends(e,t),e.prototype.onLoad=function(){this.initNode()},e.prototype.initNode=function(){this._btn_get=this.node.getChildByName("btn_get"),this._lb_name=this.node.getChildByName("lb_name"),this._lb_count=this.node.getChildByName("lb_count"),this._head=this.node.getChildByName("head"),this._defaultHead=this.node.getChildByName("defaltHead"),this.initBtnEvent(this._btn_get),this._btn_get.active=!1},e.prototype.initBtnEvent=function(e){var t=this;e.on(cc.Node.EventType.TOUCH_END,function(e){"btn_get"==e.target.getName()?a.default.getCash(t.showRedPackage.bind(t)):"head"==e.target.getName()&&l.default.share({invite:!0,callback:function(){console.log("log----------------邀请好友---------")}}),o.default.getInstance().playSound("audio/open_panel")})},e.prototype.initHeadEvent=function(){this.initBtnEvent(this._head)},e.prototype.disableBtn=function(){this._btn_get.active=!0,this._btn_get.getComponent(cc.Button).interactable=!1,this.node.getChildByName("icon_get").active=!0},e.prototype.showRedPackage=function(e){if(!cc.find("Canvas").getChildByName("getRedPackage")){var t=cc.instantiate(this.getRedPackage);t.parent=cc.find("Canvas"),t.setLocalZOrder(1),t.getComponent("getRedPackage").setValue(e.m),t.getComponent("getRedPackage").setSurplusMoney(),i.default.getInstance().getGame().setRealMoney(e.m),a.default.setUserDataState(this.node.tag,10),this.disableBtn()}},e.prototype.setName=function(e){null!=e&&(this._name=0==e?"游客":e,this._btn_get.active=!0,this._lb_name.getComponent(cc.Label).string=c.default.cutstr(this._name,4))},e.prototype.setCount=function(e){this._lb_count.getComponent(cc.Label).string=e},e.prototype.setHeadImg=function(e){if(this._url=e,null!=this._url)if(0!=this._url){this._defaultHead.active=!1;var n=this._head.getComponent(cc.Sprite);cc.loader.load({url:e,type:"png"},function(e,t){n.spriteFrame=new cc.SpriteFrame(t)})}else this._defaultHead.active=!0},__decorate([u(cc.Prefab)],e.prototype,"getRedPackage",void 0),e=__decorate([s],e)}(cc.Component);n.default=d,cc._RF.pop()},{"../../Common/AudioManager":"AudioManager","../../Common/Util":"Util","../../Controller/GameCtr":"GameCtr","../../Controller/HttpCtr":"HttpCtr","../../Controller/WXCtr":"WXCtr"}],invite:[function(e,t,n){"use strict";cc._RF.push(t,"4395eZb9n1DpZTENkJQzIiP","invite"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../Controller/GameCtr"),a=e("../../Common/AudioManager"),i=e("../../Controller/WXCtr"),l=e("../../Controller/HttpCtr"),c=e("../../Common/UserManager"),r=cc._decorator,s=r.ccclass,u=r.property,d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._btn_close=null,e._btn_invite=null,e._friendNode=null,e.inviteFriendItem=null,e}return __extends(e,t),e.prototype.onLoad=function(){this.initNode(),this.initFriendItems(),this.requestFriendList()},e.prototype.initNode=function(){this._btn_close=this.node.getChildByName("btn_close"),this._btn_invite=this.node.getChildByName("btn_invite"),this._friendNode=this.node.getChildByName("friendNode").getChildByName("view").getChildByName("content"),this.initBtnEvent(this._btn_close),this.initBtnEvent(this._btn_invite)},e.prototype.initBtnEvent=function(e){var t=this;e.on(cc.Node.EventType.TOUCH_END,function(e){"btn_close"==e.target.getName()?(t.node.destroy(),o.default.getInstance().getGame().setMaskVisit(!1),a.default.getInstance().playSound("audio/btnClose")):"btn_invite"==e.target.getName()&&(a.default.getInstance().playSound("audio/open_panel"),i.default.share({invite:!0,callback:function(){console.log("log----------------邀请好友---------")}}))})},e.prototype.initFriendItems=function(){for(var e=0;e<10;e++){var t=cc.instantiate(this.inviteFriendItem);t.parent=this._friendNode,t.tag=10+e,t.x=102+176*e,t.y=20;var n="data_"+t.tag;0<c.default.user[n]&&t.getComponent("inviteFriendItem").disableBtn()}},e.prototype.requestFriendList=function(){var n=this;l.default.getInviteResult(function(e){for(var t=0;t<e.length;t++)e[t].uid?(console.log("邀请玩家-----uid=:",e[t].uid),n._friendNode.children[t].getComponent("inviteFriendItem").setName(e[t].nick),n._friendNode.children[t].getComponent("inviteFriendItem").setHeadImg(e[t].Icon)):n._friendNode.children[t].getComponent("inviteFriendItem").initHeadEvent()}),this.scheduleOnce(this.requestFriendList.bind(this),1)},__decorate([u(cc.Prefab)],e.prototype,"inviteFriendItem",void 0),e=__decorate([s],e)}(cc.Component);n.default=d,cc._RF.pop()},{"../../Common/AudioManager":"AudioManager","../../Common/UserManager":"UserManager","../../Controller/GameCtr":"GameCtr","../../Controller/HttpCtr":"HttpCtr","../../Controller/WXCtr":"WXCtr"}],jar:[function(e,t,n){"use strict";cc._RF.push(t,"50040X1CLdFU57fRv11pNy/","jar"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../Common/AudioManager"),a=cc._decorator,i=a.ccclass,l=a.property,c=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.honey=0,e.money=0,e.isTransfering=!1,e.jar_full=null,e.jar_notFull=null,e.jar_money=null,e}return __extends(e,t),e.prototype.setFull=function(){this.jar_money.active=!1,this.jar_notFull.active=!1,this.jar_full.active=!0},e.prototype.setNotFull=function(){this.jar_money.active=!1,this.jar_full.active=!1,this.jar_notFull.active=!0},e.prototype.setMoney=function(){this.jar_full.active=!1,this.jar_notFull.active=!1,this.jar_money.active=!0},e.prototype.onClilk=function(){o.default.getInstance().playSound("audio/open_panel"),console.log("log-----------点击蜂蜜罐---------")},__decorate([l(Number)],e.prototype,"honey",void 0),__decorate([l(Boolean)],e.prototype,"isTransfering",void 0),__decorate([l(cc.Node)],e.prototype,"jar_full",void 0),__decorate([l(cc.Node)],e.prototype,"jar_notFull",void 0),__decorate([l(cc.Node)],e.prototype,"jar_money",void 0),e=__decorate([i],e)}(cc.Component);n.default=c,cc._RF.pop()},{"../../Common/AudioManager":"AudioManager"}],levelUpgrade:[function(e,t,n){"use strict";cc._RF.push(t,"eef43DCv9JOsKuckFSf1Gct","levelUpgrade"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../Common/Util"),a=e("../../Controller/GameCtr"),i=e("../../Common/AudioManager"),l=cc._decorator,c=l.ccclass,r=(l.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._btn_upgrade=null,e._btn_close=null,e._lb_bonus=null,e._word_levelFull=null,e._interval=0,e}return __extends(e,t),e.prototype.onLoad=function(){this._btn_close=this.node.getChildByName("btn_close"),this._btn_upgrade=this.node.getChildByName("btn_upgrade"),this._lb_bonus=this._btn_upgrade.getChildByName("lb_bonus"),this._word_levelFull=this._btn_upgrade.getChildByName("word_levelFull"),this._lb_bonus.getComponent(cc.Label).string="$"+o.default.formatNumber(a.default.levelConfig[a.default.level-1].award),this.initBtn(this._btn_close),this.initBtn(this._btn_upgrade),this.showBtn()},e.prototype.initBtn=function(e){var t=this;e.on(cc.Node.EventType.TOUCH_END,function(e){"btn_close"==e.target.getName()?i.default.getInstance().playSound("audio/btnClose"):"btn_upgrade"==e.target.getName()&&t._btn_upgrade.getComponent(cc.Button).interactable&&(a.default.getInstance().getLevel().upgrade(),i.default.getInstance().playSound("audio/user_levelup"),t.showBtn()),t.node.destroy(),a.default.getInstance().getGame().setMaskVisit(!1)})},e.prototype.showBtn=function(){a.default.levelMoney<a.default.levelConfig[a.default.level-1].need?this._btn_upgrade.getComponent(cc.Button).interactable=!1:this._btn_upgrade.getComponent(cc.Button).interactable=!0,a.default.level>=a.default.maxPlayerLevel&&(this._btn_upgrade.getComponent(cc.Button).interactable=!1,this._lb_bonus.active=!1,this._word_levelFull.active=!0)},e.prototype.update=function(e){this._btn_upgrade.getComponent(cc.Button).interactable||(this._interval+=e,.5<=this._interval&&(this.showBtn(),this._interval=0))},e.prototype.start=function(){},e=__decorate([c],e)}(cc.Component));n.default=r,cc._RF.pop()},{"../../Common/AudioManager":"AudioManager","../../Common/Util":"Util","../../Controller/GameCtr":"GameCtr"}],level:[function(e,t,n){"use strict";cc._RF.push(t,"6103fx89L1DrJnsjs3q0z35","level"),Object.defineProperty(n,"__esModule",{value:!0});var o=cc._decorator,a=o.ccclass,i=o.property,l=e("../../Common/AudioManager"),c=e("../../Controller/GameCtr"),r=e("../../Common/Util"),s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.levelUpgrade=null,e.lb_level=null,e.lb_money=null,e.lb_time=null,e.btn_upgrade=null,e.icon_Arrow=null,e.progress=null,e.currentTime=null,e.money_up=null,e.curMoney=null,e}return __extends(e,t),e.prototype.onLoad=function(){c.default.getInstance().setLevel(this),this.initNode(),this.updateTime()},e.prototype.initNode=function(){this.lb_level=this.node.getChildByName("lb_level"),this.lb_money=this.node.getChildByName("lb_money"),this.lb_time=this.node.getChildByName("lb_time"),this.btn_upgrade=this.node.getChildByName("btn_upgrade"),this.icon_Arrow=this.btn_upgrade.getChildByName("arrow"),this.progress=this.node.getChildByName("progress"),this.icon_Arrow.active=!1,this.progress.getComponent(cc.ProgressBar).progress=0,this.lb_money.getComponent(cc.Label).string=0,c.default.getInstance().getMoney()&&(this.lb_money.getComponent(cc.Label).string=r.default.formatNumber(c.default.getInstance().getMoney())),c.default.getInstance().getLevelMoney()&&(this.progress.getComponent(cc.ProgressBar).progress=c.default.getInstance().getLevelMoney()/c.default.levelConfig[c.default.level-1].need),this.initBtnEvent(this.btn_upgrade),this.setLevel(),this.showBtnUpGrade(),this.initMoneyVal()},e.prototype.initBtnEvent=function(e){var n=this;e.on(cc.Node.EventType.TOUCH_END,function(e){if("btn_upgrade"==e.target.getName()){if(!n.btn_upgrade.getComponent(cc.Button).interactable)return;if(cc.find("Canvas").getChildByName("levelUpgrade"))return;if(n.isMaxLevel())return;var t=cc.instantiate(n.levelUpgrade);t.parent=cc.find("Canvas"),t.setLocalZOrder(1),t.y=-1218,t.runAction(cc.moveBy(.4,cc.p(0,1218)).easing(cc.easeElasticOut(3))),c.default.getInstance().getGame().setMaskVisit(!0),l.default.getInstance().playSound("audio/open_panel"),c.default.getInstance().getGame().isGuideStepOver(4)||c.default.getInstance().getGame().completeGuideStep(c.default.getInstance().getGame().node,4)}})},e.prototype.upgrade=function(){c.default.money+=c.default.levelConfig[c.default.level-1].award,c.default.rich+=c.default.levelConfig[c.default.level-1].award,c.default.levelMoney=0,this.setMoney(),c.default.level+=1,this.showBtnUpGrade(),this.setLevel(),c.default.getInstance().setPlayerLevel(),this.progress.getComponent(cc.ProgressBar).progress=0},e.prototype.setLevel=function(){this.lb_level.getComponent(cc.Label).string="Lv"+c.default.level,c.default.combConfig[c.default.comblevel].needLevel==c.default.level&&c.default.getInstance().getGame().unlockComb()},e.prototype.setMoney=function(){this.lb_money.target=Math.floor(c.default.money),this.lb_money.value>this.lb_money.target&&(this.lb_money.getComponent(cc.Label).string=r.default.formatNumber(this.lb_money.target),this.lb_money.value=this.lb_money.target),c.default.getInstance().getGame().noticeMoneyUpdate()},e.prototype.initMoneyVal=function(){this.lb_money.getComponent(cc.Label).string=r.default.formatNumber(c.default.money),this.lb_money.value=c.default.money},e.prototype.updateMoney=function(){if(this.lb_money.target&&this.lb_money.target!=this.lb_money.value){this.money_up=null;for(var e=1;e<50;e++)if(this.lb_money.target-this.lb_money.value<Math.pow(10,e)){this.money_up=1==e?1:Math.pow(10,e-1);break}this.lb_money.getComponent(cc.Label).string=r.default.formatNumber(this.lb_money.value+this.money_up),this.lb_money.value+=this.money_up}},e.prototype.updateLevelProgress=function(){c.default.level>=c.default.maxPlayerLevel||(this.progress.getComponent(cc.ProgressBar).progress=c.default.levelMoney/c.default.levelConfig[c.default.level-1].need)},e.prototype.updateTime=function(){this.currentTime=new Date(Date.now()),this.currentTime.getMinutes()<10?this.lb_time.getComponent(cc.Label).string=this.currentTime.getHours()+":0"+this.currentTime.getMinutes():this.lb_time.getComponent(cc.Label).string=this.currentTime.getHours()+":"+this.currentTime.getMinutes(),this.scheduleOnce(this.updateTime.bind(this),30)},e.prototype.showBtnUpGrade=function(){if(this.isMaxLevel()){var e=this.btn_upgrade.getChildByName("word_levelUp"),t=this.btn_upgrade.getChildByName("word_fullLevel");return e.active=!1,t.active=!0,void this.enabledBtn(!1)}c.default.levelMoney>=c.default.levelConfig[c.default.level-1].need?(this.enabledBtn(!0),cc.find("Canvas").getChildByTag(c.default.tipHandTag+4)||c.default.getInstance().getGame().isGuideStepOver(4)||c.default.getInstance().getGame().showGuideStep4()):(this.enabledBtn(!1),c.default.getInstance().getGame().isGuideStepOver(4)||c.default.getInstance().getGame().closeGuideStep(c.default.getInstance().getGame().node,4))},e.prototype.enabledBtn=function(e){this.btn_upgrade.getComponent(cc.Button).interactable=e,this.icon_Arrow.active=e,this.icon_Arrow.active?this.btn_upgrade.runAction(cc.repeatForever(cc.sequence(cc.scaleTo(.3,1.1),cc.scaleTo(.3,1)))):this.btn_upgrade.stopAllActions()},e.prototype.isMaxLevel=function(){return c.default.level==c.default.maxPlayerLevel},__decorate([i(cc.Prefab)],e.prototype,"levelUpgrade",void 0),e=__decorate([a],e)}(cc.Component);n.default=s,cc._RF.pop()},{"../../Common/AudioManager":"AudioManager","../../Common/Util":"Util","../../Controller/GameCtr":"GameCtr"}],loading:[function(e,t,n){"use strict";cc._RF.push(t,"0b7913O/QlNjLISQVO2P7o9","loading"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../Controller/GameCtr"),a=e("../../Common/AudioManager"),i=cc._decorator,l=i.ccclass,c=i.property,r=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._btnStart=null,e._progress=null,e._configTotalCount=5,e._configIndex=0,e._adNode=null,e._carouselNode=null,e._carouseAds=[],e._carouselIndex=0,e.ad=null,e}return __extends(e,t),e.prototype.onLoad=function(){this._progress=this.node.getChildByName("progress"),this._btnStart=this.node.getChildByName("btn_start"),this._adNode=this.node.getChildByName("adNode"),this._carouselNode=this.node.getChildByName("carouselNode"),this.initData(),this.loadConf(),this.initBtnStart(),o.default.getInstance(),o.default.getInstance().setLoading(this),this._btnStart.runAction(cc.repeatForever(cc.sequence(cc.scaleTo(.4,1.05),cc.scaleTo(.4,1))))},e.prototype.initCarousel=function(){var e=this;if(o.default.isAudited&&o.default.setting.nav.navA&&!(o.default.setting.nav.navA<=0)){for(var t=0;t<o.default.setting.nav.navA.length;t++){var n=cc.instantiate(this.ad);n.parent=this._carouselNode,n.scale=1,n.getComponent("ad").init(o.default.setting.nav.navA[t]),n.x=0==t?0:1800,this._carouseAds.push(n)}this._carouselIndex=0,this.scheduleOnce(function(){e._carouseAds[e._carouselIndex].getComponent("ad").doShake()},2),this.scheduleOnce(this.doCarousel.bind(this),5)}},e.prototype.doCarousel=function(){if(!(this._carouseAds.length<=1)){this._carouseAds[this._carouselIndex].x=0,this._carouseAds[this._carouselIndex].getComponent("ad").doShake();for(var e=0;e<this._carouseAds.length;e++)e!=this._carouselIndex&&(this._carouseAds[e].rotation=0,this._carouseAds[e].getComponent("ad").stopActions(),this._carouseAds[e].x=1800);this._carouselIndex++,this._carouselIndex=this._carouselIndex%this._carouseAds.length,this.scheduleOnce(this.doCarousel.bind(this),5)}},e.prototype.initBtnStart=function(){var t=this;this._btnStart.on(cc.Node.EventType.TOUCH_END,function(e){a.default.getInstance().playSound("audio/open_panel"),t._configIndex<t._configTotalCount||cc.director.loadScene("Game")})},e.prototype.loadResource=function(){cc.loader.loadResDir("textures",this.progressCallback.bind(this),this.completeCallback.bind(this))},e.prototype.progressCallback=function(e,t,n){this._progress.getComponent(cc.ProgressBar).progress=e/t},e.prototype.completeCallback=function(){this.loadConf()},e.prototype.loadConf=function(){this.loadLevelConf(),this.loadmanufactureConf(),this.loadCombConf(),this.loadPfTurntableConf(),this.loadOtherConf()},e.prototype.loadLevelConf=function(){var n=this;cc.loader.loadRes("config/level",function(e,t){e||(o.default.levelConfig=t,n.checkLoadConfigOver())})},e.prototype.loadmanufactureConf=function(){var n=this;cc.loader.loadRes("config/manufacture",function(e,t){e||(o.default.manufactureConfig=t,n.checkLoadConfigOver())})},e.prototype.loadCombConf=function(){var n=this;cc.loader.loadRes("config/comb",function(e,t){e||(o.default.combConfig=t,n.checkLoadConfigOver())})},e.prototype.loadPfTurntableConf=function(){var n=this;cc.loader.loadRes("config/pfTurnTable",function(e,t){e||(o.default.pfTurnTableConfig=t,console.log("log----------GameCtr.pfTurnTableConfig=:",o.default.pfTurnTableConfig),n.checkLoadConfigOver())})},e.prototype.loadOtherConf=function(){var n=this;cc.loader.loadRes("config/other",function(e,t){e||(o.default.otherConfig=t,n.checkLoadConfigOver())})},e.prototype.checkLoadConfigOver=function(){this._configIndex++},e.prototype.initData=function(){o.default.getInstance().getPlayerLevel()?o.default.level=o.default.getInstance().getPlayerLevel():(o.default.level=1,o.default.getInstance().setPlayerLevel()),o.default.getInstance().getManufactureLevel()?o.default.ManufactureLevel=o.default.getInstance().getManufactureLevel():(o.default.ManufactureLevel=1,o.default.getInstance().setManufactureLevel()),o.default.getInstance().getCombLevel()?o.default.comblevel=o.default.getInstance().getCombLevel():(o.default.comblevel=1,o.default.getInstance().setCombLevel()),console.log("log-------GameCtr.comblebel=:",o.default.comblevel),o.default.getInstance().getCombsUnlock()?o.default.combsUnlock=JSON.parse(o.default.getInstance().getCombsUnlock()):(o.default.combsUnlock=[],o.default.combsUnlock.push({level:1,unlock:!0}),o.default.getInstance().setCombsUnlock()),window.localStorage.getItem("guide")?o.default.guide=JSON.parse(window.localStorage.getItem("guide")):(o.default.guide=[],o.default.getInstance().setGuide()),window.localStorage.getItem("honeyValue")?o.default.honeyValue=o.default.getInstance().getHoneyValue():(o.default.honeyValue=0,o.default.getInstance().setHoneyValue()),o.default.rich=o.default.getInstance().getRich(),o.default.money=o.default.getInstance().getMoney(),o.default.levelMoney=o.default.getInstance().getLevelMoney(),o.default.guide=o.default.getInstance().getGuide(),o.default.rich||(o.default.rich=0),o.default.money||(o.default.money=0),o.default.levelMoney||(o.default.levelMoney=0)},e.prototype.refreshMoreNewGame=function(){if(o.default.isAudited&&o.default.setting.nav.banner&&!(o.default.setting.nav.banner<=0)&&this._adNode){this._adNode.active=!0;for(var e=this._adNode.getChildByName("adFrame"),t=0;t<o.default.setting.nav.banner.length;t++){if(4<=t)return;var n=cc.instantiate(this.ad);n.parent=e,n.scale=1,n.getComponent("ad").init(o.default.setting.nav.banner[t]),n.y=-15,0==t&&(n.x=-292),1==t&&(n.x=-97),2==t&&(n.x=96),3==t&&(n.x=292)}this.initCarousel()}},__decorate([c(cc.Prefab)],e.prototype,"ad",void 0),e=__decorate([l],e)}(cc.Component);n.default=r,cc._RF.pop()},{"../../Common/AudioManager":"AudioManager","../../Controller/GameCtr":"GameCtr"}],manufactureUpgrade:[function(e,t,n){"use strict";cc._RF.push(t,"26ee5KMbq9KT5d5w6ZGfISn","manufactureUpgrade"),Object.defineProperty(n,"__esModule",{value:!0});var o=cc._decorator,a=o.ccclass,i=(o.property,e("../../Common/AudioManager")),l=e("../../Controller/GameCtr"),c=e("../../Common/Util"),r=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.lb_des=null,e._btn_close=null,e._btn_upgrade=null,e._lb_cost=null,e}return __extends(e,t),e.prototype.onLoad=function(){this.initNode()},e.prototype.initNode=function(){this.lb_des=this.node.getChildByName("lb_des"),this._btn_close=this.node.getChildByName("btn_close"),this.lb_des.getComponent(cc.Label).string=l.default.ManufactureLevel+1,this.isMaxLevel()&&(this.lb_des.getComponent(cc.Label).string=l.default.ManufactureLevel),this.showHoneyProfit(),this.showSpeed(),this.showCapacity(),this.showUpgrade(),this.initBtnEvent(this._btn_close),this.initBtnEvent(this._btn_upgrade),this.showBtn()},e.prototype.showHoneyProfit=function(){var e=this.node.getChildByName("honeyProfit"),t=e.getChildByName("lb_value"),n=e.getChildByName("lb_add");t.getComponent(cc.Label).string="$"+c.default.formatNumber(Math.ceil(l.default.manufactureConfig[l.default.ManufactureLevel-1].perBonus-0)),n.getComponent(cc.Label).string="+$"+c.default.formatNumber(Math.ceil(l.default.manufactureConfig[l.default.ManufactureLevel].perBonus-l.default.manufactureConfig[l.default.ManufactureLevel-1].perBonus))},e.prototype.showSpeed=function(){var e=this.node.getChildByName("speed"),t=e.getChildByName("lb_value"),n=e.getChildByName("lb_add");t.getComponent(cc.Label).string=Math.ceil(100*l.default.manufactureConfig[l.default.ManufactureLevel-1].showSpeed)+"%",n.getComponent(cc.Label).string="+1%"},e.prototype.showCapacity=function(){var e=this.node.getChildByName("capacity"),t=e.getChildByName("lb_value"),n=e.getChildByName("lb_add");t.getComponent(cc.Label).string=c.default.formatNumber(Math.ceil(l.default.manufactureConfig[l.default.ManufactureLevel-1].perBonus))+"",n.getComponent(cc.Label).string="+"+c.default.formatNumber(Math.ceil(l.default.manufactureConfig[l.default.ManufactureLevel].perBonus-l.default.manufactureConfig[l.default.ManufactureLevel-1].perBonus))},e.prototype.showUpgrade=function(){var e=this.node.getChildByName("upgrade");this._btn_upgrade=e.getChildByName("btn_upgrade"),this._lb_cost=this._btn_upgrade.getChildByName("lb_cost"),this.isMaxLevel()||(this.lb_des.getComponent(cc.Label).string=l.default.ManufactureLevel+1,this._lb_cost.getComponent(cc.Label).string="$"+c.default.formatNumber(l.default.manufactureConfig[l.default.ManufactureLevel-1].cost))},e.prototype.initBtnEvent=function(e){var t=this;e.on(cc.Node.EventType.TOUCH_END,function(e){if("btn_close"==e.target.getName())t.node.destroy(),l.default.getInstance().getGame().setMaskVisit(!1),l.default.getInstance().getGame().clearManufactureUpgrade(),i.default.getInstance().playSound("audio/btnClose");else if("btn_upgrade"==e.target.getName()){if(l.default.ManufactureLevel<l.default.maxManufactureLevel&&l.default.money<l.default.manufactureConfig[l.default.ManufactureLevel-1].cost)return void l.default.getInstance().getGame().showGoldNotEnough();if(!t._btn_upgrade.getComponent(cc.Button).interactable)return;if(l.default.getInstance().getManufacture().upgrade(),i.default.getInstance().playSound("audio/levelup"),t.showBtn(),t.isMaxLevel())return;t.lb_des.getComponent(cc.Label).string=l.default.ManufactureLevel+1,t.showHoneyProfit(),t.showSpeed(),t.showCapacity(),t.showUpgrade()}})},e.prototype.showBtn=function(){if(l.default.money>=l.default.manufactureConfig[l.default.ManufactureLevel-1].cost?this._btn_upgrade.getComponent(cc.Button).interactable=!0:this._btn_upgrade.getComponent(cc.Button).interactable=!1,l.default.ManufactureLevel>=l.default.maxManufactureLevel){this._btn_upgrade.getComponent(cc.Button).interactable=!1;var e=this._btn_upgrade.getChildByName("lb_cost"),t=this._btn_upgrade.getChildByName("word_fullLevel");e.active=!1,t.active=!0}},e.prototype.isMaxLevel=function(){return l.default.ManufactureLevel==l.default.maxManufactureLevel},e.prototype.doUpdate=function(){this._btn_upgrade.getComponent(cc.Button).interactable||this.showBtn()},e=__decorate([a],e)}(cc.Component);n.default=r,cc._RF.pop()},{"../../Common/AudioManager":"AudioManager","../../Common/Util":"Util","../../Controller/GameCtr":"GameCtr"}],manufacture:[function(e,t,n){"use strict";cc._RF.push(t,"275a4HhEyhKo51/C8/9e3GH","manufacture"),Object.defineProperty(n,"__esModule",{value:!0});var o=cc._decorator,a=o.ccclass,i=o.property,l=e("../../Common/AudioManager"),c=e("../../Controller/GameCtr"),r=e("../../Common/Util"),s=e("../../Controller/WXCtr"),u=e("../../Controller/HttpCtr"),d=e("../../Common/UserManager"),p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.jar=null,e.manufactureUpgrade=null,e.bubbleMoney=null,e.getRedPackage=null,e._lb_honey=null,e._lb_doubleTime=null,e._btn_upgrade=null,e._btn_doubleIncome=null,e._icon_arrow=null,e._timeCount1=-1,e._speed=1,e._isWorking=!1,e._mask=null,e._speedUpTime=-1,e._upLine=null,e._downLine=null,e._plug=null,e._pulleyList=[],e._jarNode=null,e._doubleTime=-1,e._isActioning=!1,e._initialRedJarTime=null,e._workTimes=0,e._canDouble=!0,e}return __extends(e,t),e.prototype.onLoad=function(){this.doCaculateHoneyJar(),c.default.getInstance().setManufacture(this),this.initNode(),0<c.default.honeyValue&&this.doWork()},e.prototype.initNode=function(){this._lb_honey=this.node.getChildByName("lb_honey"),this._lb_doubleTime=this.node.getChildByName("lb_doubleTime"),this._btn_upgrade=this.node.getChildByName("btn_upgrade"),this._icon_arrow=this._btn_upgrade.getChildByName("arrow"),this._btn_doubleIncome=this.node.getChildByName("btn_boubleIncome"),this._mask=this.node.getChildByName("mask"),this._upLine=this.node.getChildByName("upline"),this._downLine=this.node.getChildByName("downline"),this._plug=this.node.getChildByName("plug"),this._jarNode=this.node.getChildByName("jarNode");for(var e=this.node.getChildByName("pulleyNode"),t=0;t<6;t++){var n=e.getChildByName("pulley"+t);this._pulleyList.push(n)}this._plug.setLocalZOrder(1),this._lb_doubleTime.active=!1,this.resetLineAction(),this.initBtnEvent(this._btn_upgrade),this.initBtnEvent(this._mask),this.initBtnEvent(this._btn_doubleIncome),this.showBtn(),this.initJars(),this._btn_doubleIncome.active=!0},e.prototype.initJars=function(){for(var e=0;e<8;e++)c.default.jarPool.put(cc.instantiate(this.jar))},e.prototype.doCaculateHoneyJar=function(){if(c.default.isAudited){if((this._workTimes=0)<d.default.user.data_1?this._initialRedJarTime=null:(this._initialRedJarTime=6+Math.floor(6*Math.random()),u.default.setUserDataState(1,1)),c.default.comblevel<=25&&c.default.comblevel%5==0){var e="data_"+(Math.floor(c.default.comblevel/5)+1);0<d.default.user[e]?this._initialRedJarTime=null:(this._initialRedJarTime=6+Math.floor(6*Math.random()),u.default.setUserDataState(Math.floor(c.default.comblevel/5)+1,1))}}},e.prototype.resetLineAction=function(){var t=this;this._upLine.stopAllActions(),this._downLine.stopAllActions();for(var e=0;e<this._pulleyList.length;e++)this._pulleyList[e].stopAllActions();this._upLine.runAction(cc.repeatForever(cc.sequence(cc.moveBy(c.default.manufactureConfig[c.default.ManufactureLevel-1].transferTime/(this._speed*c.default.globalSpeedRate),cc.p(1080,0)),cc.callFunc(function(e){t._upLine.x=0})))),this._downLine.runAction(cc.repeatForever(cc.sequence(cc.moveBy(c.default.manufactureConfig[c.default.ManufactureLevel-1].transferTime/(this._speed*c.default.globalSpeedRate),cc.p(-1080,0)),cc.callFunc(function(e){t._downLine.x=0}))));for(e=0;e<this._pulleyList.length;e++)this._pulleyList[e].runAction(cc.repeatForever(cc.rotateBy(.3/(this._speed*c.default.globalSpeedRate),15)));for(e=0;e<this._jarNode.children.length;e++)this._jarNode.children[e].getComponent("jar").isTransfering&&(this._jarNode.children[e].stopAllActions(),this._jarNode.children[e].runAction(cc.moveBy(c.default.manufactureConfig[c.default.ManufactureLevel-1].transferTime/(this._speed*c.default.globalSpeedRate),cc.p(1080,0))))},e.prototype.setHoneyValue=function(){this._lb_honey.getComponent(cc.Label).string=r.default.formatNumber(Math.floor(c.default.honeyValue)),cc.find("Canvas").getChildByTag(c.default.tipHandTag+1)||c.default.getInstance().getGame().isGuideStepOver(1)||c.default.getInstance().getGame().showGuideStep1()},e.prototype.doWork=function(){var e=this;if(c.default.honeyValue<=0)this._isWorking=!1;else{this._isWorking=!0,this._workTimes++;var t=null;0<c.default.jarPool.size()?t=c.default.jarPool.get():(t=cc.instantiate(this.jar),c.default.jarPool.put(t)),c.default.honeyValue>c.default.manufactureConfig[c.default.ManufactureLevel-1].perBonus?(t.getComponent("jar").setFull(),c.default.honeyValue-=Math.ceil(c.default.manufactureConfig[c.default.ManufactureLevel-1].perBonus),t.getComponent("jar").honey=Math.ceil(c.default.manufactureConfig[c.default.ManufactureLevel-1].perBonus)):(t.getComponent("jar").setNotFull(),t.getComponent("jar").honey=Math.ceil(c.default.honeyValue),c.default.honeyValue-=Math.ceil(c.default.honeyValue)),t.getComponent("jar").money=0,this._workTimes==this._initialRedJarTime&&(t.getComponent("jar").setMoney(),c.default.honeyValue+=t.getComponent("jar").honey,t.getComponent("jar").money=1),t.getComponent("jar").isTransfering=!1,this.setHoneyValue(),this._speed=0<this._speedUpTime?c.default.manufactureConfig[c.default.ManufactureLevel-1].speed:1,t.parent=this._jarNode,t.x=-203,t.y=545,this._plug.runAction(cc.sequence(cc.scaleTo(.2/this._speed*c.default.globalSpeedRate,.8),cc.scaleTo(.1/this._speed*c.default.globalSpeedRate,1),cc.delayTime((c.default.manufactureConfig[c.default.ManufactureLevel-1].productTime-.2/this._speed*c.default.globalSpeedRate-.1/this._speed*c.default.globalSpeedRate)/this._speed*c.default.globalSpeedRate))),t.runAction(cc.sequence(cc.delayTime(.3),cc.moveTo(.2,cc.p(-203,365)),cc.callFunc(function(){t.getComponent("jar").isTransfering=!0,t.runAction(cc.moveBy(c.default.manufactureConfig[c.default.ManufactureLevel-1].transferTime/(e._speed*c.default.globalSpeedRate),cc.p(1080,0)))}))),this.scheduleOnce(this.doWork.bind(this),c.default.manufactureConfig[c.default.ManufactureLevel-1].productTime/(this._speed*c.default.globalSpeedRate))}},e.prototype.showBubbleMoney=function(e){var t=null;0<c.default.bubbleMoneyPool.size()?t=c.default.bubbleMoneyPool.get():(t=cc.instantiate(this.bubbleMoney),c.default.bubbleMoneyPool.put(t)),t.parent=this.node,t.active=!0,t.x=450,t.y=300,t.getComponent("bubbleMoney").setMoney(e),l.default.getInstance().playSound("audio/get_money"),t.runAction(cc.sequence(cc.moveBy(.3,cc.p(0,80)),cc.delayTime(.2),cc.callFunc(function(){t.active=!1,c.default.bubbleMoneyPool.put(t)})))},e.prototype.initBtnEvent=function(e){var o=this;e.on(cc.Node.EventType.TOUCH_END,function(e){if("btn_upgrade"==e.target.getName()){if(cc.find("Canvas").getChildByName("manufactureUpgrade"))return;c.default.getInstance().getGame().isGuideStepOver(3)||c.default.getInstance().getGame().completeGuideStep(o.node,3);var t=cc.instantiate(o.manufactureUpgrade);t.parent=cc.find("Canvas"),t.setLocalZOrder(1),t.y=-1218,t.runAction(cc.moveBy(.4,cc.p(0,1218)).easing(cc.easeElasticOut(3))),c.default.getInstance().getGame().setMaskVisit(!0),c.default.getInstance().getGame().setManufactureUpgrade(t),l.default.getInstance().playSound("audio/open_panel")}else if("btn_boubleIncome"==e.target.getName()){if(!o._btn_doubleIncome.getComponent(cc.Button).interactable)return;if(1<c.default.incomeRate)return void c.default.getInstance().getGame().showToast("双倍收益中...");var n=function(){o._doubleTime=0,o._btn_doubleIncome.getComponent(cc.Button).interactable=!1,o._btn_doubleIncome.stopAllActions(),c.default.incomeRate=2,o._canDouble=!1,o.startDoubleTimer(c.default.otherConfig.doublePersist)};if(c.default.vedioTimes<=0){if(!c.default.isAudited)return void c.default.getInstance().getGame().showToast("今日视频已看完");s.default.share({callback:n})}else{if(0<c.default.getInstance().getGame().getVedioCD())return void s.default.share({callback:n});s.default.offCloseVideo(),s.default.showVideoAd(),s.default.onCloseVideo(function(e){e?n():c.default.getInstance().getGame().showToast("视频未看完，无法领取奖励")})}}else"mask"==e.target.getName()&&(o._speedUpTime=Date.now(),o._speed=0<o._speedUpTime?c.default.manufactureConfig[c.default.ManufactureLevel-1].speed:1,o.resetLineAction(),c.default.getInstance().getGame().isGuideStepOver(1)||c.default.getInstance().getGame().completeGuideStep(cc.find("Canvas"),1))})},e.prototype.upgrade=function(){c.default.money-=c.default.manufactureConfig[c.default.ManufactureLevel-1].cost,c.default.ManufactureLevel+=1,this.showBtn(),c.default.getInstance().setManufactureLevel(),c.default.getInstance().getLevel().setMoney()},e.prototype.showBtn=function(){if(this.isMaxLevel()){this.enableBtn(!1);var e=this._btn_upgrade.getChildByName("word_levelUp"),t=this._btn_upgrade.getChildByName("word_fullLevel");return e.active=!1,void(t.active=!0)}c.default.money>=c.default.manufactureConfig[c.default.ManufactureLevel-1].cost?(this.enableBtn(!0),this.node.getChildByTag(c.default.tipHandTag+3)||c.default.getInstance().getGame().isGuideStepOver(3)||c.default.getInstance().getGame().showGuideStep3()):(this.enableBtn(!1),c.default.getInstance().getGame().isGuideStepOver(3)||c.default.getInstance().getGame().closeGuideStep(this.node,3))},e.prototype.enableBtn=function(e){this._btn_upgrade.getComponent(cc.Button).interactable=e,this._icon_arrow.active=e,this._icon_arrow.active&&!this._isActioning?(this._isActioning=!0,this._btn_upgrade.runAction(cc.repeatForever(cc.sequence(cc.scaleTo(.3,1.1),cc.scaleTo(.3,1))))):(this._btn_upgrade.stopAllActions(),this._isActioning=!1)},e.prototype.startDoubleTimer=function(e){this._timeCount1=e,this._lb_doubleTime.active=!0,this.countDown1()},e.prototype.countDown1=function(){if(this._timeCount1<0)return c.default.incomeRate=1,this._lb_doubleTime.active=!1,void(this._canDouble&&(this._btn_doubleIncome.getComponent(cc.Button).interactable=!0));var e=Math.floor(this._timeCount1/60)<10?"0"+Math.floor(this._timeCount1/60):""+Math.floor(this._timeCount1/60),t=this._timeCount1%60<10?"0"+this._timeCount1%60:""+this._timeCount1%60;this._lb_doubleTime.getComponent(cc.Label).string=e+":"+t,this._timeCount1-=1,this.scheduleOnce(this.countDown1.bind(this),1)},e.prototype.isMaxLevel=function(){return c.default.ManufactureLevel==c.default.maxManufactureLevel},e.prototype.getPackage=function(e){if(!cc.find("Canvas").getChildByName("getRedPackage")){var t=cc.instantiate(this.getRedPackage);t.parent=cc.find("Canvas"),t.setLocalZOrder(1),t.getComponent("getRedPackage").setValue(e.m),t.getComponent("getRedPackage").setSurplusMoney(),t.getComponent("getRedPackage").shouldShare(e.m)}},e.prototype.disableDoubleIncome=function(){this._btn_doubleIncome.getComponent(cc.Button).interactable=!1},e.prototype.update=function(e){if(this._upLine){0<this._speedUpTime&&2<=(Date.now()-this._speedUpTime)/1e3&&(this._speedUpTime=-1,this._speed=1,this.resetLineAction()),0<=this._doubleTime&&(this._doubleTime+=e,this._doubleTime>=c.default.otherConfig.doubleInterval&&(this._btn_doubleIncome.getComponent(cc.Button).interactable=!0,this._canDouble=!0,this._btn_doubleIncome.runAction(cc.repeatForever(cc.sequence(cc.scaleTo(.4,1.6),cc.scaleTo(.4,1.5)))),this._doubleTime=-1)),!this._isWorking&&0<c.default.honeyValue&&(this.unschedule(this.doWork.bind(this)),this.scheduleOnce(this.doWork.bind(this),1),this._isWorking=!0);for(var t=0;t<this._jarNode.children.length;t++)570<=this._jarNode.children[t].x&&(c.default.money+=this._jarNode.children[t].getComponent("jar").honey*c.default.incomeRate,c.default.rich+=this._jarNode.children[t].getComponent("jar").honey*c.default.incomeRate,c.default.levelMoney+=this._jarNode.children[t].getComponent("jar").honey*c.default.incomeRate,c.default.getInstance().getLevel().setMoney(),c.default.getInstance().getLevel().updateLevelProgress(),c.default.getInstance().getLevel().showBtnUpGrade(),this.showBtn(),0<this._jarNode.children[t].getComponent("jar").money&&u.default.getCash(this.getPackage.bind(this)),this.showBubbleMoney(this._jarNode.children[t].getComponent("jar").honey*c.default.incomeRate),this._jarNode.children[t].isTransfering=!1,this._jarNode.children[t].stopAllActions(),c.default.jarPool.put(this._jarNode.children[t]));1080<=this._upLine.x&&(this._upLine.x=0),this._downLine.x<=-1080&&(this._downLine.x=0)}},__decorate([i(cc.Prefab)],e.prototype,"jar",void 0),__decorate([i(cc.Prefab)],e.prototype,"manufactureUpgrade",void 0),__decorate([i(cc.Prefab)],e.prototype,"bubbleMoney",void 0),__decorate([i(cc.Prefab)],e.prototype,"getRedPackage",void 0),e=__decorate([a],e)}(cc.Component);n.default=p,cc._RF.pop()},{"../../Common/AudioManager":"AudioManager","../../Common/UserManager":"UserManager","../../Common/Util":"Util","../../Controller/GameCtr":"GameCtr","../../Controller/HttpCtr":"HttpCtr","../../Controller/WXCtr":"WXCtr"}],moreNode:[function(e,t,n){"use strict";cc._RF.push(t,"72df96VCohGKZ0lXgGMMfP+","moreNode"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../Common/AudioManager"),a=e("../../Controller/GameCtr"),i=cc._decorator,l=i.ccclass,c=i.property,r=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._mask=null,e._btn_close=null,e._content=null,e.ad=null,e}return __extends(e,t),e.prototype.onLoad=function(){this._mask=this.node.getChildByName("mask"),this._btn_close=this.node.getChildByName("btn_close"),this._content=this.node.getChildByName("scrollView").getChildByName("view").getChildByName("content"),this.initBtnEvent(this._mask),this.initBtnEvent(this._btn_close),this.initAds()},e.prototype.initBtnEvent=function(e){var t=this;e.on(cc.Node.EventType.TOUCH_END,function(e){t.node.destroy(),o.default.getInstance().playSound("audio/btnClose")})},e.prototype.initAds=function(){if(0!=a.default.setting.nav.length){this._content.setContentSize(cc.size(752,230*Math.ceil(a.default.setting.nav.nav.length/4)));for(var e=0;e<a.default.setting.nav.nav.length;e++){var t=cc.instantiate(this.ad);t.parent=this._content,t.x=e%4*190-285,t.y=-230*Math.floor(e/4)-90,t.getComponent("ad").init(a.default.setting.nav.nav[e])}}},__decorate([c(cc.Prefab)],e.prototype,"ad",void 0),e=__decorate([l],e)}(cc.Component);n.default=r,cc._RF.pop()},{"../../Common/AudioManager":"AudioManager","../../Controller/GameCtr":"GameCtr"}],notice:[function(e,t,n){"use strict";cc._RF.push(t,"85972ZVVatLzpWXw2dJ0/hA","notice"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../Controller/GameCtr"),a=e("../../Controller/HttpCtr"),i=e("../../Common/UserManager"),l=cc._decorator,c=l.ccclass,r=(l.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._notices=[],e._lb_notice=null,e._bg=null,e._isSelf=!1,e._nextTime=null,e._interval=-1,e}return __extends(e,t),e.prototype.onLoad=function(){this.initNode(),this.requestNotices()},e.prototype.initNode=function(){this._bg=this.node.getChildByName("bg"),this._lb_notice=this.node.getChildByName("mask").getChildByName("lb_notice")},e.prototype.setNotices=function(e){for(var t=0;t<e.length;t++)this._notices.push(e[t]);console.log("log------自己获得红包----------this._notices=:",this._notices),this._interval=0,this._nextTime=this._notices[0].stime},e.prototype.requestNotices=function(){a.default.pushMsg(this.setNotices.bind(this))},e.prototype.showNotice=function(){var e=this;o.default.isAudited&&(this._interval=-1,this._bg.active=!0,this._lb_notice.x=390,this._lb_notice.getComponent(cc.Label).string=this._notices[0].title,this._notices.shift(),this._lb_notice.stopAllActions(),this._lb_notice.runAction(cc.sequence(cc.moveBy(10,cc.p(-1300,0)),cc.callFunc(function(){e._interval=0,e._bg.active=!1,0==e._notices.length?(e.requestNotices(),e._nextTime=null):e._nextTime=e._notices[0].stime}))))},e.prototype.addNotice=function(e){if(!(e<=0)){console.log("log------自己获得红包----------"),this._isSelf=!0;var t=this._bg.active?10:1,n=i.default.user.nick?i.default.user.nick:"恭喜你";this._notices.unshift({title:n+"获得了"+e/100+"红包",stime:t})}},e.prototype.update=function(e){o.default.isAudited&&0<=this._interval&&this._nextTime&&(this._interval+=e,this._interval>=this._nextTime&&this.showNotice(),this._isSelf&&!this._bg.active&&(this._interval=0,this._nextTime=1,this._isSelf=!1))},e=__decorate([c],e)}(cc.Component));n.default=r,cc._RF.pop()},{"../../Common/UserManager":"UserManager","../../Controller/GameCtr":"GameCtr","../../Controller/HttpCtr":"HttpCtr"}],offlineIncome:[function(e,t,n){"use strict";cc._RF.push(t,"f03c5J4fYNPi4BV6s6mvvlA","offlineIncome"),Object.defineProperty(n,"__esModule",{value:!0});var l=e("../../Common/Util"),c=e("../../Controller/GameCtr"),o=e("../../Common/AudioManager"),a=e("../../Controller/WXCtr"),i=e("../../Controller/HttpCtr"),r=cc._decorator,s=r.ccclass,u=(r.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._btn_get=null,e._btn_close=null,e._lb_bonus=null,e._offlineIncome=0,e}return __extends(e,t),e.prototype.onLoad=function(){this._btn_get=this.node.getChildByName("btn_get"),this._btn_close=this.node.getChildByName("btn_close"),this._lb_bonus=this.node.getChildByName("lb_bonus"),this._lb_bonus.getComponent(cc.Label).string="",this.initBtn(this._btn_get),this.initBtn(this._btn_close)},e.prototype.init=function(e){for(var t=JSON.parse(c.default.getInstance().getCombsUnlock()),n=c.default.manufactureConfig[c.default.ManufactureLevel-1].perBonus/(c.default.manufactureConfig[c.default.ManufactureLevel-1].productTime+c.default.manufactureConfig[c.default.ManufactureLevel-1].transferTime),o=0,a=0;a<t.length;a++)o+=(c.default.combConfig[a].initialIncome+c.default.combConfig[a].incomeMatrix*(t[a].level-1)*t[a].level)/(2*c.default.combConfig[a].baseSpeed);var i=n<=o?n:o;this._offlineIncome=e*i,this._lb_bonus.getComponent(cc.Label).string="$"+l.default.formatNumber(Math.floor(this._offlineIncome))},e.prototype.initBtn=function(e){var n=this;e.on(cc.Node.EventType.TOUCH_END,function(e){if("btn_get"==e.target.getName()){i.default.openClick(c.default.clickType.offLineShare);var t=function(){c.default.getInstance().getGame().setMaskVisit(!1),c.default.money+=Math.floor(2*n._offlineIncome),c.default.rich+=Math.floor(2*n._offlineIncome),c.default.getInstance().getLevel().setMoney(),c.default.getInstance().getGame().playGoldEft(),n.node.destroy()};if(c.default.vedioTimes<=0){if(!c.default.isAudited)return c.default.getInstance().getGame().showToast("今日视频已看完"),void n.node.destroy();a.default.share({callback:t})}else{if(i.default.openClick(c.default.clickType.offLineVedio),0<c.default.getInstance().getGame().getVedioCD())return void a.default.share({callback:t});a.default.offCloseVideo(),a.default.showVideoAd(),a.default.onCloseVideo(function(e){e?t():c.default.getInstance().getGame().showToast("视频未看完，无法领取奖励")})}}else"btn_close"==e.target.getName()&&(c.default.getInstance().getGame().setMaskVisit(!1),c.default.money+=Math.floor(n._offlineIncome),c.default.rich+=Math.floor(n._offlineIncome),c.default.getInstance().getLevel().setMoney(),c.default.getInstance().getGame().playGoldEft(),n.node.destroy());o.default.getInstance().playSound("audio/btnClose")})},e=__decorate([s],e)}(cc.Component));n.default=u,cc._RF.pop()},{"../../Common/AudioManager":"AudioManager","../../Common/Util":"Util","../../Controller/GameCtr":"GameCtr","../../Controller/HttpCtr":"HttpCtr","../../Controller/WXCtr":"WXCtr"}],pfTurntable:[function(e,t,n){"use strict";cc._RF.push(t,"9f080q6zIxGsZSrX4eamo4e","pfTurntable"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../Controller/GameCtr"),a=e("../../Common/GameData"),i=e("../../Controller/WXCtr"),c=e("../../Common/AudioManager"),l=cc._decorator,r=l.ccclass,s=l.property,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.wheelSp=null,e.btnSp=null,e.btn=null,e.labelTips=null,e.award=null,e.data={type:5},e.active=!0,e.isTurning=!1,e}return __extends(e,t),e.prototype.myInit=function(e){},e.prototype.setData=function(e){this.data=e},e.prototype.callBack_btn=function(){a.default.pfTurntable<1?i.default.share({callback:function(){a.default.pfTurntable++}}):(a.default.pfTurntable--,this.btn.node.active=!1,this.btnSp.active=!0,this.data={type:Math.floor(7*Math.random())},this.requestResults(),o.default.getInstance().getGame().disableBtnPfturnable(),o.default.getInstance().getGame().startPfTurntableTime())},e.prototype.showResult=function(e){var t=o.default.pfTurnTableConfig[e];if(!this.node.getChildByName("award")){var n=cc.instantiate(this.award);n.parent=this.node,n.getComponent("award").showAward(t),this.isTurning=!1}},e.prototype.requestResults=function(){var e=this;this.isTurning=!0;var t=(new Date).getHours();cc.sys.localStorage.setItem("hours",t);var n;n=this.data.type;var o=35*Math.random()+5+45*n;console.log("&&&&^*",this.data,o);var a=cc.rotateBy(10,o+3600).easing(cc.easeCubicActionOut()),i=cc.callFunc(function(){e.showResult(n)}),l=cc.sequence(a,i);this.wheelSp.runAction(l);c.default.getInstance().playSound("audio/lottery_draw",!1)},e.prototype.callBack_test=function(){this.btn.interactable=!0},e.prototype.close=function(){this.isTurning||(c.default.getInstance().playSound("audio/btnClose"),this.node.destroy())},__decorate([s(cc.Node)],e.prototype,"wheelSp",void 0),__decorate([s(cc.Node)],e.prototype,"btnSp",void 0),__decorate([s(cc.Button)],e.prototype,"btn",void 0),__decorate([s(cc.Label)],e.prototype,"labelTips",void 0),__decorate([s(cc.Prefab)],e.prototype,"award",void 0),e=__decorate([r],e)}(cc.Component);n.default=u,cc._RF.pop()},{"../../Common/AudioManager":"AudioManager","../../Common/GameData":"GameData","../../Controller/GameCtr":"GameCtr","../../Controller/WXCtr":"WXCtr"}],rankItem:[function(e,t,n){"use strict";cc._RF.push(t,"df0f8RK1b1PBKmYfkI/WYfh","rankItem"),Object.defineProperty(n,"__esModule",{value:!0});var o=cc._decorator,a=o.ccclass,i=(o.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._lb_name=null,e._lb_city=null,e._lb_rank=null,e._lb_money=null,e._headImg=null,e}return __extends(e,t),e.prototype.onLoad=function(){this.initNode()},e.prototype.initNode=function(){this._lb_name=this.node.getChildByName("lb_name"),this._lb_city=this.node.getChildByName("lb_city"),this._lb_rank=this.node.getChildByName("lb_rank"),this._lb_money=this.node.getChildByName("lb_money"),this._headImg=this.node.getChildByName("mask").getChildByName("headImg")},e.prototype.setName=function(e){this._lb_name.getComponent(cc.Label).string=e},e.prototype.setCity=function(e){this._lb_city.getComponent(cc.Label).string=e},e.prototype.setRank=function(e){this._lb_rank.getComponent(cc.Label).string=e},e.prototype.setMoney=function(e){this._lb_money.getComponent(cc.Label).string=e},e.prototype.setHeadImg=function(e){if(null!=e&&""!=e){var n=this._headImg.getComponent(cc.Sprite);cc.loader.load({url:e,type:"png"},function(e,t){n.spriteFrame=new cc.SpriteFrame(t)})}},e=__decorate([a],e)}(cc.Component));n.default=i,cc._RF.pop()},{}],rank:[function(e,t,n){"use strict";cc._RF.push(t,"fb738DNWNBIP42w+K3KnAhq","rank"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../Common/AudioManager"),a=e("../../Controller/GameCtr"),i=cc._decorator,l=i.ccclass,c=i.property,r=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._btnClose=null,e._content=null,e.rankItem=null,e}return __extends(e,t),e.prototype.onLoad=function(){this._btnClose=this.node.getChildByName("btn_close"),this._content=this.node.getChildByName("scrollView").getChildByName("view").getChildByName("content"),this.initBtnEvent(this._btnClose)},e.prototype.initBtnEvent=function(e){var t=this;e.on(cc.Node.EventType.TOUCH_END,function(e){"btn_close"==e.target.getName()&&(o.default.getInstance().playSound("audio/btnClose"),t.node.destroy(),a.default.getInstance().getGame().setMaskVisit(!1))})},e.prototype.initRank=function(e){var t=0;for(var n in e)t++;for(var n in this._content.setContentSize(cc.size(800,98*t)),e){var o=cc.instantiate(this.rankItem);o.parent=this._content,o.y=-50-98*Number(n),o.getComponent("rankItem").setRank(e[n].top),o.getComponent("rankItem").setCity(e[n].City),o.getComponent("rankItem").setName(e[n].nick),o.getComponent("rankItem").setMoney(e[n].value),o.getComponent("rankItem").setHeadImg(e[n].Icon)}},__decorate([c(cc.Prefab)],e.prototype,"rankItem",void 0),e=__decorate([l],e)}(cc.Component);n.default=r,cc._RF.pop()},{"../../Common/AudioManager":"AudioManager","../../Controller/GameCtr":"GameCtr"}],redPackage:[function(e,t,n){"use strict";cc._RF.push(t,"9cbddDBRzVFhaQaHVhLKiY9","redPackage"),Object.defineProperty(n,"__esModule",{value:!0});var o=cc._decorator,a=o.ccclass,i=(o.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._state_on=null,e._state_off=null,e._lb_title=null,e}return __extends(e,t),e.prototype.onLoad=function(){this.initNode()},e.prototype.initNode=function(){this._state_on=this.node.getChildByName("state_on"),this._state_off=this.node.getChildByName("state_off"),this._lb_title=this.node.getChildByName("titleFrame").getChildByName("title"),this._state_on.active=!1,this._state_off.active=!1},e.prototype.setTitle=function(e){this._lb_title.getComponent(cc.Label).string=e},e.prototype.setState=function(e){"on"==e?(this._state_on.active=!0,this._state_off.active=!1):"off"==e&&(this._state_on.active=!1,this._state_off.active=!0)},e=__decorate([a],e)}(cc.Component));n.default=i,cc._RF.pop()},{}],role:[function(e,t,n){"use strict";cc._RF.push(t,"ffabdrNTL9E8Je9s+tv9lX0","role"),Object.defineProperty(n,"__esModule",{value:!0});var o,a,i=e("../../Common/AudioManager"),l=cc._decorator,c=l.ccclass;l.property;(a=o||(o={}))[a.CAVE=0]="CAVE",a[a.CACTI=1]="CACTI";var r=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.id=null,e.lb_name=null,e.headImg=null,e.headFrame=null,e}return __extends(e,t),e.prototype.onLoad=function(){},e.prototype.setName=function(e){this.lb_name.getComponent(cc.Label).string=e},e.prototype.setID=function(e){this.id=e},e.prototype.getID=function(){return this.id},e.prototype.setHeadImg=function(e){this.headFrame.active=!0;var n=this.headImg.getComponent(cc.Sprite);cc.loader.load({url:e,type:"png"},function(e,t){n.spriteFrame=new cc.SpriteFrame(t)})},e.prototype.die=function(e,t){void 0===t&&(t=!0),e==o.CAVE?this.node.runAction(cc.sequence(cc.delayTime(.1*Math.floor(3*Math.random())),cc.scaleTo(.2,0),cc.callFunc(function(){i.default.getInstance().playSound("audio/scream"),t?this.node.destroy():(this.node.active=!1,this.node.scale=1,this.node.rotation=0)}.bind(this)))):this.node.runAction(cc.sequence(cc.delayTime(.1*Math.floor(3*Math.random())),cc.spawn(cc.moveBy(.2,cc.p(500*Math.random()-250,200*Math.random()+800)),cc.rotateBy(.2,90*Math.random()-45),cc.scaleTo(.2,.5*Math.floor(Math.random())+.3)),cc.callFunc(function(){i.default.getInstance().playSound("audio/scream"),t?this.node.destroy():(this.node.active=!1,this.node.scale=1,this.node.rotation=0)}.bind(this))))},e=__decorate([c],e)}(cc.Component);n.default=r,cc._RF.pop()},{"../../Common/AudioManager":"AudioManager"}],signIn:[function(e,t,n){"use strict";cc._RF.push(t,"e0c997HjL1AbZ9XNsAmmC9s","signIn"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../Common/AudioManager"),a=e("../../Controller/GameCtr"),i=e("../../Controller/HttpCtr"),l=cc._decorator,c=l.ccclass,r=l.property,s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._btn_close=null,e._btn_getRedPackage=null,e.redPackage=null,e.getRedPackage=null,e}return __extends(e,t),e.prototype.onLoad=function(){this.initNode(),i.default.getLoginAwardList(this.initRedPackages.bind(this))},e.prototype.initNode=function(){this._btn_close=this.node.getChildByName("btn_close"),this._btn_getRedPackage=this.node.getChildByName("btn_getRedPackage"),this.initBtnEvent(this._btn_close),this.initBtnEvent(this._btn_getRedPackage)},e.prototype.initBtnEvent=function(e){var t=this;e.on(cc.Node.EventType.TOUCH_END,function(e){"btn_close"==e.target.getName()?(o.default.getInstance().playSound("audio/btnClose"),a.default.getInstance().getGame().setMaskVisit(!1),t.node.destroy()):"btn_getRedPackage"==e.target.getName()?(o.default.getInstance().playSound("audio/open_panel"),i.default.sign(t.getPackage.bind(t))):"redPackage"==e.target.getName()&&(o.default.getInstance().playSound("audio/open_panel"),i.default.sign(t.getPackage.bind(t)))})},e.prototype.initRedPackages=function(e){console.log("log--------initRedPackages---\x3edata=:",e);for(var t=0;t<7;t++){var n=cc.instantiate(this.redPackage);n.parent=this.node,n.x=t%3*225-225,n.y=280-280*Math.floor(t/3),n.tag=1e3+t,n.getComponent("redPackage").setTitle("第"+(t+1)+"天"),t<e.todaySum?n.getComponent("redPackage").setState("on"):n.getComponent("redPackage").setState("off")}},e.prototype.getPackage=function(e){if(console.log("log data=",e),!this.node.getChildByName("getRedPackage")){var t=cc.instantiate(this.getRedPackage);t.parent=this.node,t.getComponent("getRedPackage").setValue(e.m),t.getComponent("getRedPackage").setSurplusMoney(),a.default.getInstance().getGame().setRealMoney(e.m),this.node.getChildByTag(1e3+e.todaySum-1).getComponent("redPackage").setState("on")}},__decorate([r(cc.Prefab)],e.prototype,"redPackage",void 0),__decorate([r(cc.Prefab)],e.prototype,"getRedPackage",void 0),e=__decorate([c],e)}(cc.Component);n.default=s,cc._RF.pop()},{"../../Common/AudioManager":"AudioManager","../../Controller/GameCtr":"GameCtr","../../Controller/HttpCtr":"HttpCtr"}],toast:[function(e,t,n){"use strict";cc._RF.push(t,"b653bJg+55Ce4dDEEAIKCuo","toast"),Object.defineProperty(n,"__esModule",{value:!0});var o=cc._decorator,a=o.ccclass,i=(o.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._lb_msg=null,e}return __extends(e,t),e.prototype.onLoad=function(){this._lb_msg=this.node.getChildByName("lb_msg")},e.prototype.show=function(e){this._lb_msg.getComponent(cc.Label).string=e},e=__decorate([a],e)}(cc.Component));n.default=i,cc._RF.pop()},{}],ufoAward:[function(e,t,n){"use strict";cc._RF.push(t,"372d5nHoUtOraAgUzirUS6R","ufoAward"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../Common/AudioManager"),i=e("../../Controller/GameCtr"),l=e("../../Common/Util"),a=e("../../Controller/WXCtr"),c=cc._decorator,r=c.ccclass,s=(c.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._btn_close=null,e._btn_get=null,e._lb_bonus=null,e._bonusValue=null,e}return __extends(e,t),e.prototype.onLoad=function(){this._btn_close=this.node.getChildByName("btn_close"),this._btn_get=this.node.getChildByName("btn_get"),this._lb_bonus=this.node.getChildByName("lb_bonus"),this.initEvent(this._btn_close),this.initEvent(this._btn_get),this.initBonusValue()},e.prototype.initEvent=function(e){var n=this;e.on(cc.Node.EventType.TOUCH_END,function(e){if("btn_close"==e.target.getName())n.node.destroy(),i.default.isAudited||(i.default.money+=n._bonusValue,i.default.rich+=n._bonusValue,i.default.getInstance().getGame().playGoldEft()),o.default.getInstance().playSound("audio/btnClose");else if("btn_get"==e.target.getName()){var t=function(){i.default.money+=2*n._bonusValue,i.default.rich+=2*n._bonusValue,i.default.getInstance().getGame().playGoldEft(),n.node.destroy()};if(i.default.vedioTimes<=0){if(!i.default.isAudited)return i.default.getInstance().getGame().showToast("今日视频已看完"),void n.node.destroy();a.default.share({callback:t})}else a.default.offCloseVideo(),a.default.showVideoAd(),a.default.onCloseVideo(function(e){e?t():i.default.getInstance().getGame().showToast("视频未看完，无法领取奖励")});o.default.getInstance().playSound("audio/open_panel")}})},e.prototype.initBonusValue=function(){for(var e=JSON.parse(i.default.getInstance().getCombsUnlock()),t=i.default.manufactureConfig[i.default.ManufactureLevel-1].perBonus/(i.default.manufactureConfig[i.default.ManufactureLevel-1].productTime+i.default.manufactureConfig[i.default.ManufactureLevel-1].transferTime),n=0,o=0;o<e.length;o++)n+=(i.default.combConfig[o].initialIncome+i.default.combConfig[o].incomeMatrix*(e[o].level-1)*e[o].level)/(2*i.default.combConfig[o].baseSpeed);var a=t<=n?t:n;this._bonusValue=Math.floor(300*a),this._lb_bonus.getComponent(cc.Label).string="$"+l.default.formatNumber(Math.floor(300*a))},e=__decorate([r],e)}(cc.Component));n.default=s,cc._RF.pop()},{"../../Common/AudioManager":"AudioManager","../../Common/Util":"Util","../../Controller/GameCtr":"GameCtr","../../Controller/WXCtr":"WXCtr"}],ufo:[function(e,t,n){"use strict";cc._RF.push(t,"c812eR++pxB5YEMBvGDIlgW","ufo"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../Common/AudioManager"),a=e("../../Controller/HttpCtr"),i=e("../../Controller/GameCtr"),l=cc._decorator,c=l.ccclass,r=l.property,s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.ufoAward=null,e.treatureBox=null,e}return __extends(e,t),e.prototype.onLoad=function(){var n=this;this.treatureBox=this.node.getChildByName("treatureBox"),this.node.runAction(cc.sequence(cc.delayTime(3.5),cc.callFunc(function(){n.treatureBox.runAction(cc.sequence(cc.moveTo(.5,cc.p(0,0)).easing(cc.easeElasticOut(3)),cc.callFunc(function(){n.treatureBox.on(cc.Node.EventType.TOUCH_END,function(e){if(o.default.getInstance().playSound("audio/open_panel"),n.treatureBox.active=!1,!cc.find("Canvas").getChildByName("ufoAward")){var t=cc.instantiate(n.ufoAward);t.parent=cc.find("Canvas"),t.setLocalZOrder(1),a.default.openClick(i.default.clickType.ufo)}}),n.treatureBox.runAction(cc.repeatForever(cc.sequence(cc.rotateBy(.1,-10),cc.rotateBy(.2,20),cc.rotateBy(.1,-10),cc.rotateBy(.05,-10),cc.rotateBy(.1,20),cc.rotateBy(.05,-10),cc.delayTime(4))))})))}))),this.node.getChildByName("spine").getComponent(sp.Skeleton).setCompleteListener(function(){n.node.destroy()})},__decorate([r(cc.Prefab)],e.prototype,"ufoAward",void 0),e=__decorate([c],e)}(cc.Component);n.default=s,cc._RF.pop()},{"../../Common/AudioManager":"AudioManager","../../Controller/GameCtr":"GameCtr","../../Controller/HttpCtr":"HttpCtr"}],unlockCombTip:[function(e,t,n){"use strict";cc._RF.push(t,"2b55fz/1CpJhqXVFQR9lx8W","unlockCombTip"),Object.defineProperty(n,"__esModule",{value:!0});var a=e("../../Controller/GameCtr"),i=e("../../Common/AudioManager"),o=cc._decorator,l=o.ccclass,c=o.property,r=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.celebrate=null,e._btn_sure=null,e._bee=null,e._level=null,e}return __extends(e,t),e.prototype.onLoad=function(){var o=this;this._bee=this.node.getChildByName("bee"),this._btn_sure=this.node.getChildByName("btn_sure"),this._btn_sure.on(cc.Node.EventType.TOUCH_END,function(e){i.default.getInstance().playSound("audio/unlock_hive"),a.default.getInstance().getGame().setMaskVisit(!1);var t=a.default.getInstance().getGame().getComb(o._level),n=a.default.getInstance().getGame().getComb(o._level+1);t.getComponent("honeycomb").setUnlock(!0),t.getComponent("honeycomb").upgrade(),n&&n.getComponent("honeycomb").initBtnState(),o.node.destroy()})},e.prototype.init=function(e){this._level=e,this.initBee(),this.showCelebrate()},e.prototype.initBee=function(){var n=this;cc.loader.loadRes("textures/bees/00"+this._level,cc.SpriteFrame,function(e,t){n._bee.getComponent(cc.Sprite).spriteFrame=t,n._bee.scale=4})},e.prototype.showCelebrate=function(){var e=cc.instantiate(this.celebrate);e.parent=cc.find("Canvas"),e.scale=2,e.getChildByName("animation").getComponent(sp.Skeleton).setCompleteListener(function(){e.destroy()})},__decorate([c(cc.Prefab)],e.prototype,"celebrate",void 0),e=__decorate([l],e)}(cc.Component);n.default=r,cc._RF.pop()},{"../../Common/AudioManager":"AudioManager","../../Controller/GameCtr":"GameCtr"}]},{},["AudioManager","GameData","Http","MemoryDetector","UrlConfig","UserManager","Util","ViewManager","head","GameCtr","HttpCtr","WXCtr","ad","award","bubbleMoney","combUpgrade","eft_honey","exchange1","exchange2","exchangeRecord","getRedPackage","goldNotEnough","honeycomb","invite","inviteFriendItem","jar","levelUpgrade","manufactureUpgrade","moreNode","notice","offlineIncome","pfTurntable","rank","rankItem","redPackage","role","signIn","toast","ufo","ufoAward","unlockCombTip","Game","level","manufacture","loading","RankingCell","RankingView","BaseDialog","PopupView","PromptDialog","ToastView"]);
require=function a(c,l,s){function r(t,e){if(!l[t]){if(!c[t]){var o="function"==typeof require&&require;if(!e&&o)return o(t,!0);if(u)return u(t,!0);var n=new Error("Cannot find module '"+t+"'");throw n.code="MODULE_NOT_FOUND",n}var i=l[t]={exports:{}};c[t][0].call(i.exports,function(e){return r(c[t][1][e]||e)},i,i.exports,a,c,l,s)}return l[t].exports}for(var u="function"==typeof require&&require,e=0;e<s.length;e++)r(s[e]);return r}({AudioManager:[function(e,t,o){"use strict";cc._RF.push(t,"55d02b1p5hDgagEsZ4zByL4","AudioManager"),Object.defineProperty(o,"__esModule",{value:!0});var n=cc._decorator,i=n.ccclass,a=(n.property,function(){function e(){this.string=null,this.musicId=null,this.soundId=null,this._musicOn=!0,this._soundOn=!0}return(t=e).getInstance=function(){return null==t.mAudioManager&&(t.mAudioManager=new t),t.mAudioManager},e.prototype.playMusic=function(o,n,i){return void 0===n&&(n=!0),void 0===i&&(i=1),__awaiter(this,void 0,void 0,function(){var t;return __generator(this,function(e){switch(e.label){case 0:if(!o)return[2];e.label=1;case 1:return e.trys.push([1,4,,5]),this.musicPath==o?[3,3]:(null!=this.musicId&&cc.audioEngine.stop(this.musicId),[4,(t=this).play(o,n,i)]);case 2:t.musicId=e.sent(),e.label=3;case 3:return this.musicPath=o,this.musicOn||this.pauseMusic(),[3,5];case 4:return e.sent(),[3,5];case 5:return[2]}})})},e.prototype.pauseMusic=function(){cc.audioEngine.pause(this.musicId)},e.prototype.resumeMusic=function(){cc.audioEngine.resume(this.musicId)},e.prototype.playSoundAsync=function(e,t,o,n){void 0===t&&(t=!1);var i=this.playSound(e,t);if(i){if(o&&n)return void i.then(o,n);n&&i.catch(n)}else n&&n(null)},e.prototype.playSound=function(o,n){return void 0===n&&(n=!1),__awaiter(this,void 0,void 0,function(){var t;return __generator(this,function(e){switch(e.label){case 0:if(!o)return[2];if(!this.soundOn)return[2];e.label=1;case 1:return e.trys.push([1,3,,4]),[4,(t=this).play(o,n)];case 2:return t.soundId=e.sent(),[2,this.soundId];case 3:return e.sent(),[3,4];case 4:return[2]}})})},e.prototype.stopSound=function(e){"number"==typeof e&&cc.audioEngine.stop(e)},e.prototype.stopAll=function(){this.musicPath=null,this.musicId=null,cc.audioEngine.stopAll()},e.prototype.play=function(t,a,c){return void 0===a&&(a=!1),void 0===c&&(c=1),__awaiter(this,void 0,void 0,function(){return __generator(this,function(e){return[2,new Promise(function(n,i){cc.loader.loadRes(t,function(e,t){if(e)cc.error(e),i(e);else{var o=cc.audioEngine.play(t,a,c);n(o)}})})]})})},Object.defineProperty(e.prototype,"musicOn",{get:function(){return this._musicOn},set:function(e){this._musicOn!=e&&((this._musicOn=e)?this.resumeMusic():this.pauseMusic())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"soundOn",{get:function(){return this._soundOn},set:function(e){this._soundOn=e},enumerable:!0,configurable:!0}),e=t=__decorate([i],e);var t}());o.default=a,cc._RF.pop()},{}],BaseDialog:[function(e,t,o){"use strict";cc._RF.push(t,"dfe29FRZ8NPSpj5hr0RuVh2","BaseDialog"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("./PopupView"),i=e("../../Common/Util"),a=cc._decorator,c=a.ccclass,l=(a.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),(o=t).prototype.onLoad=function(){var e=i.default.findChildByName(o.ButtonTag.SURE,this.node);e&&(this._sureButton=e.getComponent(cc.Button)),(e=i.default.findChildByName(o.ButtonTag.CANCEL,this.node))&&(this._cancelButton=e.getComponent(cc.Button)),(e=i.default.findChildByName(o.ButtonTag.CLOSE,this.node))&&(this._closeButton=e.getComponent(cc.Button)),this.initButton(this._sureButton,o.ButtonTag.SURE),this.initButton(this._cancelButton,o.ButtonTag.CANCEL),this.initButton(this._closeButton,o.ButtonTag.CLOSE),this.initData()},t.prototype.initData=function(){},t.prototype.setData=function(e){this._data=e},t.prototype.dismiss=function(){if(this.node.parent){var e=this.node.parent.getComponent(n.default);e?e.dismiss():this.node.destroy()}},t.prototype.onButtonClick=function(e,t){switch(t){case o.ButtonTag.SURE:break;case o.ButtonTag.CANCEL:case o.ButtonTag.CLOSE:this.dismiss()}},t.prototype.initButton=function(e,t){if(cc.isValid(e)){var o=new cc.Component.EventHandler;o.target=this.node,o.component="BaseDialog",o.handler="onButtonClick",o.customEventData=t,e.clickEvents.push(o)}},t.ButtonTag={SURE:"button_sure",CANCEL:"button_cancel",CLOSE:"button_close"},t=o=__decorate([c],t);var o}(cc.Component));o.default=l,cc._RF.pop()},{"../../Common/Util":"Util","./PopupView":"PopupView"}],GameCtr:[function(e,t,o){"use strict";cc._RF.push(t,"ea049dlKOtItKkSXQ54e5Sr","GameCtr"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../Common/AudioManager"),i=e("../Common/UserManager"),a=e("./WXCtr"),c=e("../Common/Http"),l=cc._decorator,s=l.ccclass,r=(l.property,function(){function e(){this.eventTarget=null,t.ins=this,a.default.getLaunchOptionsSync(),a.default.getAuthSetting(),a.default.showShareMenu(),a.default.wxOnLogin(),a.default.getSelfData()}return(t=e).getInstance=function(){return t.ins||(t.ins=new t),t.ins},e.prototype.getAdaptScaleRate=function(){var e=cc.view.getFrameSize(),t=1920*e.width/1080;return e.height/t},e.prototype.initEventTarget=function(){this.eventTarget=new cc.EventTarget},e.prototype.getEventTarget=function(){return this.eventTarget},e.prototype.emitEvent=function(e,t){this.eventTarget.emit(e,t)},e.prototype.addListener=function(e,t){this.eventTarget.on(e,t)},e.prototype.removeListener=function(e){this.eventTarget.off(e)},e.prototype.setGame=function(e){this.mGame=e},e.prototype.setManufacture=function(e){this.mManufacture=e},e.prototype.setLevel=function(e){this.mLevel=e},e.prototype.setCombsUnlock=function(){window.localStorage.setItem("combsUnlock",JSON.stringify(t.combsUnlock))},e.prototype.getCombsUnlock=function(){return JSON.parse(window.localStorage.getItem("combsUnlock"))},e.prototype.setPlayerLevel=function(){window.localStorage.setItem("level",t.level)},e.prototype.setManufactureLevel=function(){window.localStorage.setItem("ManufactureLevel",t.ManufactureLevel)},e.prototype.setCombLevel=function(){window.localStorage.setItem("comblevel",t.comblevel)},e.prototype.getGame=function(){return this.mGame},e.prototype.getManufacture=function(){return this.mManufacture},e.prototype.getLevel=function(){return this.mLevel},e.gotoScene=function(e){cc.director.loadScene(e),n.default.getInstance().stopAll()},e.showEnd=function(){t.gotoScene("End")},e.showStart=function(){t.gotoScene("Start")},e.showStrongest=function(){t.gotoScene("Strongest")},e.showRevive=function(){t.ins},e.startGame=function(){t.score=0,t.gotoScene("Game")},e.showRanking=function(e){t.rankingEntrance=e,t.gotoScene("Ranking")},e.revive=function(){},e.playBgm=function(){},e.addScore=function(e){t.ins&&(t.score+=e)},e.gameOver=function(){t.ins&&a.default.submitScoreToWx(t.score)},e.prototype.saveSelfInfoToLocal=function(e){var t={avatarUrl:e.avatarUrl,city:e.city,country:e.country,gender:e.gender,language:e.language,nickName:e.nickName,province:e.province};window.localStorage.setItem("selfInfo",JSON.stringify(t))},e.prototype.getSelfInfoFromLocal=function(){var e=window.localStorage.getItem("selfInfo");if(e)return JSON.parse(e)},e.shareGroupCheck=function(e,t,o){c.default.send({url:c.default.UrlConfig.SHARE_GROUP,data:{user_id:i.default.user_id,encrypted_data:e,iv:t},success:function(e){console.log("分享到群成功",e),console.log(403==e.code),200==e.code||e.code}})},e.selfInfo=null,e.isAudited=!1,e.reviveTimes=0,e.globalSpeedRate=1,e.incomeRate=1,e.score=0,e.rankingEntrance="Start",e.navigatorData=null,e.challengerData=null,e.challengeSwitch=!1,e.reviveData=null,e.maxPerCombLevel=30,e.money=null,e.honeyValue=0,e.level=null,e.ManufactureLevel=null,e.comblevel=null,e.combsUnlock=null,e.levelMoney=0,e.levelConfig=null,e.manufactureConfig=null,e.combConfig=null,e.otherConfig=null,e=t=__decorate([s],e);var t}());o.default=r,cc._RF.pop()},{"../Common/AudioManager":"AudioManager","../Common/Http":"Http","../Common/UserManager":"UserManager","./WXCtr":"WXCtr"}],Game:[function(e,t,o){"use strict";cc._RF.push(t,"f1f06VxNc1Fi7PAUDkZyb/2","Game"),Object.defineProperty(o,"__esModule",{value:!0});var i=e("../../Controller/GameCtr"),n=e("../../Common/AudioManager"),a=cc._decorator,c=a.ccclass,l=a.property,s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._honeycombContent=null,e._pipelineNode=null,e._glassPipeline=null,e._mask=null,e._combList=[],e.test=null,e.test1=null,e.honeyComb=null,e}return __extends(e,t),e.prototype.onLoad=function(){i.default.getInstance().setGame(this),i.default.getInstance().initEventTarget(),this.initData(),this.initNode(),n.default.getInstance().playMusic("audio/bgMusic")},e.prototype.initData=function(){if(window.localStorage.clear(),window.localStorage.getItem("level")?i.default.level=Number(window.localStorage.getItem("level")):(i.default.level=1,i.default.getInstance().setPlayerLevel()),window.localStorage.getItem("ManufactureLevel")?i.default.ManufactureLevel=Number(window.localStorage.getItem("ManufactureLevel")):(i.default.ManufactureLevel=1,i.default.getInstance().setManufactureLevel()),window.localStorage.getItem("comblevel")?i.default.comblevel=Number(window.localStorage.getItem("comblevel")):(i.default.comblevel=1,i.default.getInstance().setCombLevel()),window.localStorage.getItem("combsUnlock"))i.default.combsUnlock=Number(window.localStorage.getItem("combsUnlock"));else{i.default.combsUnlock=[],i.default.combsUnlock.push(1),i.default.getInstance().setCombsUnlock();var e=i.default.getInstance().getCombsUnlock();console.log("log----------combsUnlock=:",e)}},e.prototype.initNode=function(){this._mask=this.node.getChildByName("mask"),this._honeycombContent=this.node.getChildByName("honeycombNode").getChildByName("scrollView").getChildByName("view").getChildByName("content"),this._pipelineNode=this._honeycombContent.getChildByName("pipelineNode"),this._glassPipeline=this._honeycombContent.getChildByName("glassPipeline"),this._glassPipeline.setLocalZOrder(0),this._pipelineNode.setLocalZOrder(10),this.initComb()},e.prototype.initComb=function(){for(var e=i.default.getInstance().getCombsUnlock(),t=0;t<i.default.comblevel+5;t++){var o=cc.instantiate(this.honeyComb),n=e[t]?e[t]:0;o.tag=i.default.comblevel+t,o.parent=this._honeycombContent,o.setLocalZOrder(2),o.x=60,o.y=-200-408*t,o.getComponent("honeycomb").setLevel(t+1,n),o.getComponent("honeycomb").initBtn(),this._combList.push(o)}},e.prototype.unlockComb=function(){var e=this._honeycombContent.getChildByTag(i.default.comblevel+1);e.getComponent("honeycomb").setCanUnlock(!0),e.getComponent("honeycomb").showUnlockBtn(!0),i.default.comblevel++},e.prototype.getComb=function(e){return this._honeycombContent.getChildByTag(e)},e.prototype.setMaskVisit=function(e){this._mask.active=e},e.prototype.update=function(e){for(var t=0;t<this._combList.length;t++)this._combList[t].getComponent("honeycomb").doWork(e)},__decorate([l(cc.Prefab)],e.prototype,"test",void 0),__decorate([l(cc.Prefab)],e.prototype,"test1",void 0),__decorate([l(cc.Prefab)],e.prototype,"honeyComb",void 0),e=__decorate([c],e)}(cc.Component);o.default=s,cc._RF.pop()},{"../../Common/AudioManager":"AudioManager","../../Controller/GameCtr":"GameCtr"}],HttpCtr:[function(e,t,o){"use strict";cc._RF.push(t,"e7a76N18wxAD6bqHIHxO/KK","HttpCtr"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../Common/Http"),i=e("../Common/UserManager"),a=e("./WXCtr"),c=e("./GameCtr"),l=e("../Common/ViewManager"),s=cc._decorator,r=s.ccclass,u=(s.property,function(){function e(){}return(t=e).login=function(e){console.log("log------------HttpCtr-----LoginCode=:",e),n.default.send({url:n.default.UrlConfig.LOGIN,success:function(e){1==e.ret&&(i.default.user_id=e.data.uid,i.default.voucher=e.data.voucher,t.getUserInfo(),t.getSettingConfig(),a.default.getUserInfo())},data:{code:e}})},e.getShareConfig=function(){n.default.send({url:n.default.UrlConfig.GET_SHARE,success:function(e){console.log("获取分享配置信息",e),a.default.shareTitle=e.data.share_title,a.default.shareImg=e.data.share_img,a.default.setShareAppMessage()},data:{share_type:"index"}})},e.getUserInfo=function(t){void 0===t&&(t=null),console.log("log------uid=:",typeof i.default.user_id),n.default.send({url:n.default.UrlConfig.GET_USERINFO,success:function(e){e.success==n.default.Code.OK&&(i.default.user=e.user,window.localStorage.setItem("money",e.user.money),console.log("log------------UserManager.user=:",e),c.default.chickenCount=e.user.Sum,c.default.joinGameCount=e.user.SumLog,c.default.money=e.user.money,t&&t(e.user))},data:{uid:i.default.user_id,voucher:i.default.voucher}})},e.saveUserInfo=function(e){console.log("log---------------saveUserInfo-----  data=:",e),n.default.send({url:n.default.UrlConfig.SET_USER_DATA,data:{uid:i.default.user_id,voucher:i.default.voucher,encryptedData:e.encryptedData,iv:e.iv},success:function(){console.log("log-----------------上传信息成功------------")}})},e.chanelCheck=function(e,t){n.default.send({url:n.default.UrlConfig.CHANEL_RECORD,data:{user_id:t,channel_id:e.channel_id,cuid:e.cuid,cvoucher:e.cvoucher,cid:e.cid,pid:e.pid},success:function(e){console.log("渠道验证成功",e)}})},e.getSettingConfig=function(){n.default.send({url:n.default.UrlConfig.GET_SETTING,success:function(e){c.default.isAudited=e.ok}})},e.videoCheck=function(e){n.default.send({url:n.default.UrlConfig.VideoOpen,data:{user_id:i.default.user_id,channel_id:e.channel_id,cuid:e.cuid,cvoucher:e.cvoucher,cid:e.cid,pid:e.pid}})},e.shareGroupCheck=function(e,t,o){n.default.send({url:n.default.UrlConfig.SHARE_GROUP,data:{user_id:i.default.user_id,encrypted_data:e,iv:t},success:function(e){1==e.ret?o&&o():0==e.ret&&l.default.toast(e.msg)}})},e.getAdConfig=function(){n.default.send({url:n.default.UrlConfig.ADConfig,success:function(e){console.log("获取广告配置",e),e.data.videoid&&a.default.setVideoAd(e.data.videoid),e.data.advid&&(a.default.bannerId=e.data.advid)},data:{user_id:i.default.user_id}})},e.invitedByFriend=function(e){n.default.send({url:n.default.UrlConfig.INVITED_BY_FRIEND,success:function(){},data:{user_id:i.default.user_id,voucher:i.default.voucher,friend_user_id:e.invite}})},e.getInviteResult=function(e){void 0===e&&(e=null),n.default.send({url:n.default.UrlConfig.INVITE_RESULT,success:function(e){},data:{user_id:i.default.user_id}})},e.getNevigatorData=function(){n.default.send({url:n.default.UrlConfig.GET_NAVIGATOR,success:function(e){e.code==n.default.Code.OK&&(c.default.navigatorData=e.data)},data:{string:"more_games"}})},e.channelGift=function(e){88==e.channel_id&&e.guanzu},e.getLoginAwardList=function(t){void 0===t&&(t=null),n.default.send({url:n.default.UrlConfig.GET_TODAY,success:function(e){e.code==n.default.Code.OK&&t&&t(e)},data:{user_id:i.default.user_id,voucher:i.default.voucher}})},e.sign=function(t){n.default.send({url:n.default.UrlConfig.DO_TODAY,success:function(e){e.code==n.default.Code.OK?t(!0):(l.default.toast(e.msg),t(!1))},data:{user_id:i.default.user_id,voucher:i.default.voucher}})},e.getRankList=function(e,t){n.default.send({url:n.default.UrlConfig.GET_RANK_LIST,success:function(e){e.code==n.default.Code.OK?t(!0):(l.default.toast(e.msg),t(!1))},data:{uid:i.default.user_id,type:e}})},e.getGameStartInfo=function(t){n.default.send({url:n.default.UrlConfig.GET_GAME_START,success:function(e){1==e.ret?t(e.data):l.default.toast(e.msg)},data:{uid:i.default.user_id,voucher:i.default.voucher}})},e.GameStart=function(e){n.default.send({url:n.default.UrlConfig.GAME_START,success:function(e){console.log("log------------GAME_START---res=:",e),1==e.ret?c.default.joinGameCount++:l.default.toast(e.msg)},data:{uid:i.default.user_id,voucher:i.default.voucher}})},e.getTitle=function(t){n.default.send({url:n.default.UrlConfig.GET_TITLE,success:function(e){console.log("log---------getTitle---res=:",e),1==e.ret?(c.default.questionAnswer=e.info.ok,t(e.info.title)):l.default.toast(e.msg)},data:{uid:i.default.user_id,voucher:i.default.voucher}})},e.getGameWin=function(e){n.default.send({url:n.default.UrlConfig.GAME_WIN,success:function(e){1==e.ret?c.default.chickenCount++:l.default.toast(e.msg)},data:{uid:i.default.user_id,voucher:i.default.voucher}})},e.setMoney=function(e){n.default.send({url:n.default.UrlConfig.SET_GOLD_DATA,success:function(e){1==e.ret?console.log("log-----------金币上报成功--------------"):(l.default.toast(e.msg),console.log("log-----------金币上报失败--------------"))},data:{uid:i.default.user_id,voucher:i.default.voucher,money:e}})},e=t=__decorate([r],e);var t}());o.default=u,cc._RF.pop()},{"../Common/Http":"Http","../Common/UserManager":"UserManager","../Common/ViewManager":"ViewManager","./GameCtr":"GameCtr","./WXCtr":"WXCtr"}],Http:[function(e,t,o){"use strict";cc._RF.push(t,"ba804Fwfo1B7pM2bIm/ruPv","Http"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("./UrlConfig"),i=cc._decorator,a=i.ccclass,c=(i.property,function(){function e(){this.isCancel=!1,this.xhr=new XMLHttpRequest,this.xhr.timeout=1e4}return(v=e).send=function(e){var t=e.mountNode,o=void 0===t?null:t,n=e.tag,i=void 0===n?null:n,a=e.url,c=void 0===a?null:a,l=e.data,s=void 0===l?{}:l,r=e.method,u=void 0===r?"POST":r,d=e.success,p=void 0===d?function(e,t){}:d,h=e.error,f=void 0===h?null:h,g=e.async,_=void 0===g||g;if(c){!/^http/.test(c)&&v.rootUrl&&(c=v.rootUrl+c),cc.log("request url:%s method:%s",c,u),s.tk,cc.log(JSON.stringify(s));var m=new v;return m.request({mountNode:o,tag:i,url:c,data:s,method:u,success:p,error:f,async:_}),cc.log("sendsendsendsendsendsendsend",c,u),m}},e.prototype.request=function(e){var t=this,o=e.mountNode,n=void 0===o?null:o,i=e.tag,a=void 0===i?null:i,c=e.url,l=void 0===c?null:c,s=e.data,r=void 0===s?{}:s,u=e.method,d=void 0===u?"GET":u,p=e.success,h=void 0===p?function(e,t){}:p,f=e.error,g=void 0===f?null:f,_=e.async,m=void 0===_||_;d=d||"GET";var v="";for(var b in r)""!=v&&(v+="&"),v+=b+"="+encodeURIComponent(r[b]);"GET"==d&&""!=v&&(-1==l.indexOf("?")&&(l+="?"),l+=v);var y=function(e){t.isCancel?cc.log("request canceled!"):(null==n||cc.isValid(n))&&g&&(g(e,a),g=null)};this.xhr.onreadystatechange=function(){if(4==t.xhr.readyState&&!t.isCancel)if(200<=t.xhr.status&&t.xhr.status<=400){var e=t.xhr.responseText;try{if(cc.log(e),0==e.indexOf("{")&&(e=JSON.parse(e)),null!=n&&!cc.isValid(n))return;h&&h(e,a)}catch(e){cc.error(e)}}else cc.warn("http request problem:"+t.xhr.status),y("连接失败:"+t.xhr.status)},this.xhr.onerror=function(e){cc.error("http request onerror"),y("连接失败，请检查网络")},this.xhr.ontimeout=function(){cc.error("http request ontimeout"),y("连接超时")},this.xhr.open(d,l,m),this.xhr.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),"GET"==d?(cc.log("send Get!!"),this.xhr.send()):"POST"==d?(cc.log("send Post!!"),this.xhr.send(v)):cc.log("[HTTP] no send")},e.prototype.cancel=function(){this.isCancel=!0},e.Code={OK:"300"},e.UrlConfig=n.default,e.rootUrl=v.UrlConfig.rootUrl,e=v=__decorate([a],e);var v}());o.default=c,cc._RF.pop()},{"./UrlConfig":"UrlConfig"}],MemoryDetector:[function(e,t,o){"use strict";cc._RF.push(t,"86461BkJVpNt4ZELh7OE6Sl","MemoryDetector"),Object.defineProperty(o,"__esModule",{value:!0});var n=cc._decorator,i=n.ccclass,a=(n.property,function(){function e(){}return(t=e).showMemoryStatus=function(){if(!cc.sys.isNative&&!t._inited){cc.profiler;cc.director.on(cc.Director.EVENT_AFTER_VISIT,function(){var e=0,t=cc.textureCache._textures;for(var o in t){var n=t[o];e+=n.getPixelWidth()*n.getPixelHeight()*4}var i=cc.textureCache._textureColorsCache;for(var o in i){var a=i[o];for(var c in a){var l=a[c];e+=l.width*l.height*4}}console.log("log-----------------------memory=:",(e/1048576).toFixed(2)+"M")}),t._inited=!0}},e._inited=!1,e=t=__decorate([i],e);var t}());o.MemoryDetector=a,cc._RF.pop()},{}],PopupView:[function(e,t,o){"use strict";cc._RF.push(t,"19031wwCBpBi6olCmXjcj5x","PopupView"),Object.defineProperty(o,"__esModule",{value:!0});var n=cc._decorator,i=n.ccclass,a=(n.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._maskNode=null,e._maskOpacity=0,e._localZOrder=0,e}return __extends(e,t),e.prototype.onLoad=function(){cc.log("PopupView onLoad %s",this.name),this._maskNode=this.node.getChildByName("mask"),this._maskNode&&(this._maskNode.active=this._showMask,this._maskNode.opacity=this._maskOpacity,this._maskNode.on(cc.Node.EventType.TOUCH_START,this.onTouchMask,this),this._maskNode.on(cc.Node.EventType.TOUCH_END,this.onTouchMask,this))},e.prototype.onDestroy=function(){cc.log("PopupView onDestroy %s",this.name),this._maskNode&&(this._maskNode.off(cc.Node.EventType.TOUCH_START,this.onTouchMask,this),this._maskNode.off(cc.Node.EventType.TOUCH_END,this.onTouchMask,this)),this.destroyCallback&&this.destroyCallback(this)},e.prototype.onTouchMask=function(e){e.stopPropagation(),e.type==cc.Node.EventType.TOUCH_END&&this.closeOnTouchOutside&&this.contentNode&&!cc.rectContainsPoint(this.contentNode.getBoundingBoxToWorld(),e.getLocation())&&this.dismiss()},e.prototype.show=function(e){cc.isValid(this)&&cc.isValid(e)&&(this.node.parent=e,this.node.setLocalZOrder(this.localZOrder||0),cc.isValid(this._showActionTarget)&&cc.isValid(this._showAction)&&(this._showActionTarget.stopAllActions(),this._showActionTarget.runAction(this._showAction)))},e.prototype.dismiss=function(){cc.isValid(this.node)&&(cc.isValid(this._dismissActionTarget)&&cc.isValid(this._dismissAction)?(this._dismissActionTarget.stopAllActions(),this._dismissActionTarget.runAction(this._dismissAction)):this.doDismiss())},e.prototype.doDismiss=function(){this.node.destroy()},e.prototype.setMask=function(e,t){this._showMask=e,this._maskOpacity=t},e.prototype.setShowAction=function(e,t){cc.isValid(t)&&cc.isValid(e)&&(this._showAction=e,this._showActionTarget=t)},e.prototype.setDismissAction=function(e,t){var o=this;cc.isValid(t)&&cc.isValid(e)&&(this._dismissAction=cc.sequence(e,cc.callFunc(function(){o.doDismiss()})),this._dismissActionTarget=t)},e.prototype.setOnDestroyCallback=function(e){this.destroyCallback=e},Object.defineProperty(e.prototype,"closeOnTouchOutside",{get:function(){return this._closeOnTouchOutside},set:function(e){this._closeOnTouchOutside=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"closeOnKeyBack",{get:function(){return this._closeOnKeyBack},set:function(e){this._closeOnKeyBack=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"localZOrder",{get:function(){return this._localZOrder},set:function(e){this._localZOrder=e},enumerable:!0,configurable:!0}),e=__decorate([i],e)}(cc.Component));o.default=a,cc._RF.pop()},{}],PromptDialog:[function(e,t,o){"use strict";cc._RF.push(t,"107f6idJYdHi6R3QKRQ4W4g","PromptDialog"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("./BaseDialog"),i=e("../../Common/Util"),a=cc._decorator,c=a.ccclass,l=a.property,s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.promptLabel=null,e._promptText="",e.singleButton=!1,e}return __extends(e,t),e.prototype.onLoad=function(){t.prototype.onLoad.call(this)},e.prototype.initData=function(){var e="确定",t="取消";this._data&&(this.cancelButtonClick=this._data.cancelButtonClick,this.sureButtonClick=this._data.sureButtonClick,this.singleButton=!!this._data.singleButton,"string"==typeof this._data.message&&(this._promptText=this._data.message,this.promptLabel.string=this._promptText),e=this._data.rightText||e,t=this._data.leftText||t),this._sureButton&&i.default.setString(i.default.findChildByName("Label",this._sureButton.node),e),this._cancelButton&&i.default.setString(i.default.findChildByName("Label",this._cancelButton.node),t),this.singleButton&&(cc.isValid(this._sureButton)&&(this._sureButton.node.x=0),cc.isValid(this._cancelButton)&&(this._cancelButton.node.active=!1))},e.prototype.onButtonClick=function(e,t){switch(t){case n.default.ButtonTag.SURE:if(this.sureButtonClick&&this.sureButtonClick())return;this.dismiss();break;case n.default.ButtonTag.CANCEL:if(this.cancelButtonClick&&this.cancelButtonClick())return;this.dismiss();break;case n.default.ButtonTag.CLOSE:this.dismiss()}},__decorate([l(cc.Label)],e.prototype,"promptLabel",void 0),e=__decorate([c],e)}(n.default);o.default=s,cc._RF.pop()},{"../../Common/Util":"Util","./BaseDialog":"BaseDialog"}],RankingCell:[function(e,t,o){"use strict";cc._RF.push(t,"31f9f5AnaRKtZm39HiZkXn2","RankingCell"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../../Common/Util"),i=cc._decorator,a=i.ccclass,c=i.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.sprBg=null,e.sprMedal=null,e.sprHead=null,e.lbRank=null,e.lbName=null,e.lbScore=null,e.medalFrames=[],e}return __extends(e,t),e.prototype.setData=function(e,t){this.setMedal(e),this.createImage(t.Icon),this.lbName.string=n.default.cutstr(t.nick,10),this.lbScore.string=t.value+""},e.prototype.setMedal=function(e){e<3?(this.sprMedal.node.active=!0,this.sprMedal.spriteFrame=this.medalFrames[e],this.lbRank.node.active=!0,this.lbRank.string=e+1):(this.lbRank.node.active=!0,this.lbRank.string=e+1,this.sprMedal.node.active=!1)},e.prototype.setBgColor=function(e){e%=2,this.sprBg.node.color=0==e?cc.hexToColor("#1966EE"):cc.hexToColor("#5990F1")},e.prototype.createImage=function(e){var o=this;if(null!=window.wx)try{var t=wx.createImage();t.onload=function(){try{var e=new cc.Texture2D;e.initWithElement(t),e.handleLoadedTexture(),o.sprHead.spriteFrame=new cc.SpriteFrame(e)}catch(e){cc.log(e),o.sprHead.node.active=!1}},t.src=e}catch(e){cc.log(e),this.sprHead.node.active=!1}else cc.loader.load({url:e,type:"jpg"},function(e,t){o.sprHead.spriteFrame=new cc.SpriteFrame(t)})},__decorate([c(cc.Sprite)],e.prototype,"sprBg",void 0),__decorate([c(cc.Sprite)],e.prototype,"sprMedal",void 0),__decorate([c(cc.Sprite)],e.prototype,"sprHead",void 0),__decorate([c(cc.Label)],e.prototype,"lbRank",void 0),__decorate([c(cc.Label)],e.prototype,"lbName",void 0),__decorate([c(cc.Label)],e.prototype,"lbScore",void 0),__decorate([c([cc.SpriteFrame])],e.prototype,"medalFrames",void 0),e=__decorate([a],e)}(cc.Component);o.default=l,cc._RF.pop()},{"../../Common/Util":"Util"}],RankingView:[function(e,t,o){"use strict";cc._RF.push(t,"ccb460UQXtHubIzenjgDSa0","RankingView"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../../Controller/GameCtr"),i=e("../../Controller/WXCtr"),a=e("../../Common/Http"),c=e("../../Common/UserManager"),l=cc._decorator,s=l.ccclass,r=l.property,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.ndRanking=null,e.sprFreindRankScroll=null,e.ndWorldScr=null,e.ndWorldContent=null,e.pfCell=null,e.friendToggle=null,e.worldToggle=null,e.ndAuthTip=null,e.tex=null,e.isGetWorldList=!1,e.isGetFriendList=!1,e}return __extends(e,t),e.prototype.onLoad=function(){n.default.getInstance().setRanking(this)},e.prototype.start=function(){null!=window.wx&&(this.tex=new cc.Texture2D,window.sharedCanvas.width=900,window.sharedCanvas.height=1200),this.initRank()},e.prototype.initRank=function(){this.showWorldRanking()},e.prototype.back=function(){this.showAuthTip(!1),this.isGetFriendList=!1,i.default.closeFriendRanking(),n.default.gotoScene(n.default.rankingEntrance)},e.prototype.showWorldRanking=function(){if(console.log("点击了世界排行榜"),this.ndWorldScr.active=!0,this.sprFreindRankScroll.node.active=!1,!i.default.wxLoginSuccess)return console.log("未授权，引导获取授权！！！"),void this.showAuthTip(!0);this.isGetWorldList||this.getWorldRankingData()},e.prototype.showAuthTip=function(e){void 0===e&&(e=!1),(this.ndAuthTip.active=e)?i.default.userInfoBtn.show():i.default.userInfoBtn.hide()},e.prototype.getWorldRankingData=function(){var t=this;console.log("获取世界排行数据???"),a.default.send({url:a.default.UrlConfig.GET_RANK_LIST,success:function(e){console.log("getWorldList response == ",e),t.isGetWorldList=!0,t.setWorldList(e.data,e.metop,e.metopvalue)},data:{uid:c.default.user_id,voucher:c.default.voucher}})},e.prototype.setWorldList=function(e,t,o){},e.prototype.showFreindRanking=function(){this.sprFreindRankScroll.node.active=!0,this.ndWorldScr.active=!1,this.showAuthTip(!1),this.isGetFriendList||(this.isGetFriendList=!0,i.default.showFriendRanking())},e.prototype.onCloseRank=function(){this.ndRanking.active=!1},e.prototype._updateSubDomainCanvas=function(){null!=window.sharedCanvas&&null!=this.tex&&this.ndRanking.active&&this.sprFreindRankScroll.node.active&&(this.tex.initWithElement(window.sharedCanvas),this.tex.handleLoadedTexture(),this.sprFreindRankScroll.spriteFrame=new cc.SpriteFrame(this.tex))},e.prototype.update=function(){this._updateSubDomainCanvas()},__decorate([r(cc.Node)],e.prototype,"ndRanking",void 0),__decorate([r(cc.Sprite)],e.prototype,"sprFreindRankScroll",void 0),__decorate([r(cc.Node)],e.prototype,"ndWorldScr",void 0),__decorate([r(cc.Node)],e.prototype,"ndWorldContent",void 0),__decorate([r(cc.Prefab)],e.prototype,"pfCell",void 0),__decorate([r(cc.Toggle)],e.prototype,"friendToggle",void 0),__decorate([r(cc.Toggle)],e.prototype,"worldToggle",void 0),__decorate([r(cc.Node)],e.prototype,"ndAuthTip",void 0),e=__decorate([s],e)}(cc.Component);o.default=u,cc._RF.pop()},{"../../Common/Http":"Http","../../Common/UserManager":"UserManager","../../Controller/GameCtr":"GameCtr","../../Controller/WXCtr":"WXCtr"}],ToastView:[function(e,t,o){"use strict";cc._RF.push(t,"1a52bS/p5tF7oHdbdFrndcM","ToastView"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("./PopupView"),i=cc._decorator,a=i.ccclass,c=i.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.messageLabel=null,e._showTime=1.5,e}return __extends(e,t),e.prototype.onLoad=function(){t.prototype.onLoad.call(this)},e.prototype.setMessage=function(e){this.message=e||"提示",this.messageLabel.string=e},e.prototype.setFontSize=function(e){void 0===e&&(e=0),0<e&&(this.messageLabel.fontSize=e,this.messageLabel.lineHeight=e)},e.prototype.setTextColor=function(e){void 0===e&&(e=null),e&&(this.messageLabel.node.color=e)},e.prototype.show=function(e){t.prototype.show.call(this,e),this.unscheduleAllCallbacks(),this.schedule(this.delayDismiss.bind(this),this._showTime)},e.prototype.delayDismiss=function(){this.dismiss()},__decorate([c(cc.Label)],e.prototype,"messageLabel",void 0),e=__decorate([a],e)}(n.default);o.default=l,cc._RF.pop()},{"./PopupView":"PopupView"}],UrlConfig:[function(e,t,o){"use strict";cc._RF.push(t,"aa7e0ISVFNKh4mRZZ+qgLW/","UrlConfig"),Object.defineProperty(o,"__esModule",{value:!0});var n=cc._decorator,i=n.ccclass,a=(n.property,function(){function e(){}return e.rootUrl="https://api.2-00.cn/api_game_chiji",e.LOGIN="/publicapi.php?method=getuid",e.SET_USER_DATA="/publicapi.php?method=setUserData",e.DISPOSE_USER="publicapi.php?method=disposeUser",e.GET_USERINFO="/publicapi.php?method=getUserInfo",e.GET_SETTING="/weixinapi.php?method=getsetting",e.GET_GOLD="/weixinapi.php?method=getGoldByShare",e.GET_SHARE="/weixinapi.php?method=getShare",e.ADD_FRIEND="/weixinapi.php?method=addFriend",e.SHARE_FRIEND_RESULT="/weixinapi.php?method=friendResult",e.RECEIVE_PRIZE="/weixinapi.php?method=receivePrize",e.GET_RANDOM_USER="/weixinapi.php?method=getRandomUser",e.REVIVECONFIG="/weixinapi.php?method=reviveConfig",e.CHANEL_RECORD="/weixinapi.php?method=addChannelRecord",e.ADConfig="/weixinapi.php?method=getAdv",e.VideoOpen="/weixinapi.php?method=openAdv",e.SET_GOLD_DATA="/weixinapi.php?method=setData",e.SET_FORMID="/weixinapi.php?method=setformId",e.INVITED_BY_FRIEND="/weixinapi.php?method=addSeek",e.SEEK_LOG="/weixinapi.php?method=SeekLog",e.SHARE_GROUP="/weixinapi.php?method=shareGroup",e.GET_RANK_LIST="/weixinapi.php?method=getRankList",e.MONEY_TOTICES="/weixinapi.php?method=moneynotices",e.GET_TODAY="/weixinapi.php?method=getToday",e.DO_TODAY="/weixinapi.php?method=doToday",e.GAME_START="/weixinapi.php?method=GameStart",e.GET_GAME_START="/weixinapi.php?method=getGameStart",e.GET_TITLE="/weixinapi.php?method=getTitle",e.GAME_WIN="/weixinapi.php?method=GameWin",e=__decorate([i],e)}());o.default=a,cc._RF.pop()},{}],UserManager:[function(e,t,o){"use strict";cc._RF.push(t,"1c7810/IFZD5LG6YNJImyPA","UserManager"),Object.defineProperty(o,"__esModule",{value:!0});var n=cc._decorator,i=n.ccclass,a=(n.property,function(){function e(){}return t=e,Object.defineProperty(e,"user",{get:function(){return t._user},set:function(e){t._user=e},enumerable:!0,configurable:!0}),Object.defineProperty(e,"user_id",{get:function(){return null!=t._user_id?t._user_id:null},set:function(e){t._user_id=e},enumerable:!0,configurable:!0}),Object.defineProperty(e,"voucher",{get:function(){return t._voucher},set:function(e){t._voucher=e},enumerable:!0,configurable:!0}),e._user=null,e._user_id=null,e._voucher=null,e=t=__decorate([i],e);var t}());o.default=a,cc._RF.pop()},{}],Util:[function(e,t,o){"use strict";cc._RF.push(t,"2190bA9XapLCKNN06NNZmnm","Util"),Object.defineProperty(o,"__esModule",{value:!0});var n=cc._decorator,i=n.ccclass,a=(n.property,function(){function e(){}return(a=e).loadImg=function(o,e){cc.loader.load({url:e,type:"png"},function(e,t){o.spriteFrame=new cc.SpriteFrame(t)})},e.findChildByName=function(e,t){if(!e||!t||!t.children)return null;var o=t.getChildByName(e);if(o)return o;for(var n=t.children,i=0;i<n.length;i++)if(o=a.findChildByName(e,n[i]))return o;return null},e.setString=function(e,t){if("number"==typeof t&&(t+=""),t=t||"",e instanceof cc.Node){var o=e.getComponent(cc.Label);if(cc.isValid(o))return void(o.string=t);var n=e.getComponent(cc.EditBox);cc.isValid(n)&&(n.string=t)}else cc.isValid(e)&&(e.string=t)},e.cutstr=function(e,t){var o,n=0,i=new String;o=e.length;for(var a=0;a<o;a++){var c=e.charAt(a);if(n++,4<escape(c).length&&n++,i=i.concat(c),t<n)return i=i.concat("...")}return e},e.getCurrTimeYYMMDD=function(){var e=new Date;return e.getFullYear()+"-"+(e.getMonth()+1<10?"0"+(e.getMonth()+1):e.getMonth()+1)+"-"+(e.getDate()<10?"0"+e.getDate():e.getDate())},e.formatNumber=function(e){return 1e9<e?(e/1e9).toFixed(1)+"B":1e6<e?(e/1e6).toFixed(1)+"M":1e3<e?(e/1e3).toFixed(1)+"K":e},e=a=__decorate([i],e);var a}());o.default=a,cc._RF.pop()},{}],ViewManager:[function(e,t,o){"use strict";cc._RF.push(t,"a4f81RHNkJOZ7DAr9pb05OX","ViewManager"),Object.defineProperty(o,"__esModule",{value:!0});var x=e("../ui/view/PopupView"),n=e("../ui/view/PromptDialog"),c=e("../UI/view/ToastView"),i=cc._decorator,a=i.ccclass,l=i.property,s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.popupView=null,e.promptDialog=null,e.toastView=null,e.popupViewList=new Array,e.popupViewMap={},e}return __extends(e,t),(U=e).prototype.onLoad=function(){U.mViewManager=this,cc.game.addPersistRootNode(this.node),cc.systemEvent.on(cc.SystemEvent.EventType.KEY_DOWN,this.onKeyDown,this)},e.prototype.onDestroy=function(){cc.systemEvent.off(cc.SystemEvent.EventType.KEY_DOWN,this.onKeyDown,this)},e.prototype.onKeyDown=function(e){if(e.keyCode==cc.KEY.back)for(;0<this.popupViewList.length;){var t=this.popupViewList.pop();if(this.removeFromMap(t),cc.isValid(t)){t.dismiss();break}}},e.prototype.onPopupDestroy=function(e){this.removeFromMap(e),this.removeFromArray(e)},e.prototype.show=function(e,t){void 0===t&&(t=null),cc.isValid(e)&&(e.closeOnKeyBack&&this.popupViewList.push(e),U.getPopupView(e.name)!=e&&U.dismiss(e.name),e.name&&(this.popupViewMap[e.name]=e),e.setOnDestroyCallback(this.onPopupDestroy.bind(this)),e.show(t||U.getRoot()))},e.prototype.removeFromMap=function(e){e&&e.name&&(this.popupViewMap[e.name]=null)},e.prototype.removeFromArray=function(e){if(e){var t=this.popupViewList.indexOf(e);0<=t&&this.popupViewList.splice(t,1)}},e.checkValid=function(){return!!U.mViewManager},e.show=function(e){var t=e.node,o=void 0===t?null:t,n=e.name,i=void 0===n?null:n,a=e.parent,c=void 0===a?null:a,l=e.localZOrder,s=void 0===l?0:l,r=(e.data,e.closeOnTouchOutside),u=void 0!==r&&r,d=e.closeOnKeyBack,p=void 0!==d&&d,h=e.mask,f=void 0===h||h,g=e.maskOpacity,_=void 0===g?200:g,m=e.transitionShow,v=void 0!==m&&m,b=e.transitionDismiss,y=void 0===b||b,C=e.showAction,w=void 0===C?null:C,T=e.showActionTarget,N=void 0===T?null:T,S=e.dismissAction,M=void 0===S?null:S,k=e.dismissActionTarget,B=void 0===k?null:k;if(cc.isValid(o)&&U.checkValid()&&cc.isValid(U.mViewManager.popupView)){var L=o.getComponent(x.default);if(L)L.contentNode=L.contentNode||L.node.getChildByName("ContentNode")||L.node;else(L=cc.instantiate(U.mViewManager.popupView).getComponent(x.default)).contentNode=o,L.contentNode.parent=L.node;return U.showPopup({popupView:L,name:i,parent:c,localZOrder:s,closeOnTouchOutside:u,closeOnKeyBack:p,mask:f,maskOpacity:_,transitionShow:v,transitionDismiss:y,showAction:w,showActionTarget:N,dismissAction:M,dismissActionTarget:B}),L}},e.showPopup=function(e){var t=e.popupView,o=void 0===t?null:t,n=e.name,i=void 0===n?null:n,a=e.parent,c=void 0===a?null:a,l=e.localZOrder,s=void 0===l?0:l,r=e.closeOnTouchOutside,u=void 0!==r&&r,d=e.closeOnKeyBack,p=void 0!==d&&d,h=e.mask,f=void 0===h||h,g=e.maskOpacity,_=void 0===g?200:g,m=e.transitionShow,v=void 0!==m&&m,b=e.transitionDismiss,y=void 0===b||b,C=e.showAction,w=void 0===C?null:C,T=e.showActionTarget,N=void 0===T?null:T,S=e.dismissAction,M=void 0===S?null:S,k=e.dismissActionTarget,B=void 0===k?null:k;U.checkValid()&&cc.isValid(o)&&(u&&(f=!0),o.setMask(f,_),N=N||o.contentNode,v&&cc.isValid(N)&&(w=w||cc.sequence(cc.callFunc(function(){N.scale=0}),cc.scaleTo(.1,1,1).easing(cc.easeOut(3)))),o.setShowAction(w,N),B=B||o.contentNode,y&&(M=M||null),o.setDismissAction(M,B),o.closeOnTouchOutside=u,o.closeOnKeyBack=p,o.name=i||o.name,o.localZOrder=s||0,U.mViewManager.show(o,c))},e.dismissPopup=function(e){e&&(cc.isValid(e)&&e.dismiss(),U.checkValid()&&(U.mViewManager.removeFromMap(e),U.mViewManager.removeFromArray(e)))},e.dismiss=function(e){if(e&&U.checkValid()){var t=U.mViewManager.popupViewMap[e];cc.isValid(t)&&t.dismiss(),U.mViewManager.popupViewMap[e]=null,U.mViewManager.removeFromMap(t),U.mViewManager.removeFromArray(t)}},e.isShow=function(e){return!!e&&(!!U.checkValid()&&cc.isValid(U.mViewManager.popupViewMap[e]))},e.getPopupView=function(e){return e&&U.checkValid()?cc.isValid(U.mViewManager.popupViewMap[e])?U.mViewManager.popupViewMap[e]:(U.mViewManager.popupViewMap[e]&&(U.mViewManager.popupViewMap[e]=null),null):null},e.createDialog=function(e){if(U.checkValid());},e.showPromptDialog=function(e){if(U.checkValid()){var t=cc.instantiate(U.mViewManager.promptDialog);t.getComponent(n.default).setData(e),U.show({node:t,name:e.name||U.View.PromptDialog,localZOrder:U.LocalZOrder.PromptDialog,mask:!0,maskOpacity:200,transitionShow:!0})}},e.toast=function(e,t,o){if(void 0===t&&(t=cc.color(255,255,255)),void 0===o&&(o=0),U.checkValid()){var n,i,a=U.getPopupView(U.View.ToastView);a instanceof c.default?(n=a.node,i=a):i=(n=cc.instantiate(U.mViewManager.toastView)).getComponent(c.default),i.setMessage(e),i.setFontSize(o),i.setTextColor(t),U.show({node:n,name:U.View.ToastView,localZOrder:U.LocalZOrder.Toast,mask:!1,transitionDismiss:!1})}},e.getRoot=function(){return cc.director.getScene().getChildByName("Canvas")},e.LocalZOrder={PromptDialog:1e3,Loading:1001,Toast:1002},e.View={PromptDialog:"PromptDialog",ToastView:"ToastView"},__decorate([l(cc.Prefab)],e.prototype,"popupView",void 0),__decorate([l(cc.Prefab)],e.prototype,"promptDialog",void 0),__decorate([l(cc.Prefab)],e.prototype,"toastView",void 0),e=U=__decorate([a],e);var U}(cc.Component);o.default=s,cc._RF.pop()},{"../UI/view/ToastView":"ToastView","../ui/view/PopupView":"PopupView","../ui/view/PromptDialog":"PromptDialog"}],WXCtr:[function(e,t,o){"use strict";cc._RF.push(t,"e659baZaMVDzKDI5WvkuwsU","WXCtr"),Object.defineProperty(o,"__esModule",{value:!0});var n,i,a=e("../Common/Http"),c=e("./HttpCtr"),l=e("./GameCtr"),s=cc._decorator,r=s.ccclass;s.property;(i=n||(n={}))[i.Get_SelfData=0]="Get_SelfData",i[i.Get_FriendData=1]="Get_FriendData",i[i.Get_GroupData=2]="Get_GroupData",i[i.Submit_SelfScore=3]="Submit_SelfScore",i[i.Compare_Score=4]="Compare_Score",i[i.Show_WholeRanking=5]="Show_WholeRanking",i[i.Show_OverRanking=6]="Show_OverRanking",i[i.Close_WholeRanking=7]="Close_WholeRanking",i[i.Close_OverRanking=8]="Close_OverRanking";var u=375,d=667,p=function(){function e(){}return(o=e).getLaunchOptionsSync=function(){null!=window.wx&&(o.launchOption=window.wx.getLaunchOptionsSync(),console.log("获取启动参数",o.launchOption),wx.getFileSystemManager().getSavedFileList({success:function(e){console.log("获取本地缓存文件列表成功",e)}}))},e.getSystemInfo=function(){null!=window.wx&&wx.getSystemInfo({success:function(e){console.log("获取设备信息成功",e),o.screenWidth=e.screenWidth,o.screenHeight=e.screenHeight,o.widthRatio=o.screenWidth/u,o.heightRatio=o.screenHeight/d}})},e.exitGame=function(){null!=window.wx&&wx.exitMiniProgram()},e.getAuthSetting=function(){null!=window.wx&&wx.getSetting({success:function(e){var t=e.authSetting;!0===t["scope.userInfo"]?o.authed=!0:(t["scope.userInfo"],o.authed=!1)}})},e.createUserInfoBtn=function(){null!=window.wx&&(console.log("创建用户授权按钮"),wx.getSystemInfo({success:function(e){console.log("获取设备信息成功",e),e.model,o.screenWidth=e.screenWidth,o.screenHeight=e.screenHeight,o.widthRatio=o.screenWidth/u,o.heightRatio=o.screenHeight/d}}),o.userInfoBtn=wx.createUserInfoButton({type:"image",image:"res/raw-assets/resources/textures/authBtn.png",style:{left:o.screenWidth/2-80,top:o.screenHeight/2-40+50*o.heightRatio,width:160*o.widthRatio,height:40*o.heightRatio}}))},e.onUserInfoBtnTap=function(t){o.userInfoBtn.onTap(function(e){console.log("UserInfoBtn tap",e),e.userInfo&&(o.wxGetUsrInfo(),t&&t(!0),o.userInfoBtn.destroy())})},e.wxGetUsrInfo=function(){null!=window.wx&&window.wx.getUserInfo({lang:"zh_CN",withCredentials:!0,success:function(e){e.userInfo;o.authed=!0,c.default.saveUserInfo(e),l.default.getInstance().saveSelfInfoToLocal(e.userInfo),l.default.getInstance().emitEvent("getSelfInfoSuccess",null),l.default.getInstance().emitEvent("getSelfInfoSuccess1",null)},fail:function(e){console.log("获取自己信息失败",e)}})},e.wxOnLogin=function(){null!=window.wx&&window.wx.login({success:function(e){console.log("微信登录返回值res",e),c.default.login(e.code),o.getShareConfig(),o.getReviveData()}})},e.getUserInfo=function(){window.wx.getUserInfo({lang:"zh_CN",success:function(e){var t=e.userInfo;t.avatarUrl,t.city,t.country,t.gender,t.language,t.nickName,t.openId,t.province;l.default.getInstance().saveSelfInfoToLocal(e.userInfo),l.default.getInstance().emitEvent("getSelfInfoSuccess",null),o.wxLoginSuccess=!0,o.authed=!0,c.default.saveUserInfo(e)},fail:function(e){console.log("获取自己信息失败",e)}})},e.getShareConfig=function(){a.default.send({url:a.default.UrlConfig.GET_SHARE,success:function(e){console.log("获取分享配置信息",e),o.shareTitle=e.data.share_title,o.shareImg=e.data.share_img,wx.onShareAppMessage(function(){return{title:o.shareTitle,imageUrl:o.shareImg}})},data:{share_type:"index"}})},e.getReviveData=function(){a.default.send({url:a.default.UrlConfig.REVIVECONFIG,success:function(e){console.log("获取复活配置信息",e),l.default.reviveData=e.data}})},e.showShareMenu=function(){null!=window.wx&&(console.log("显示分享按钮！！！！！！"),window.wx.showShareMenu({withShareTicket:!0,success:function(e){},fail:function(e){},complete:function(e){}}))},e.setShareAppMessage=function(){null!=window.wx&&wx.onShareAppMessage(function(){return{title:o.shareTitle,imageUrl:o.shareImg}})},e.onShow=function(t){if(void 0===t&&(t=null),console.log("监听小游戏回到前台的事件"),null!=window.wx){var e=function(e){t&&t()};window.wx.onShow(e),o.onShowCall=e}},e.offShow=function(){null!=window.wx&&(console.log("取消监听小游戏回到前台的事件"),window.wx.offShow(o.onShowCall))},e.previewImg=function(e){null!=window.wx&&wx.previewImage({urls:[e],success:function(e){console.log("预览图片成功回调",e)}})},e.setVideoAd=function(e){null!=window.wx&&(o.videoAd=wx.createRewardedVideoAd({adUnitId:e}),o.videoAd.onLoad(function(){console.log("banner 广告加载成功")}),o.videoAd.load(),o.videoAd.onError(function(e){console.log(e)}))},e.showVideoAd=function(){o.videoAd&&o.videoAd.show()},e.onCloseVideo=function(t){var e=function(e){e&&e.isEnded||void 0===e?(t(!0),c.default.videoCheck(o.launchOption.query)):t(!1)};o.videoAd.onClose(e),o.videoAdCallback=e},e.offCloseVideo=function(){o.videoAdCallback&&o.videoAd.offClose(o.videoAdCallback)},e.createBannerAd=function(e){if(void 0===e&&(e=null),null!=window.wx){o.bannerAd&&o.bannerAd.destroy();var t=100;e&&(t=e),o.bannerAd=wx.createBannerAd({adUnitId:o.bannerId,style:{left:0,top:o.screenHeight-t*o.heightRatio,width:375*o.widthRatio}}),o.bannerAd.show()}},e.hideBannerAd=function(){o.bannerAd&&o.bannerAd.destroy()},e.share=function(t){null!=window.wx&&window.wx.shareAppMessage({title:o.shareTitle,imageUrl:o.shareImg,query:"",success:function(e){"revive"==t?(l.default.getInstance().emitEvent("shareSuccess",null),null!=e.shareTickets&&0<e.shareTickets.length&&(console.log("分享到群成功"),o.getWxShareInfo(e.shareTickets[0],"revive"))):(l.default.powerValue++,l.default.getInstance().emitEvent("morePowerSuccess",null),l.default.getInstance().emitEvent("morePowerSuccess1",null))}})},e.getWxShareInfo=function(e,t){null!=window.wx&&window.wx.getShareInfo({shareTicket:e,success:function(e){console.log("获取分享信息成功！！！",e),c.default.shareGroupCheck(e.encryptedData,e.iv,t)}})},e.getStorageData=function(e,t){void 0===t&&(t=null),null!=window.wx&&wx.getStorage({key:e,success:function(e){t&&t(e.data)},fail:function(e){t&&t(null)}})},e.setStorageData=function(e,t){null!=window.wx&&wx.setStorage({key:e,data:t,success:function(e){}})},e.gotoOther=function(e){console.log("data = ",e),e.appid&&wx.navigateToMiniProgram({appId:e.appid,path:e.path,success:function(e){console.log("打开成功")},fail:function(e){wx.showToast({title:"打开失败!",icon:"none"})}})},e.customService=function(){wx.openCustomerServiceConversation({success:function(){o.exitGame()}})},e.getSelfData=function(){null!=window.wx&&window.wx.postMessage({messageType:n.Get_SelfData})},e.getGroupRankingData=function(){console.log("获取群数据！！！！！！"),null!=window.wx&&window.wx.shareAppMessage({title:o.shareTitle,imageUrl:o.shareImg,success:function(e){console.log("分享成功回调返回值",e),null!=e.shareTickets&&0<e.shareTickets.length&&window.wx.postMessage({messageType:n.Get_GroupData,LIST_KEY:"Rank_Data",shareTicket:e.shareTickets[0]})}})},e.getFriendRankingData=function(){null!=window.wx&&window.wx.postMessage({messageType:n.Get_FriendData,LIST_KEY:"Rank_Data"})},e.showOverRanking=function(){null!=window.wx&&(console.log("主域发送消息____显示结束好友排行"),window.wx.postMessage({messageType:n.Show_OverRanking}))},e.closeFriendEndRanking=function(){null!=window.wx&&(console.log("主域发送消息____关闭End好友排行"),window.wx.postMessage({messageType:n.Close_OverRanking}))},e.showFriendRanking=function(){null!=window.wx&&(console.log("主域发送消息____显示好友排行"),window.wx.postMessage({messageType:n.Show_WholeRanking}))},e.closeFriendRanking=function(){null!=window.wx&&(console.log("主域发送消息____关闭好友排行"),window.wx.postMessage({messageType:n.Close_WholeRanking}))},e.submitScoreToWx=function(e){null!=window.wx&&(console.log("主域发送消息____提交分数"),window.wx.postMessage({messageType:n.Submit_SelfScore,LIST_KEY:"Rank_Data",score:e}))},e.saveImge=function(e,t){null!=window.wx&&wx.downloadFile({url:e,success:function(e){console.log("下载图片成功",e),wx.saveImageToPhotosAlbum({filePath:e.tempFilePath,success:function(e){console.log("图片保存到本地相册成功",e),t&&t(!0)}})}})},e.wxLoginSuccess=!1,e.onShowCall=null,e.videoAd=null,e.videoAdCallback=null,e.bannerAd=null,e.bannerId=null,e.authed=!1,e=o=__decorate([r],e);var o}();o.default=p,cc._RF.pop()},{"../Common/Http":"Http","./GameCtr":"GameCtr","./HttpCtr":"HttpCtr"}],bee:[function(e,t,o){"use strict";cc._RF.push(t,"4fc24zKYd1DHYrslHrzPVYI","bee"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../../Controller/GameCtr"),i=cc._decorator,a=i.ccclass,c=i.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._stage1=null,e._stage2=null,e._level=null,e.jobPos=null,e._honey=null,e._honeyEft=null,e._combsUnlock=null,e._speed=1,e.step=1,e.interval=0,e.beeAtlas=null,e.honeyEft=null,e}return __extends(e,t),e.prototype.onLoad=function(){this._stage1=this.node.getChildByName("stage1"),this._stage2=this.node.getChildByName("stage2"),this._stage1.active=!0,this._stage2.active=!1,this.node.rotation=-90,this._honey=cc.instantiate(this.honeyEft),this._honey.parent=this.node.parent.parent,this._honey.active=!1,this._speed=this.node.parent.parent.getComponent("honeycomb").isSpeedUp()?n.default.combConfig[n.default.comblevel-1].baseSpeed*(1-n.default.combConfig[n.default.comblevel-1].speedMatrix):n.default.combConfig[n.default.comblevel-1].baseSpeed},e.prototype.init=function(e,t){this._level=e,this.jobPos=t,this.initBeeFrame(),this.fly()},e.prototype.initBeeFrame=function(){var e=this.beeAtlas.getSpriteFrame(this._level+"-1"),t=this.beeAtlas.getSpriteFrame(this._level+"-2");this._stage1.getComponent(cc.Sprite).spriteFrame=e,this._stage2.getComponent(cc.Sprite).spriteFrame=t},e.prototype.fly=function(){var e=this;this.node.runAction(cc.repeatForever(cc.sequence(cc.delayTime(.2),cc.callFunc(function(){e._stage1.active=!0,e._stage2.active=!1}),cc.delayTime(.2),cc.callFunc(function(){e._stage1.active=!1,e._stage2.active=!0}))))},e.prototype.playHoneyEft=function(){this._honey.active=!0,this._honey.x=this.jobPos.x,this._honey.y=this.jobPos.y,this._honey.getComponent("eft_honey").play()},e.prototype.updateHoneyValue=function(){this._combsUnlock=n.default.getInstance().getCombsUnlock(),n.default.honeyValue+=n.default.combConfig[this._level-1].initialIncome+this._combsUnlock[this._level-1]*n.default.combConfig[this._level-1].incomeMatrix,n.default.getInstance().getManufacture().setHoneyValue()},__decorate([c(cc.SpriteAtlas)],e.prototype,"beeAtlas",void 0),__decorate([c(cc.Prefab)],e.prototype,"honeyEft",void 0),e=__decorate([a],e)}(cc.Component);o.default=l,cc._RF.pop()},{"../../Controller/GameCtr":"GameCtr"}],bubbleMoney:[function(e,t,o){"use strict";cc._RF.push(t,"05d679GjZhA36ojonrE6hi4","bubbleMoney"),Object.defineProperty(o,"__esModule",{value:!0});var n=cc._decorator,i=n.ccclass,a=(n.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.onLoad=function(){this.doAction(),this.node.active=!0},t.prototype.setMoney=function(e){this.node.getComponent(cc.Label).string="+￥"+e},t.prototype.doAction=function(){var e=this;this.node.runAction(cc.sequence(cc.moveBy(.3,cc.p(0,80)),cc.delayTime(.2),cc.fadeOut(.1),cc.delayTime(.5),cc.fadeIn(0),cc.moveBy(0,cc.p(0,-80)),cc.callFunc(function(){e.node.destroy()})))},t=__decorate([i],t)}(cc.Component));o.default=a,cc._RF.pop()},{}],combUpgrade:[function(e,t,o){"use strict";cc._RF.push(t,"40cb7pLa8JN2axI5Uo8PUBD","combUpgrade"),Object.defineProperty(o,"__esModule",{value:!0});var n=cc._decorator,i=n.ccclass,a=(n.property,e("../../Common/AudioManager")),c=e("../../Controller/GameCtr"),l=e("../../Common/Util"),s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._lb_des=null,e._btn_close=null,e._btn_upgrade=null,e._lb_cost=null,e._level=null,e._unlockNum=null,e._interval=0,e}return __extends(e,t),e.prototype.onLoad=function(){this.initNode()},e.prototype.initNode=function(){this._lb_des=this.node.getChildByName("lb_des"),this._btn_close=this.node.getChildByName("btn_close"),this.initBtnEvent(this._btn_close)},e.prototype.init=function(e,t){this._level=e,this._unlockNum=t,this._lb_des.getComponent(cc.Label).string=this._unlockNum+1,this.showCells(),this.showSpeed(),this.showhoneyProduction(),this.showUpgrade(),this.updateBtnState(),this.initBtnEvent(this._btn_upgrade)},e.prototype.showCells=function(){var e=this.node.getChildByName("cells"),t=e.getChildByName("lb_value"),o=e.getChildByName("lb_add");t.getComponent(cc.Label).string=""+this._unlockNum,o.getComponent(cc.Label).string="+1"},e.prototype.showSpeed=function(){var e=this.node.getChildByName("speed"),t=e.getChildByName("lb_value"),o=e.getChildByName("lb_add");t.getComponent(cc.Label).string="100%",o.getComponent(cc.Label).string="+0%"},e.prototype.showhoneyProduction=function(){var e=this.node.getChildByName("honeyProduction"),t=e.getChildByName("lb_value"),o=e.getChildByName("lb_add");t.getComponent(cc.Label).string=""+l.default.formatNumber(c.default.combConfig[this._level-1].initialIncome+c.default.combConfig[this._level-1].incomeMatrix*(this._unlockNum-1)),o.getComponent(cc.Label).string="+"+l.default.formatNumber(c.default.combConfig[this._level-1].incomeMatrix)},e.prototype.showUpgrade=function(){var e=this.node.getChildByName("upgrade");this._btn_upgrade=e.getChildByName("btn_upgrade"),this._lb_cost=this._btn_upgrade.getChildByName("lb_cost"),this._lb_cost.getComponent(cc.Label).string="￥"+l.default.formatNumber(c.default.combConfig[this._level-1].levelUpCost+c.default.combConfig[this._level-1].upMatrix*this._unlockNum)},e.prototype.initBtnEvent=function(e){var t=this;e.on(cc.Node.EventType.TOUCH_END,function(e){if("btn_close"==e.target.getName())t.node.destroy(),c.default.getInstance().getGame().setMaskVisit(!1),a.default.getInstance().playSound("audio/btnClose");else if("btn_upgrade"==e.target.getName()){if(!t._btn_upgrade.getComponent(cc.Button).interactable)return;if(a.default.getInstance().playSound("audio/btn_click"),c.default.getInstance().getGame().getComb(t._level).getComponent("honeycomb").upgrade(),t._unlockNum++,t._lb_des.getComponent(cc.Label).string=t._unlockNum+1,t._unlockNum==c.default.maxPerCombLevel)return t._btn_upgrade.getComponent(cc.Button).interactable=!1,void(t._lb_cost.getComponent(cc.Label).string="已满级");t.showCells(),t.showSpeed(),t.showhoneyProduction(),t.showUpgrade(),t.updateBtnState()}})},e.prototype.updateBtnState=function(){c.default.money<c.default.combConfig[this._level-1].levelUpCost+c.default.combConfig[this._level-1].upMatrix*this._unlockNum?this._btn_upgrade.getComponent(cc.Button).interactable=!1:this._btn_upgrade.getComponent(cc.Button).interactable=!0},e.prototype.update=function(e){this._btn_upgrade.getComponent(cc.Button).interactable||this._unlockNum>=c.default.maxPerCombLevel||(this._interval+=e,.5<=this._interval&&(this.updateBtnState(),this._interval=0))},e.prototype.start=function(){},e=__decorate([i],e)}(cc.Component);o.default=s,cc._RF.pop()},{"../../Common/AudioManager":"AudioManager","../../Common/Util":"Util","../../Controller/GameCtr":"GameCtr"}],eft_honey:[function(e,t,o){"use strict";cc._RF.push(t,"c0ef1c0uxNHpYalCG2KuUPj","eft_honey"),Object.defineProperty(o,"__esModule",{value:!0});var n=cc._decorator,i=n.ccclass,a=(n.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._aniNode=null,e._ani=null,e._gold=null,e._honey=null,e}return __extends(e,t),e.prototype.onLoad=function(){this._aniNode=this.node.getChildByName("eft"),this._gold=this.node.getChildByName("gold"),this._honey=this.node.getChildByName("honey"),this._aniNode.active=!1,this._gold.active=!1,this._honey.active=!1,this._gold.scale=.5,this._ani=this._aniNode.getComponent(cc.Animation),this._ani.on("finished",this.onFinish.bind(this))},e.prototype.play=function(){this.bubbleGold(),this._aniNode.active=!0,this._ani.play()},e.prototype.onFinish=function(){this._aniNode.active=!1},e.prototype.bubbleGold=function(){this._gold.active=!0,this._gold.runAction(cc.sequence(cc.moveBy(.7,cc.p(0,70)),cc.delayTime(.3),cc.callFunc(function(){this._gold.active=!1,this._gold.y-=70}.bind(this))))},e=__decorate([i],e)}(cc.Component));o.default=a,cc._RF.pop()},{}],head:[function(e,t,o){"use strict";cc._RF.push(t,"de329DY9UtH75t9OgB25nWT","head"),Object.defineProperty(o,"__esModule",{value:!0});var n=cc._decorator,i=n.ccclass,a=(n.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.setHead=function(e){var t=this.node.getChildByName("mask").getChildByName("headImg").getComponent(cc.Sprite);this.loadImg(t,e)},t.prototype.loadImg=function(o,e){null!=e&&""!=e&&cc.loader.load({url:e,type:"png"},function(e,t){o.spriteFrame=new cc.SpriteFrame(t)})},t=__decorate([i],t)}(cc.Component));o.default=a,cc._RF.pop()},{}],honeycomb:[function(e,t,o){"use strict";cc._RF.push(t,"416201V29VMn5BZAtBlGiaj","honeycomb"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../../Controller/GameCtr"),i=e("../../Common/AudioManager"),a=cc._decorator,c=a.ccclass,l=a.property,s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._level=null,e._unlockNum=null,e._lb_level=null,e._btn_upgrade=null,e._word_unlock=null,e._word_levelUp=null,e._word_levelFull=null,e._combsUnlock=null,e._totalComb=null,e._beeNode=null,e._canUnlock=!1,e._speedUpTime=-1,e._combPosArr=[],e._interval=0,e._speed=1,e.bee=null,e.unlockcomb=null,e.combUpgrade=null,e.bubbleHoney=null,e}return __extends(e,t),e.prototype.onLoad=function(){this.initData(),this.initNode(),this._combsUnlock=n.default.getInstance().getCombsUnlock()},e.prototype.initData=function(){for(var e=0;e<10;e++)for(var t=0;t<3;t++)t%2==0?this._combPosArr.push(cc.p(75*e-358,19-60*t)):this._combPosArr.push(cc.p(75*e-397,19-60*t))},e.prototype.initNode=function(){this._beeNode=this.node.getChildByName("beeNode"),this._lb_level=this.node.getChildByName("lb_level"),this._totalComb=this.node.getChildByName("totalComb"),this._btn_upgrade=this.node.getChildByName("btn_upgrade"),this._word_unlock=this._btn_upgrade.getChildByName("word_unlock"),this._word_levelUp=this._btn_upgrade.getChildByName("word_LeveUP"),this._word_levelFull=this._btn_upgrade.getChildByName("word_levelFull"),this._beeNode.setLocalZOrder(2)},e.prototype.setLevel=function(e,t){this._level=e,this._unlockNum=t,this._lb_level.getComponent(cc.Label).string=e+"";for(var o=0;o<t;o++)this.unlockComb(o);this.updateBtnState(),this.initEvent()},e.prototype.setCanUnlock=function(e){this._canUnlock=e},e.prototype.initBtn=function(){this.initBtnEvent(this._btn_upgrade),this.initBtnEvent(this._totalComb)},e.prototype.initBtnEvent=function(e){var o=this;e.on(cc.Node.EventType.TOUCH_END,function(e){if("btn_upgrade"==e.target.getName()){if(cc.find("Canvas").getChildByName("combUpgrade"))return;var t=cc.instantiate(o.combUpgrade);t.parent=cc.find("Canvas"),t.getComponent("combUpgrade").init(o._level,o._unlockNum),t.y=-1218,t.runAction(cc.moveBy(.4,cc.p(0,1218)).easing(cc.easeElasticOut(3))),n.default.getInstance().getGame().setMaskVisit(!0),i.default.getInstance().playSound("audio/btn_click")}else"totalComb"==e.target.getName()&&(o._speedUpTime=Date.now())})},e.prototype.upgrade=function(){0==this._unlockNum&&(n.default.combsUnlock[this._level-1]=0),this.unlockComb(this._unlockNum),n.default.money-=n.default.combConfig[this._level-1].levelUpCost+n.default.combConfig[this._level-1].upMatrix*this._unlockNum,n.default.getInstance().getLevel().setMoney(),this._unlockNum++,n.default.combsUnlock[this._level-1]++,n.default.getInstance().setCombsUnlock(),this.updateBtnState(),this._combsUnlock=n.default.getInstance().getCombsUnlock()},e.prototype.unlockComb=function(e){var t=cc.instantiate(this.unlockcomb),o=cc.instantiate(this.bee);t.parent=this.node,o.parent=this._beeNode,t.setLocalZOrder(0),o.setLocalZOrder(1),t.x=this._combPosArr[e].x,t.y=this._combPosArr[e].y,o.x=1e3+this._combPosArr[e].x,o.y=this._combPosArr[e].y,o.getComponent("bee").init(this._level,this._combPosArr[e])},e.prototype.showBtn=function(){0==this._unlockNum?this.showUnlockBtn(this._canUnlock):this._unlockNum>=n.default.maxPerCombLevel?this.showFullFillBtn():(this._word_levelFull.active=!1,this._word_unlock.active=!1,this._word_levelUp.active=!0,this._combsUnlock=n.default.getInstance().getCombsUnlock(),n.default.money>=n.default.combConfig[this._level-1].levelUpCost+n.default.combConfig[this._level-1].upMatrix*this._combsUnlock[this._level-1]?this._btn_upgrade.getComponent(cc.Button).interactable=!0:this._btn_upgrade.getComponent(cc.Button).interactable=!1)},e.prototype.showFullFillBtn=function(){this._word_unlock.active=!1,this._word_levelUp.active=!1,this._word_levelFull.active=!0,this._btn_upgrade.getComponent(cc.Button).interactable=!1},e.prototype.showUnlockBtn=function(e){this._btn_upgrade.active=e,this._word_unlock.active=!0,this._word_levelUp.active=!1,this._word_levelFull.active=!1,this._btn_upgrade.getComponent(cc.Button).interactable=e},e.prototype.initEvent=function(){},e.prototype.onMoneyUpdate=function(){},e.prototype.doBubbleHoney=function(){var e=cc.instantiate(this.bubbleHoney);e.parent=this.node.parent,e.x=20*(Math.random()-.5)-500,e.y=this.node.y-50,e.runAction(cc.sequence(cc.moveTo(.4*this._level,cc.p(e.x,0)),cc.callFunc(function(){e.destroy()})))},e.prototype.isSpeedUp=function(){return 0<this._speedUpTime},e.prototype.updateHoneyValue=function(){n.default.honeyValue+=n.default.combConfig[this._level-1].initialIncome+this._combsUnlock[this._level-1]*n.default.combConfig[this._level-1].incomeMatrix,n.default.getInstance().getManufacture().setHoneyValue()},e.prototype.updateBtnState=function(){0==this._unlockNum?n.default.level>=n.default.combConfig[this._level-1].needLevel?this.showUnlockBtn(!0):this.showUnlockBtn(!1):this._unlockNum<n.default.maxPerCombLevel?(this._word_unlock.active=!1,this._word_levelUp.active=!0,n.default.money>=n.default.combConfig[this._level-1].levelUpCost+n.default.combConfig[this._level-1].upMatrix*this._unlockNum?this._btn_upgrade.getComponent(cc.Button).interactable=!0:this._btn_upgrade.getComponent(cc.Button).interactable=!1):this.showFullFillBtn()},e.prototype.doWork=function(e){if(this._interval+=e,0<this._speedUpTime&&1<=(Date.now()-this._speedUpTime)/1e3&&(this._speedUpTime=-1),.1<=this._interval){this.updateBtnState(),this._speed=0<this._speedUpTime?n.default.combConfig[n.default.comblevel-1].baseSpeed*(1-n.default.combConfig[n.default.comblevel-1].speedMatrix):n.default.combConfig[n.default.comblevel-1].baseSpeed;for(var t=0;t<this._beeNode.children.length;t++)1==this._beeNode.children[t].getComponent("bee").step&&(this._beeNode.children[t].x-=1e3/(60*this._speed/n.default.globalSpeedRate)*6,Math.floor(this._beeNode.children[t].x-this._beeNode.children[t].getComponent("bee").jobPos.x)<5&&(this.doBubbleHoney(),this.updateHoneyValue(),this._beeNode.children[t].x=this._beeNode.children[t].getComponent("bee").jobPos.x,this._beeNode.children[t].getComponent("bee").playHoneyEft(),this._beeNode.children[t].getComponent("bee").step++)),2==this._beeNode.children[t].getComponent("bee").step&&(this._beeNode.children[t].rotation<-45?this._beeNode.children[t].rotation-=2700/(90/n.default.globalSpeedRate*(1-n.default.combConfig[n.default.comblevel-1].speedMatrix)):this._beeNode.children[t].rotation-=8100/(90/n.default.globalSpeedRate*(1-n.default.combConfig[n.default.comblevel-1].speedMatrix)),Math.abs(this._beeNode.children[t].rotation+270)<8100/(90/n.default.globalSpeedRate*(1-n.default.combConfig[n.default.comblevel-1].speedMatrix))&&(this._beeNode.children[t].rotation=-270,this._beeNode.children[t].getComponent("bee").step++)),3==this._beeNode.children[t].getComponent("bee").step&&(this._beeNode.children[t].x+=1e3/(60*this._speed/n.default.globalSpeedRate)*6,Math.abs(this._beeNode.children[t].x-this._beeNode.children[t].getComponent("bee").jobPos.x-1e3)<=1e3/(60*this._speed/n.default.globalSpeedRate)*6&&(this._beeNode.children[t].rotation=-90,this._beeNode.children[t].x=this._beeNode.children[t].getComponent("bee").jobPos.x+1e3,this._beeNode.children[t].getComponent("bee").step=1));this._interval=0}},__decorate([l(cc.Prefab)],e.prototype,"bee",void 0),__decorate([l(cc.Prefab)],e.prototype,"unlockcomb",void 0),__decorate([l(cc.Prefab)],e.prototype,"combUpgrade",void 0),__decorate([l(cc.Prefab)],e.prototype,"bubbleHoney",void 0),e=__decorate([c],e)}(cc.Component);o.default=s,cc._RF.pop()},{"../../Common/AudioManager":"AudioManager","../../Controller/GameCtr":"GameCtr"}],levelUpgrade:[function(e,t,o){"use strict";cc._RF.push(t,"eef43DCv9JOsKuckFSf1Gct","levelUpgrade"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../../Common/Util"),i=e("../../Controller/GameCtr"),a=e("../../Common/AudioManager"),c=cc._decorator,l=c.ccclass,s=(c.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._btn_upgrade=null,e._btn_close=null,e._lb_bonus=null,e._interval=0,e}return __extends(e,t),e.prototype.onLoad=function(){this._btn_close=this.node.getChildByName("btn_close"),this._btn_upgrade=this.node.getChildByName("btn_upgrade"),this._lb_bonus=this._btn_upgrade.getChildByName("lb_bonus"),this._lb_bonus.getComponent(cc.Label).string="￥"+n.default.formatNumber(i.default.levelConfig[i.default.level-1].award),this.initBtn(this._btn_close),this.initBtn(this._btn_upgrade),this.showBtn()},e.prototype.initBtn=function(e){var t=this;e.on(cc.Node.EventType.TOUCH_END,function(e){"btn_close"==e.target.getName()?a.default.getInstance().playSound("audio/btnClose"):"btn_upgrade"==e.target.getName()&&t._btn_upgrade.getComponent(cc.Button).interactable&&(i.default.getInstance().getLevel().upgrade(),a.default.getInstance().playSound("audio/btn_click")),t.node.destroy(),i.default.getInstance().getGame().setMaskVisit(!1)})},e.prototype.showBtn=function(){i.default.levelMoney<i.default.levelConfig[i.default.level-1].need?this._btn_upgrade.getComponent(cc.Button).interactable=!1:this._btn_upgrade.getComponent(cc.Button).interactable=!0},e.prototype.update=function(e){this._btn_upgrade.getComponent(cc.Button).interactable||(this._interval+=e,.5<=this._interval&&(this.showBtn(),this._interval=0))},e.prototype.start=function(){},e=__decorate([l],e)}(cc.Component));o.default=s,cc._RF.pop()},{"../../Common/AudioManager":"AudioManager","../../Common/Util":"Util","../../Controller/GameCtr":"GameCtr"}],level:[function(e,t,o){"use strict";cc._RF.push(t,"6103fx89L1DrJnsjs3q0z35","level"),Object.defineProperty(o,"__esModule",{value:!0});var n=cc._decorator,i=n.ccclass,a=n.property,c=e("../../Common/AudioManager"),l=e("../../Controller/GameCtr"),s=e("../../Common/Util"),r=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.levelUpgrade=null,e.lb_level=null,e.lb_money=null,e.lb_time=null,e.btn_upgrade=null,e.btn_rank=null,e.icon_Arrow=null,e.progress=null,e.currentTime=null,e}return __extends(e,t),e.prototype.onLoad=function(){l.default.getInstance().setLevel(this),this.initNode(),this.updateTime()},e.prototype.initNode=function(){this.lb_level=this.node.getChildByName("lb_level"),this.lb_money=this.node.getChildByName("lb_money"),this.lb_time=this.node.getChildByName("lb_time"),this.btn_upgrade=this.node.getChildByName("btn_upgrade"),this.btn_rank=this.node.getChildByName("btn_rank"),this.icon_Arrow=this.node.getChildByName("icon_arrow"),this.progress=this.node.getChildByName("progress"),this.icon_Arrow.active=!1,this.progress.getComponent(cc.ProgressBar).progress=0,this.lb_money.getComponent(cc.Label).string=0,this.initBtnEvent(this.btn_upgrade),this.initBtnEvent(this.btn_rank),this.setLevel(),this.showBtnUpGrade()},e.prototype.initBtnEvent=function(e){var o=this;e.on(cc.Node.EventType.TOUCH_END,function(e){if("btn_upgrade"==e.target.getName()){if(cc.find("Canvas").getChildByName("levelUpgrade"))return;var t=cc.instantiate(o.levelUpgrade);t.parent=cc.find("Canvas"),t.y=-1218,t.runAction(cc.moveBy(.4,cc.p(0,1218)).easing(cc.easeElasticOut(3))),l.default.getInstance().getGame().setMaskVisit(!0),c.default.getInstance().playSound("audio/btn_click")}else e.target.getName()})},e.prototype.upgrade=function(){l.default.money+=l.default.levelConfig[l.default.level-1].award,l.default.levelMoney=0,this.setMoney(),this.showBtnUpGrade(),l.default.level+=1,this.setLevel(),l.default.getInstance().setPlayerLevel(),this.progress.getComponent(cc.ProgressBar).progress=0},e.prototype.setLevel=function(){this.lb_level.getComponent(cc.Label).string="Lv"+l.default.level,this.hideArrow(),l.default.combConfig[l.default.comblevel].needLevel==l.default.level&&l.default.getInstance().getGame().unlockComb()},e.prototype.setMoney=function(){this.lb_money.getComponent(cc.Label).string=s.default.formatNumber(l.default.money),this.showBtnUpGrade()},e.prototype.updateLevelProgress=function(){console.log("log------------------GameCtr.levelMoney   need=:",l.default.levelMoney,l.default.levelConfig[l.default.level-1].need),this.progress.getComponent(cc.ProgressBar).progress=l.default.levelMoney/l.default.levelConfig[l.default.level-1].need},e.prototype.showArrowAction=function(){this.icon_Arrow.active=!0,this.icon_Arrow.runAction(cc.repeatForever(cc.sequence(cc.scaleTo(.15,1.1),cc.callFunc(function(){this.icon_Arrow.scale=1}.bind(this)))))},e.prototype.hideArrow=function(){this.icon_Arrow.active=!1,this.icon_Arrow.stopAllActions()},e.prototype.updateTime=function(){this.currentTime=new Date(Date.now()),this.currentTime.getMinutes()<10?this.lb_time.getComponent(cc.Label).string=this.currentTime.getHours()+":0"+this.currentTime.getMinutes():this.lb_time.getComponent(cc.Label).string=this.currentTime.getHours()+":"+this.currentTime.getMinutes(),this.scheduleOnce(this.updateTime.bind(this),30)},e.prototype.showBtnUpGrade=function(){l.default.levelMoney>=l.default.levelConfig[l.default.level-1].need?this.enabledBtn(!0):this.enabledBtn(!1)},e.prototype.enabledBtn=function(e){this.btn_upgrade.getComponent(cc.Button).interactable=e},__decorate([a(cc.Prefab)],e.prototype,"levelUpgrade",void 0),e=__decorate([i],e)}(cc.Component);o.default=r,cc._RF.pop()},{"../../Common/AudioManager":"AudioManager","../../Common/Util":"Util","../../Controller/GameCtr":"GameCtr"}],loading:[function(e,t,o){"use strict";cc._RF.push(t,"0b7913O/QlNjLISQVO2P7o9","loading"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../../Controller/GameCtr"),i=cc._decorator,a=i.ccclass,c=(i.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._progress=null,e._configTotalCount=4,e._configIndex=0,e}return __extends(e,t),e.prototype.onLoad=function(){this._progress=this.node.getChildByName("progress"),this.loadResource()},e.prototype.loadResource=function(){cc.loader.loadResDir("textures",this.progressCallback.bind(this),this.completeCallback.bind(this))},e.prototype.progressCallback=function(e,t,o){this._progress.getComponent(cc.ProgressBar).progress=e/t},e.prototype.completeCallback=function(){this.loadConfigs()},e.prototype.loadConfigs=function(){this.loadLevelConfig(),this.loadmanufacture(),this.loadCombConfig(),this.loadOtherConfig()},e.prototype.loadLevelConfig=function(){var o=this;cc.loader.loadRes("config/level",function(e,t){e||(n.default.levelConfig=t,o.checkLoadConfigOver())})},e.prototype.loadmanufacture=function(){var o=this;cc.loader.loadRes("config/manufacture",function(e,t){e||(n.default.manufactureConfig=t,o.checkLoadConfigOver())})},e.prototype.loadCombConfig=function(){var o=this;cc.loader.loadRes("config/comb",function(e,t){e||(n.default.combConfig=t,o.checkLoadConfigOver())})},e.prototype.loadOtherConfig=function(){var o=this;cc.loader.loadRes("config/other",function(e,t){e||(n.default.otherConfig=t,o.checkLoadConfigOver())})},e.prototype.checkLoadConfigOver=function(){this._configIndex++,this._configIndex==this._configTotalCount&&cc.director.loadScene("Game")},e=__decorate([a],e)}(cc.Component));o.default=c,cc._RF.pop()},{"../../Controller/GameCtr":"GameCtr"}],manufactureUpgrade:[function(e,t,o){"use strict";cc._RF.push(t,"26ee5KMbq9KT5d5w6ZGfISn","manufactureUpgrade"),Object.defineProperty(o,"__esModule",{value:!0});var n=cc._decorator,i=n.ccclass,a=(n.property,e("../../Common/AudioManager")),c=e("../../Controller/GameCtr"),l=e("../../Common/Util"),s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.lb_des=null,e._btn_close=null,e._btn_upgrade=null,e._lb_cost=null,e._interval=0,e}return __extends(e,t),e.prototype.onLoad=function(){this.initNode()},e.prototype.initNode=function(){this.lb_des=this.node.getChildByName("lb_des"),this._btn_close=this.node.getChildByName("btn_close"),this.lb_des.getComponent(cc.Label).string=c.default.ManufactureLevel+1,this.showHoneyProfit(),this.showSpeed(),this.showCapacity(),this.showUpgrade(),this.initBtnEvent(this._btn_close),this.initBtnEvent(this._btn_upgrade),this.showBtn()},e.prototype.showHoneyProfit=function(){var e=this.node.getChildByName("honeyProfit"),t=e.getChildByName("lb_value"),o=e.getChildByName("lb_add");t.getComponent(cc.Label).string="￥"+l.default.formatNumber(c.default.manufactureConfig[c.default.ManufactureLevel-1].perBonus),o.getComponent(cc.Label).string="+￥"+l.default.formatNumber(c.default.manufactureConfig[c.default.ManufactureLevel].perBonus-c.default.manufactureConfig[c.default.ManufactureLevel-1].perBonus)},e.prototype.showSpeed=function(){var e=this.node.getChildByName("speed"),t=e.getChildByName("lb_value"),o=e.getChildByName("lb_add");t.getComponent(cc.Label).string=""+l.default.formatNumber(c.default.manufactureConfig[c.default.ManufactureLevel-1].speed),o.getComponent(cc.Label).string=("+"+(c.default.manufactureConfig[c.default.ManufactureLevel].speed-c.default.manufactureConfig[c.default.ManufactureLevel-1].speed)).substr(0,5)},e.prototype.showCapacity=function(){var e=this.node.getChildByName("capacity"),t=e.getChildByName("lb_value"),o=e.getChildByName("lb_add");t.getComponent(cc.Label).string=""+l.default.formatNumber(c.default.manufactureConfig[c.default.ManufactureLevel-1].perBonus),o.getComponent(cc.Label).string="+"+l.default.formatNumber(c.default.manufactureConfig[c.default.ManufactureLevel].perBonus-c.default.manufactureConfig[c.default.ManufactureLevel-1].perBonus)},e.prototype.showUpgrade=function(){var e=this.node.getChildByName("upgrade");this._btn_upgrade=e.getChildByName("btn_upgrade"),this._lb_cost=this._btn_upgrade.getChildByName("lb_cost"),this.lb_des.getComponent(cc.Label).string=c.default.ManufactureLevel+1,this._lb_cost.getComponent(cc.Label).string="￥"+l.default.formatNumber(c.default.manufactureConfig[c.default.ManufactureLevel-1].cost)},e.prototype.initBtnEvent=function(e){var t=this;e.on(cc.Node.EventType.TOUCH_END,function(e){if("btn_close"==e.target.getName())t.node.destroy(),c.default.getInstance().getGame().setMaskVisit(!1),a.default.getInstance().playSound("audio/btnClose");else if("btn_upgrade"==e.target.getName()){if(!t._btn_upgrade.getComponent(cc.Button).interactable)return;c.default.getInstance().getManufacture().upgrade(),a.default.getInstance().playSound("audio/btn_click"),t.lb_des.getComponent(cc.Label).string=c.default.ManufactureLevel+1,t.showHoneyProfit(),t.showSpeed(),t.showCapacity(),t.showUpgrade(),t.showBtn()}})},e.prototype.update=function(e){this._btn_upgrade.getComponent(cc.Button).interactable||(this._interval+=e,.5<=this._interval&&(this.showBtn(),this._interval=0))},e.prototype.showBtn=function(){c.default.money>=c.default.manufactureConfig[c.default.ManufactureLevel-1].cost?this._btn_upgrade.getComponent(cc.Button).interactable=!0:this._btn_upgrade.getComponent(cc.Button).interactable=!1},e.prototype.start=function(){},e=__decorate([i],e)}(cc.Component);o.default=s,cc._RF.pop()},{"../../Common/AudioManager":"AudioManager","../../Common/Util":"Util","../../Controller/GameCtr":"GameCtr"}],manufacture:[function(e,t,o){"use strict";cc._RF.push(t,"275a4HhEyhKo51/C8/9e3GH","manufacture"),Object.defineProperty(o,"__esModule",{value:!0});var n=cc._decorator,i=n.ccclass,a=n.property,c=e("../../Common/AudioManager"),l=e("../../Controller/GameCtr"),s=e("../../Common/Util"),r=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.jar_black=null,e.jar_yellow=null,e.manufactureUpgrade=null,e.bubbleMoney=null,e._lb_honey=null,e._lb_upSpeedTime=null,e._lb_doubleTime=null,e._btn_upgrade=null,e._btn_upSpeed=null,e._btn_doubleIncome=null,e._icon_arrow=null,e._timeCount=-1,e._timeCount1=-1,e._speed=1,e._isWorking=!1,e._mask=null,e._speedUpTime=-1,e._upLine=null,e._downLine=null,e._plug=null,e._pulleyList=[],e._jarNode=null,e._doubleTime=0,e._speedTime=0,e}return __extends(e,t),e.prototype.onLoad=function(){l.default.getInstance().setManufacture(this),this.initNode()},e.prototype.initNode=function(){this._lb_honey=this.node.getChildByName("lb_honey"),this._lb_upSpeedTime=this.node.getChildByName("lb_upSpeedTime"),this._lb_doubleTime=this.node.getChildByName("lb_doubleTime"),this._btn_upgrade=this.node.getChildByName("btn_upgrade"),this._btn_upSpeed=this.node.getChildByName("btn_speedUp"),this._btn_doubleIncome=this.node.getChildByName("btn_boubleIncome"),this._mask=this.node.getChildByName("mask"),this._icon_arrow=this.node.getChildByName("icon_arrow"),this._upLine=this.node.getChildByName("upline"),this._downLine=this.node.getChildByName("downline"),this._plug=this.node.getChildByName("plug"),this._jarNode=this.node.getChildByName("jarNode");for(var e=this.node.getChildByName("pulleyNode"),t=0;t<6;t++){var o=e.getChildByName("pulley"+t);this._pulleyList.push(o)}this._plug.setLocalZOrder(1),this._lb_upSpeedTime.active=!1,this._lb_doubleTime.active=!1,this._btn_doubleIncome.getComponent(cc.Button).interactable=!1,this._btn_upSpeed.active=!1,this.initBtnEvent(this._btn_upgrade),this.initBtnEvent(this._mask),this.initBtnEvent(this._btn_upSpeed),this.initBtnEvent(this._btn_doubleIncome),this.showBtn()},e.prototype.setHoneyValue=function(){this._lb_honey.getComponent(cc.Label).string=s.default.formatNumber(l.default.honeyValue)},e.prototype.doWork=function(){var e=this;if(l.default.honeyValue-l.default.manufactureConfig[l.default.ManufactureLevel-1].perBonus<0)this._isWorking=!1;else{this._isWorking=!0;var t=cc.instantiate(this.jar_black);this._speed=0<this._speedUpTime?l.default.manufactureConfig[l.default.ManufactureLevel-1].speed:1,t.parent=this._jarNode,t.x=-203,t.y=545,this._plug.runAction(cc.sequence(cc.scaleTo(.2/this._speed*l.default.globalSpeedRate,.8),cc.scaleTo(.1/this._speed*l.default.globalSpeedRate,1),cc.delayTime((l.default.manufactureConfig[l.default.ManufactureLevel-1].productTime-.2/this._speed*l.default.globalSpeedRate-.1/this._speed*l.default.globalSpeedRate)/this._speed*l.default.globalSpeedRate))),t.runAction(cc.sequence(cc.delayTime(.3),cc.moveTo(.2,cc.p(-203,365)),cc.delayTime(l.default.manufactureConfig[l.default.ManufactureLevel-1].transferTime/(this._speed*l.default.globalSpeedRate)),cc.callFunc(function(){t.removeFromParent(),l.default.money+=l.default.manufactureConfig[l.default.ManufactureLevel-1].perBonus*l.default.incomeRate,l.default.levelMoney+=l.default.manufactureConfig[l.default.ManufactureLevel-1].perBonus*l.default.incomeRate,l.default.getInstance().getLevel().setMoney(),l.default.getInstance().getLevel().updateLevelProgress(),l.default.getInstance().emitEvent("moneyUpdate",null),e.showBtn(),e.showBubbleMoney(l.default.manufactureConfig[l.default.ManufactureLevel-1].perBonus*l.default.incomeRate)}))),l.default.honeyValue-=l.default.manufactureConfig[l.default.ManufactureLevel-1].perBonus,this.setHoneyValue(),this.scheduleOnce(this.doWork.bind(this),l.default.manufactureConfig[l.default.ManufactureLevel-1].productTime/(this._speed*l.default.globalSpeedRate))}},e.prototype.showBubbleMoney=function(e){var t=cc.instantiate(this.bubbleMoney);t.parent=this.node,t.x=450,t.getComponent("bubbleMoney").setMoney(e),c.default.getInstance().playSound("audio/gold")},e.prototype.initBtnEvent=function(e){var o=this,n=0;e.on(cc.Node.EventType.TOUCH_START,function(e){"mask"==e.target.getName()&&(n=-1)}),e.on(cc.Node.EventType.TOUCH_MOVE,function(e){"mask"==e.target.getName()&&(n=e.touch._point.x-e.touch._prevPoint.x,Math.abs(n))}),e.on(cc.Node.EventType.TOUCH_END,function(e){if("btn_upgrade"==e.target.getName()){if(cc.find("Canvas").getChildByName("manufactureUpgrade"))return;var t=cc.instantiate(o.manufactureUpgrade);t.parent=cc.find("Canvas"),t.y=-1218,t.runAction(cc.moveBy(.4,cc.p(0,1218)).easing(cc.easeElasticOut(3))),l.default.getInstance().getGame().setMaskVisit(!0),c.default.getInstance().playSound("audio/btn_click")}else if("btn_speedUp"==e.target.getName())l.default.globalSpeedRate=2,o._speedTime=0,o.startSpeedUpTimer(l.default.otherConfig.speedUpPersist),o._btn_upSpeed.active=!1,c.default.getInstance().playMusic("audio/speeUp");else if("btn_boubleIncome"==e.target.getName()){if(!o._btn_doubleIncome.getComponent(cc.Button).interactable)return;o._doubleTime=0,o._btn_doubleIncome.getComponent(cc.Button).interactable=!1,l.default.incomeRate=2,o.startDoubleTimer(l.default.otherConfig.doublePersist)}else"mask"==e.target.getName()&&5<=Math.abs(n)&&(o._speedUpTime=Date.now(),o._speed=0<o._speedUpTime?l.default.manufactureConfig[l.default.ManufactureLevel-1].speed:1)})},e.prototype.upgrade=function(){l.default.money-=l.default.manufactureConfig[l.default.ManufactureLevel-1].cost,l.default.ManufactureLevel+=1,this.showBtn(),l.default.getInstance().setManufactureLevel()},e.prototype.showBtn=function(){l.default.money>=l.default.manufactureConfig[l.default.ManufactureLevel-1].cost?this.enableBtn(!0):this.enableBtn(!1)},e.prototype.enableBtn=function(e){this._btn_upgrade.getComponent(cc.Button).interactable=e},e.prototype.startSpeedUpTimer=function(e){this._timeCount=e,this._lb_upSpeedTime.active=!0,this.countDown()},e.prototype.startDoubleTimer=function(e){this._timeCount1=e,this._lb_doubleTime.active=!0,this.countDown1()},e.prototype.countDown=function(){if(this._timeCount<0)return l.default.globalSpeedRate=1,this._lb_upSpeedTime.active=!1,void c.default.getInstance().playMusic("audio/bgMusic");var e=Math.floor(this._timeCount/60)<10?"0"+Math.floor(this._timeCount/60):""+Math.floor(this._timeCount/60),t=this._timeCount%60<10?"0"+this._timeCount%60:""+this._timeCount%60;this._lb_upSpeedTime.getComponent(cc.Label).string=e+":"+t,this._timeCount-=1,this.scheduleOnce(this.countDown.bind(this),1)},e.prototype.countDown1=function(){if(this._timeCount1<0)return l.default.incomeRate=1,void(this._lb_doubleTime.active=!1);var e=Math.floor(this._timeCount1/60)<10?"0"+Math.floor(this._timeCount1/60):""+Math.floor(this._timeCount1/60),t=this._timeCount1%60<10?"0"+this._timeCount1%60:""+this._timeCount1%60;this._lb_doubleTime.getComponent(cc.Label).string=e+":"+t,this._timeCount1-=1,this.scheduleOnce(this.countDown1.bind(this),1)},e.prototype.update=function(e){if(this._upLine){0<this._speedUpTime&&1<=(Date.now()-this._speedUpTime)/1e3&&(this._speedUpTime=-1,this._speed=1),0<=this._doubleTime&&(this._doubleTime+=e,this._doubleTime>=l.default.otherConfig.doubleInterval&&(this._btn_doubleIncome.getComponent(cc.Button).interactable=!0,this._doubleTime=-1)),0<=this._speedTime&&(this._speedTime+=e,this._speedTime>=l.default.otherConfig.speedUpInterval&&(this._btn_upSpeed.active=!0,this._speedTime=-1)),!this._isWorking&&0<l.default.honeyValue&&(this.unschedule(this.doWork.bind(this)),this.scheduleOnce(this.doWork.bind(this),1),this._isWorking=!0),this._upLine.x+=1080/(60*l.default.manufactureConfig[l.default.ManufactureLevel-1].transferTime/(this._speed*l.default.globalSpeedRate)),this._downLine.x-=1080/(60*l.default.manufactureConfig[l.default.ManufactureLevel-1].transferTime/(this._speed*l.default.globalSpeedRate)),1080<=this._upLine.x&&(this._upLine.x=0),this._downLine.x<=-1080&&(this._downLine.x=0);for(var t=0;t<this._pulleyList.length;t++)this._pulleyList[t].rotation+=360/(60*l.default.manufactureConfig[l.default.ManufactureLevel-1].transferTime/(this._speed*l.default.globalSpeedRate));for(t=0;t<this._jarNode.children.length;t++)Math.abs(this._jarNode.children[t].y-365)<.5&&(this._jarNode.children[t].x+=1080/(60*l.default.manufactureConfig[l.default.ManufactureLevel-1].transferTime/(this._speed*l.default.globalSpeedRate)))}},__decorate([a(cc.Prefab)],e.prototype,"jar_black",void 0),__decorate([a(cc.Prefab)],e.prototype,"jar_yellow",void 0),__decorate([a(cc.Prefab)],e.prototype,"manufactureUpgrade",void 0),__decorate([a(cc.Prefab)],e.prototype,"bubbleMoney",void 0),e=__decorate([i],e)}(cc.Component);o.default=r,cc._RF.pop()},{"../../Common/AudioManager":"AudioManager","../../Common/Util":"Util","../../Controller/GameCtr":"GameCtr"}],role:[function(e,t,o){"use strict";cc._RF.push(t,"ffabdrNTL9E8Je9s+tv9lX0","role"),Object.defineProperty(o,"__esModule",{value:!0});var n,i,a=e("../../Common/AudioManager"),c=cc._decorator,l=c.ccclass;c.property;(i=n||(n={}))[i.CAVE=0]="CAVE",i[i.CACTI=1]="CACTI";var s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.id=null,e.lb_name=null,e.headImg=null,e.headFrame=null,e}return __extends(e,t),e.prototype.onLoad=function(){},e.prototype.setName=function(e){this.lb_name.getComponent(cc.Label).string=e},e.prototype.setID=function(e){this.id=e},e.prototype.getID=function(){return this.id},e.prototype.setHeadImg=function(e){this.headFrame.active=!0;var o=this.headImg.getComponent(cc.Sprite);cc.loader.load({url:e,type:"png"},function(e,t){o.spriteFrame=new cc.SpriteFrame(t)})},e.prototype.die=function(e,t){void 0===t&&(t=!0),e==n.CAVE?this.node.runAction(cc.sequence(cc.delayTime(.1*Math.floor(3*Math.random())),cc.scaleTo(.2,0),cc.callFunc(function(){a.default.getInstance().playSound("audio/scream"),t?this.node.destroy():(this.node.active=!1,this.node.scale=1,this.node.rotation=0)}.bind(this)))):this.node.runAction(cc.sequence(cc.delayTime(.1*Math.floor(3*Math.random())),cc.spawn(cc.moveBy(.2,cc.p(500*Math.random()-250,200*Math.random()+800)),cc.rotateBy(.2,90*Math.random()-45),cc.scaleTo(.2,.5*Math.floor(Math.random())+.3)),cc.callFunc(function(){a.default.getInstance().playSound("audio/scream"),t?this.node.destroy():(this.node.active=!1,this.node.scale=1,this.node.rotation=0)}.bind(this))))},e=__decorate([l],e)}(cc.Component);o.default=s,cc._RF.pop()},{"../../Common/AudioManager":"AudioManager"}]},{},["AudioManager","Http","MemoryDetector","UrlConfig","UserManager","Util","ViewManager","head","GameCtr","HttpCtr","WXCtr","bee","bubbleMoney","combUpgrade","eft_honey","honeycomb","levelUpgrade","manufactureUpgrade","role","Game","level","manufacture","loading","RankingCell","RankingView","BaseDialog","PopupView","PromptDialog","ToastView"]);
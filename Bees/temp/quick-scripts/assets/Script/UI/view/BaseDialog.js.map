{"version":3,"sources":["BaseDialog.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"../../../../../../assets/Script/UI/view","sourcesContent":["/**\r\n * 基础弹窗\r\n */\r\nimport PopupView from \"./PopupView\";\r\nimport Util from \"../../Common/Util\";\r\n\r\nconst { ccclass, property } = cc._decorator;\r\n\r\n@ccclass\r\nexport default class BaseDialog extends cc.Component {\r\n\r\n    protected static readonly ButtonTag = {\r\n        SURE: \"button_sure\",\r\n        CANCEL: \"button_cancel\",\r\n        CLOSE: \"button_close\"\r\n    }\r\n\r\n    protected _sureButton: cc.Button;\r\n    protected _cancelButton: cc.Button;\r\n    private _closeButton: cc.Button;\r\n    protected _data;//传入数据\r\n\r\n    onLoad() {\r\n        let node = Util.findChildByName(BaseDialog.ButtonTag.SURE, this.node);\r\n        if (node) {\r\n            this._sureButton = node.getComponent(cc.Button);\r\n        }\r\n        node = Util.findChildByName(BaseDialog.ButtonTag.CANCEL, this.node);\r\n        if (node) {\r\n            this._cancelButton = node.getComponent(cc.Button);\r\n        }\r\n        node = Util.findChildByName(BaseDialog.ButtonTag.CLOSE, this.node);\r\n        if (node) {\r\n            this._closeButton = node.getComponent(cc.Button);\r\n        }\r\n\r\n        this.initButton(this._sureButton, BaseDialog.ButtonTag.SURE);\r\n        this.initButton(this._cancelButton, BaseDialog.ButtonTag.CANCEL);\r\n        this.initButton(this._closeButton, BaseDialog.ButtonTag.CLOSE);\r\n\r\n        this.initData();\r\n    }\r\n\r\n    protected initData() {\r\n\r\n    }\r\n\r\n    setData(data) {\r\n        this._data = data;\r\n    }\r\n\r\n    dismiss() {\r\n        if (!this.node.parent) {\r\n            return;\r\n        }\r\n        let popupView = this.node.parent.getComponent(PopupView);\r\n        if (!!popupView) {\r\n            popupView.dismiss();\r\n        } else {\r\n            this.node.destroy();\r\n        }\r\n    }\r\n\r\n    protected onButtonClick(event, customData) {\r\n        switch (customData) {\r\n            case BaseDialog.ButtonTag.SURE:\r\n                break;\r\n            case BaseDialog.ButtonTag.CANCEL:\r\n                this.dismiss();\r\n                break;\r\n            case BaseDialog.ButtonTag.CLOSE:\r\n                this.dismiss();\r\n                break;\r\n            default:\r\n                break;\r\n        }\r\n    }\r\n\r\n    private initButton(button: cc.Button, tag: string) {\r\n        if (!cc.isValid(button)) {\r\n            return;\r\n        }\r\n        let clickEventHandler = new cc.Component.EventHandler();\r\n        clickEventHandler.target = this.node;//这个 node 节点是你的事件处理代码组件所属的节点\r\n        clickEventHandler.component = \"BaseDialog\";//这个是代码文件名\r\n        clickEventHandler.handler = \"onButtonClick\";\r\n        clickEventHandler.customEventData = tag;\r\n        button.clickEvents.push(clickEventHandler);\r\n    }\r\n\r\n}\r\n"]}
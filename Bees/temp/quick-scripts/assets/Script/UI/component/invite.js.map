{"version":3,"sources":["invite.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"../../../../../../assets/Script/UI/component","sourcesContent":["import GameCtr from \"../../Controller/GameCtr\";\nimport AudioManager from \"../../Common/AudioManager\";\nimport WXCtr from \"../../Controller/WXCtr\";\nimport HttpCtr from \"../../Controller/HttpCtr\";\nimport UserManager from \"../../Common/UserManager\";\n\n\nconst {ccclass, property} = cc._decorator;\n\n@ccclass \nexport default class NewClass extends cc.Component {\n    _btn_close=null;\n    _btn_invite=null;\n    _friendNode=null;\n\n    @property(cc.Prefab)\n    inviteFriendItem:cc.Prefab=null;\n\n    onLoad(){\n        this.initNode();\n        this.initFriendItems();\n        this.requestFriendList()\n    }\n\n    initNode(){\n        this._btn_close=this.node.getChildByName(\"btn_close\");\n        this._btn_invite=this.node.getChildByName(\"btn_invite\");\n        this._friendNode=this.node.getChildByName(\"friendNode\").getChildByName(\"view\").getChildByName(\"content\");\n        this.initBtnEvent(this._btn_close);\n        this.initBtnEvent(this._btn_invite);\n    }\n\n    initBtnEvent(btn){\n        btn.on(cc.Node.EventType.TOUCH_END,(e)=>{\n            if(e.target.getName()==\"btn_close\"){\n                this.node.destroy();\n                GameCtr.getInstance().getGame().setMaskVisit(false);\n                AudioManager.getInstance().playSound(\"audio/btnClose\")\n            }else if(e.target.getName()==\"btn_invite\"){\n                AudioManager.getInstance().playSound(\"audio/open_panel\");\n                WXCtr.share({invite:true,callback:()=>{\n                    console.log(\"log----------------邀请好友---------\");\n                }})\n            }\n        })\n    }\n\n    initFriendItems(){\n        for(let i =0;i<10;i++){\n            let friendItem=cc.instantiate(this.inviteFriendItem);\n            friendItem.parent=this._friendNode;\n            friendItem.tag=10+i;\n            friendItem.x=102+176*i;\n            friendItem.y=20;\n            let key=\"data_\"+friendItem.tag;\n            if(UserManager.user[key]>0){\n                friendItem.getComponent(\"inviteFriendItem\").disableBtn();\n            }\n        }\n    }\n\n    requestFriendList(){\n        HttpCtr.getInviteResult((friendList)=>{\n            for(let i=0;i<friendList.length;i++){\n                if(friendList[i].Icon && this._friendNode.children[i]){\n                    this._friendNode.children[i].getComponent(\"inviteFriendItem\").setName(friendList[i].nick);\n                    this._friendNode.children[i].getComponent(\"inviteFriendItem\").setHeadImg(friendList[i].Icon);\n                }else {\n                    this._friendNode.children[i].getComponent(\"inviteFriendItem\").initHeadEvent();\n                }\n            }\n        });\n\n        this.scheduleOnce(this.requestFriendList.bind(this),1.0);\n    }\n\n}\n"]}
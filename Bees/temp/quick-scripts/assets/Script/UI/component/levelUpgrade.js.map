{"version":3,"sources":["levelUpgrade.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"../../../../../../assets/Script/UI/component","sourcesContent":["import Util from \"../../Common/Util\";\r\nimport GameCtr from \"../../Controller/GameCtr\";\r\nimport AudioManager from \"../../Common/AudioManager\";\r\nconst {ccclass, property} = cc._decorator;\r\n@ccclass\r\nexport default class NewClass extends cc.Component {\r\n\r\n    _btn_upgrade=null;\r\n    _btn_close=null;\r\n    _lb_bonus=null;\r\n    _word_levelFull=null;\r\n    _interval=0;\r\n\r\n    onLoad(){\r\n        this._btn_close=this.node.getChildByName(\"btn_close\");\r\n        this._btn_upgrade=this.node.getChildByName(\"btn_upgrade\");\r\n        this._lb_bonus=this._btn_upgrade.getChildByName(\"lb_bonus\");\r\n        this._word_levelFull=this._btn_upgrade.getChildByName(\"word_levelFull\");\r\n        this._lb_bonus.getComponent(cc.Label).string=\"$\"+Util.formatNumber(GameCtr.levelConfig[GameCtr.level-1].award);\r\n\r\n        this.initBtn(this._btn_close);\r\n        this.initBtn(this._btn_upgrade);\r\n        this.showBtn();\r\n    }\r\n\r\n    initBtn(btn){\r\n        btn.on(cc.Node.EventType.TOUCH_END,(e)=>{\r\n            if(e.target.getName()==\"btn_close\"){\r\n                AudioManager.getInstance().playSound(\"audio/btnClose\");\r\n               \r\n            }else if(e.target.getName()==\"btn_upgrade\"){\r\n                if(this._btn_upgrade.getComponent(cc.Button).interactable){\r\n                    GameCtr.getInstance().getLevel().upgrade();\r\n                    AudioManager.getInstance().playSound(\"audio/user_levelup\");\r\n                    this.showBtn();\r\n                }   \r\n            }\r\n\r\n            this.node.destroy();\r\n            GameCtr.getInstance().getGame().setMaskVisit(false);\r\n        })\r\n    }\r\n\r\n    showBtn(){\r\n        if(GameCtr.levelMoney<GameCtr.levelConfig[GameCtr.level-1].need){\r\n            this._btn_upgrade.getComponent(cc.Button).interactable=false;\r\n        }else{\r\n            this._btn_upgrade.getComponent(cc.Button).interactable=true;\r\n        }\r\n\r\n        if(GameCtr.level>=GameCtr.maxPlayerLevel){\r\n            this._btn_upgrade.getComponent(cc.Button).interactable=false;\r\n            this._lb_bonus.active=false;\r\n            this._word_levelFull.active=true;\r\n        }\r\n    }\r\n\r\n    update(dt){\r\n        if(this._btn_upgrade.getComponent(cc.Button).interactable){return}\r\n        this._interval+=dt;\r\n        if(this._interval>=0.5){\r\n            this.showBtn();\r\n            this._interval=0;\r\n        }\r\n    }\r\n\r\n    start () {\r\n\r\n    }\r\n}\r\n"]}
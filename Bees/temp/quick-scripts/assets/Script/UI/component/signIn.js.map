{"version":3,"sources":["signIn.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"../../../../../../assets/Script/UI/component","sourcesContent":["import AudioManager from \"../../Common/AudioManager\";\nimport GameCtr from \"../../Controller/GameCtr\";\nimport Http from \"../../Common/Http\";\nimport HttpCtr from \"../../Controller/HttpCtr\";\nconst {ccclass, property} = cc._decorator;\n\n@ccclass\nexport default class NewClass extends cc.Component {\n\n    _btn_close=null;\n    _btn_getRedPackage=null;\n\n    @property(cc.Prefab)\n    redPackage:cc.Prefab=null;\n\n    @property(cc.Prefab)\n    getRedPackage:cc.Prefab=null;\n\n    onLoad(){\n        this.initNode();\n        HttpCtr.getLoginAwardList(this.initRedPackages.bind(this));\n    }\n\n    initNode(){\n        this._btn_close=this.node.getChildByName(\"btn_close\");\n        this._btn_getRedPackage=this.node.getChildByName(\"btn_getRedPackage\");\n        \n        this.initBtnEvent(this._btn_close);\n        this.initBtnEvent(this._btn_getRedPackage);\n    }\n\n    initBtnEvent(btn){\n        btn.on(cc.Node.EventType.TOUCH_END,(e)=>{\n            if(e.target.getName()==\"btn_close\"){\n                AudioManager.getInstance().playSound(\"audio/btnClose\");\n                GameCtr.getInstance().getGame().setMaskVisit(false);\n                this.node.destroy();\n            }else if(e.target.getName()==\"btn_getRedPackage\"){\n                AudioManager.getInstance().playSound(\"audio/open_panel\");\n                HttpCtr.sign( this.getPackage.bind(this));\n            }else if(e.target.getName()==\"redPackage\"){\n                AudioManager.getInstance().playSound(\"audio/open_panel\");\n                HttpCtr.sign(this.getPackage.bind(this));\n            }\n        })\n    }\n\n    \n\n    initRedPackages(data){\n        console.log(\"log--------initRedPackages--->data=:\",data);\n        for(let i=0;i<7;i++){\n            let redPackage=cc.instantiate(this.redPackage);\n            redPackage.parent=this.node;\n            redPackage.x=-225+i%3*225;\n            redPackage.y=250-Math.floor(i/3)*280;\n\n            redPackage.tag=1000+i;\n            redPackage.getComponent(\"redPackage\").setTitle(\"第\"+(i+1)+\"天\");\n            if(i<data.todaySum){\n                redPackage.getComponent(\"redPackage\").setState(\"on\");\n            }else{\n                redPackage.getComponent(\"redPackage\").setState(\"off\");\n                //this.initBtnEvent(redPackage);\n            }\n        }\n    }\n\n    getPackage(data){\n        console.log(\"log------------sign data=:\",data);\n        if(this.node.getChildByName(\"getRedPackage\")){return}\n        let getPackage=cc.instantiate(this.getRedPackage);\n        getPackage.parent=this.node;\n        getPackage.getComponent(\"getRedPackage\").setValue(data.m);\n        getPackage.getComponent(\"getRedPackage\").setSurplusMoney();\n\n        GameCtr.realMoney+=data.m;\n        GameCtr.getInstance().getGame().setRealMoney();\n\n        let redPackage=this.node.getChildByTag(1000+data.todaySum-1);\n        redPackage.getComponent(\"redPackage\").setState(\"on\");\n    }\n\n    \n}\n"]}
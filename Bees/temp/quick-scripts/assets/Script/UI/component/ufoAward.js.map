{"version":3,"sources":["ufoAward.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"../../../../../../assets/Script/UI/component","sourcesContent":["import AudioManager from \"../../Common/AudioManager\";\nimport GameCtr from \"../../Controller/GameCtr\";\nimport Util from \"../../Common/Util\";\nimport WXCtr from \"../../Controller/WXCtr\";\n\nconst {ccclass, property} = cc._decorator;\n@ccclass\nexport default class NewClass extends cc.Component {\n\n    _btn_close=null;\n    _btn_get=null;\n    _lb_bonus=null;\n    _bonusValue=null;\n\n    onLoad(){\n        this._btn_close=this.node.getChildByName(\"btn_close\");\n        this._btn_get=this.node.getChildByName(\"btn_get\");\n        this._lb_bonus=this.node.getChildByName(\"lb_bonus\");\n        this._btn_get.active=GameCtr.isAudited;\n\n        this.initEvent(this._btn_close);\n        this.initEvent(this._btn_get);\n        this.initBonusValue();\n    }\n\n    initEvent(btn){\n        btn.on(cc.Node.EventType.TOUCH_END,(e)=>{\n            if(e.target.getName()==\"btn_close\"){\n                this.node.destroy();\n                if(!GameCtr.isAudited){\n                    GameCtr.money+=this._bonusValue;\n                    GameCtr.rich+=this._bonusValue;\n                }\n                AudioManager.getInstance().playSound(\"audio/btnClose\");\n            }else if(e.target.getName()==\"btn_get\"){\n                let callFunc=()=>{\n                    GameCtr.money+=2*this._bonusValue;\n                    GameCtr.rich+=2*this._bonusValue;\n                    this.node.destroy();\n                }\n                if(GameCtr.vedioTimes<=0){\n                    WXCtr.share({callback:callFunc});\n                }else{\n                    WXCtr.showVideoAd(callFunc.bind(this));\n                }\n                AudioManager.getInstance().playSound(\"audio/open_panel\");\n            }\n        })\n    }\n\n    initBonusValue(){\n        let combsUnlock=JSON.parse(GameCtr.getInstance().getCombsUnlock());\n        let manufactures_speed=GameCtr.manufactureConfig[GameCtr.ManufactureLevel-1].perBonus/\n                                (GameCtr.manufactureConfig[GameCtr.ManufactureLevel-1].productTime+\n                                    GameCtr.manufactureConfig[GameCtr.ManufactureLevel-1].transferTime);\n\n        let combs_speed=0;\n        \n        for(let i=0;i<combsUnlock.length;i++){\n            combs_speed+=(GameCtr.combConfig[i].initialIncome+GameCtr.combConfig[i].incomeMatrix*(combsUnlock[i].level-1)*combsUnlock[i].level)/(GameCtr.combConfig[i].baseSpeed*2)\n        }\n        let finalSpeed =combs_speed>=manufactures_speed?manufactures_speed:combs_speed;\n        this._bonusValue=Math.floor(finalSpeed*300);\n        this._lb_bonus.getComponent(cc.Label).string=\"$\"+Util.formatNumber(Math.floor(finalSpeed*300));\n    }\n}\n"]}
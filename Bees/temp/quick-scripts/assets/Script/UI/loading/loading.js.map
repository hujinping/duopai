{"version":3,"sources":["loading.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"../../../../../../assets/Script/UI/loading","sourcesContent":["import GameCtr from \"../../Controller/GameCtr\";\r\nimport AudioManager from \"../../Common/AudioManager\";\r\nconst {ccclass, property} = cc._decorator;\r\n\r\n@ccclass\r\nexport default class NewClass extends cc.Component {\r\n    _btnStart=null;\r\n    _progress=null;\r\n    _configTotalCount=4;\r\n    _configIndex=0;\r\n\r\n    onLoad(){\r\n        this._progress=this.node.getChildByName(\"progress\");\r\n        this._btnStart=this.node.getChildByName(\"btn_start\");\r\n        this.initData();\r\n        //this.loadResource();\r\n        this.loadConf();\r\n        this.initBtnStart();\r\n        GameCtr.getInstance();\r\n    }\r\n\r\n    initBtnStart(){\r\n        this._btnStart.on(cc.Node.EventType.TOUCH_END,(e)=>{\r\n            AudioManager.getInstance().playSound(\"audio/open_panel\");\r\n            if(this._configIndex<this._configTotalCount){\r\n                //todo 提示\r\n                return;\r\n            }\r\n            cc.director.loadScene(\"Game\");\r\n        })\r\n    }\r\n\r\n    loadResource(){\r\n        cc.loader.loadResDir(\"textures\",this.progressCallback.bind(this),this.completeCallback.bind(this));\r\n    }\r\n\r\n    progressCallback(completedCount,totalCount,item){\r\n        this._progress.getComponent(cc.ProgressBar).progress=completedCount/totalCount;\r\n    }\r\n\r\n    completeCallback(){\r\n        this.loadConf();\r\n    }\r\n\r\n    loadConf(){\r\n        this.loadLevelConf();\r\n        this.loadmanufactureConf();\r\n        this.loadCombConf();\r\n        this.loadPfTurntableConf()\r\n        this.loadOtherConf();\r\n    }\r\n\r\n    loadLevelConf(){\r\n        cc.loader.loadRes(\"config/level\",(err,res)=>{\r\n            if(err){return}\r\n            GameCtr.levelConfig=res;\r\n            this.checkLoadConfigOver();\r\n        })\r\n    }\r\n\r\n    loadmanufactureConf(){\r\n        cc.loader.loadRes(\"config/manufacture\",(err,res)=>{\r\n            if(err){return}\r\n            GameCtr.manufactureConfig=res;\r\n            this.checkLoadConfigOver();\r\n        })\r\n    }\r\n\r\n    loadCombConf(){\r\n        cc.loader.loadRes(\"config/comb\",(err,res)=>{\r\n            if(err){return}\r\n            GameCtr.combConfig=res;\r\n            this.checkLoadConfigOver();\r\n        })\r\n    }\r\n\r\n    loadPfTurntableConf(){\r\n        cc.loader.loadRes(\"config/pfTurnTable\",(err,res)=>{\r\n            if(err){return}\r\n            GameCtr.pfTurnTableConfig=res;\r\n            console.log(\"log----------GameCtr.pfTurnTableConfig=:\",GameCtr.pfTurnTableConfig);\r\n            this.checkLoadConfigOver();\r\n        }) \r\n    }\r\n\r\n    loadOtherConf(){\r\n        cc.loader.loadRes(\"config/other\",(err,res)=>{\r\n            if(err){return}\r\n            GameCtr.otherConfig=res;\r\n            this.checkLoadConfigOver();\r\n        })\r\n    }\r\n\r\n    checkLoadConfigOver(){\r\n        this._configIndex++;\r\n    }\r\n\r\n\r\n    initData(){\r\n        if(GameCtr.getInstance().getPlayerLevel()){\r\n            GameCtr.level=GameCtr.getInstance().getPlayerLevel(); \r\n        }else{\r\n            GameCtr.level=1;\r\n            GameCtr.getInstance().setPlayerLevel();\r\n        }\r\n\r\n        if(GameCtr.getInstance().getManufactureLevel()){\r\n            GameCtr.ManufactureLevel=GameCtr.getInstance().getManufactureLevel(); \r\n        }else{\r\n            GameCtr.ManufactureLevel=1;\r\n            GameCtr.getInstance().setManufactureLevel();\r\n        }\r\n\r\n        if(GameCtr.getInstance().getCombLevel()){\r\n            GameCtr.comblevel=GameCtr.getInstance().getCombLevel(); \r\n        }else{\r\n            GameCtr.comblevel=1;\r\n            GameCtr.getInstance().setCombLevel();\r\n        }\r\n\r\n        console.log(\"log-------GameCtr.comblebel=:\",GameCtr.comblevel);\r\n\r\n        if(GameCtr.getInstance().getCombsUnlock()){\r\n            GameCtr.combsUnlock=JSON.parse(GameCtr.getInstance().getCombsUnlock()); \r\n        }else{\r\n            GameCtr.combsUnlock=[];\r\n            GameCtr.combsUnlock.push({level:1,unlock:true});\r\n            GameCtr.getInstance().setCombsUnlock();\r\n        }\r\n\r\n        if(window.localStorage.getItem(\"guide\")){\r\n            GameCtr.guide=JSON.parse(window.localStorage.getItem(\"guide\"))\r\n        }else{\r\n            GameCtr.guide=[];\r\n            GameCtr.getInstance().setGuide();\r\n        }\r\n\r\n        if(window.localStorage.getItem(\"honeyValue\")){\r\n            GameCtr.honeyValue=GameCtr.getInstance().getHoneyValue();\r\n        }else{\r\n            GameCtr.honeyValue=0;\r\n            GameCtr.getInstance().setHoneyValue();\r\n        }\r\n\r\n\r\n        GameCtr.rich=GameCtr.getInstance().getRich();\r\n        GameCtr.money=GameCtr.getInstance().getMoney();\r\n        GameCtr.levelMoney=GameCtr.getInstance().getLevelMoney();\r\n        GameCtr.guide=GameCtr.getInstance().getGuide();\r\n        if(!GameCtr.rich) GameCtr.rich=0;\r\n        if(!GameCtr.money) GameCtr.money=0;\r\n        if(!GameCtr.levelMoney) GameCtr.levelMoney=0;\r\n    }\r\n}\r\n"]}
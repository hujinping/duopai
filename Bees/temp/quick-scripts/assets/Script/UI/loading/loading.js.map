{"version":3,"sources":["loading.ts"],"names":[],"mappings":";;;;;AAAA,oDAA+C;AAC/C,0DAAqD;AAG/C,IAAA,kBAAmC,EAAlC,oBAAO,EAAE,sBAAQ,CAAkB;AAG1C;IAAsC,4BAAY;IADlD;QAAA,qEAsOC;QApOG,eAAS,GAAC,IAAI,CAAC;QACf,eAAS,GAAC,IAAI,CAAC;QACf,uBAAiB,GAAC,CAAC,CAAC;QACpB,kBAAY,GAAC,CAAC,CAAC;QACf,aAAO,GAAC,IAAI,CAAC;QACb,mBAAa,GAAC,IAAI,CAAC;QACnB,iBAAW,GAAC,EAAE,CAAC;QACf,oBAAc,GAAC,CAAC,CAAC;QAGjB,QAAE,GAAW,IAAI,CAAC;;IA0NtB,CAAC;IAxNG,yBAAM,GAAN;QAEI,IAAI,CAAC,SAAS,GAAC,IAAI,CAAC,IAAI,CAAC,cAAc,CAAC,UAAU,CAAC,CAAC;QACpD,IAAI,CAAC,SAAS,GAAC,IAAI,CAAC,IAAI,CAAC,cAAc,CAAC,WAAW,CAAC,CAAC;QACrD,IAAI,CAAC,OAAO,GAAC,IAAI,CAAC,IAAI,CAAC,cAAc,CAAC,QAAQ,CAAC,CAAC;QAChD,IAAI,CAAC,aAAa,GAAC,IAAI,CAAC,IAAI,CAAC,cAAc,CAAC,cAAc,CAAC,CAAA;QAC3D,IAAI,CAAC,QAAQ,EAAE,CAAC;QAChB,IAAI,CAAC,QAAQ,EAAE,CAAC;QAChB,IAAI,CAAC,YAAY,EAAE,CAAC;QACpB,iBAAO,CAAC,WAAW,EAAE,CAAC;QACtB,wBAAwB;QACxB,iBAAO,CAAC,WAAW,EAAE,CAAC,UAAU,CAAC,IAAI,CAAC,CAAC;QACvC,IAAI,CAAC,SAAS,CAAC,SAAS,CAAC,EAAE,CAAC,aAAa,CAAC,EAAE,CAAC,QAAQ,CACjD,EAAE,CAAC,OAAO,CAAC,GAAG,EAAC,IAAI,CAAC,EACpB,EAAE,CAAC,OAAO,CAAC,GAAG,EAAC,GAAG,CAAC,CACtB,CAAC,CAAC,CAAA;IACP,CAAC;IAED,+BAAY,GAAZ;QAAA,iBAkBC;QAjBG,IAAG,CAAC,iBAAO,CAAC,SAAS,EAAC;YAAC,OAAO;SAAC;QAC/B,IAAG,CAAC,iBAAO,CAAC,OAAO,CAAC,GAAG,CAAC,IAAI,IAAE,iBAAO,CAAC,OAAO,CAAC,GAAG,CAAC,IAAI,IAAE,CAAC,EAAC;YAAC,OAAO;SAAC;QAEnE,KAAI,IAAI,CAAC,GAAC,CAAC,EAAC,CAAC,GAAC,iBAAO,CAAC,OAAO,CAAC,GAAG,CAAC,IAAI,CAAC,MAAM,EAAC,CAAC,EAAE,EAAC;YAC9C,IAAI,EAAE,GAAC,EAAE,CAAC,WAAW,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC;YAC/B,EAAE,CAAC,MAAM,GAAC,IAAI,CAAC,aAAa,CAAC;YAC7B,EAAE,CAAC,KAAK,GAAC,GAAG,CAAC;YACb,EAAE,CAAC,YAAY,CAAC,IAAI,CAAC,CAAC,IAAI,CAAC,iBAAO,CAAC,OAAO,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC;YACxD,EAAE,CAAC,CAAC,GAAC,CAAC,IAAE,CAAC,CAAA,CAAC,CAAA,CAAC,CAAA,CAAC,CAAA,IAAI,CAAC;YACjB,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC;SAC7B;QACD,IAAI,CAAC,cAAc,GAAC,CAAC,CAAC;QACtB,IAAI,CAAC,YAAY,CAAC;YACd,KAAI,CAAC,WAAW,CAAC,KAAI,CAAC,cAAc,CAAC,CAAC,YAAY,CAAC,IAAI,CAAC,CAAC,OAAO,EAAE,CAAC;QACvE,CAAC,EAAC,CAAC,CAAC,CAAA;QACJ,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,IAAI,CAAC,EAAC,CAAC,CAAC,CAAC;IAEpD,CAAC;IAED,6BAAU,GAAV;QACI,IAAG,IAAI,CAAC,WAAW,CAAC,MAAM,IAAE,CAAC,EAAC,EAAE,mBAAmB;YAC/C,OAAM;SACT;QACD,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,cAAc,CAAC,CAAC,CAAC,GAAC,CAAC,CAAC;QAC1C,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,cAAc,CAAC,CAAC,YAAY,CAAC,IAAI,CAAC,CAAC,OAAO,EAAE,CAAC;QACnE,KAAI,IAAI,CAAC,GAAC,CAAC,EAAC,CAAC,GAAC,IAAI,CAAC,WAAW,CAAC,MAAM,EAAC,CAAC,EAAE,EAAC;YACtC,IAAG,CAAC,IAAE,IAAI,CAAC,cAAc,EAAC;gBACtB,SAAS;aACZ;YACD,IAAI,CAAC,WAAW,CAAC,CAAC,CAAC,CAAC,QAAQ,GAAC,CAAC,CAAC;YAC/B,IAAI,CAAC,WAAW,CAAC,CAAC,CAAC,CAAC,YAAY,CAAC,IAAI,CAAC,CAAC,WAAW,EAAE,CAAC;YACrD,IAAI,CAAC,WAAW,CAAC,CAAC,CAAC,CAAC,CAAC,GAAC,IAAI,CAAC,CAAA,QAAQ;SACtC;QAED,IAAI,CAAC,cAAc,EAAE,CAAC;QACtB,IAAI,CAAC,cAAc,GAAC,IAAI,CAAC,cAAc,GAAC,IAAI,CAAC,WAAW,CAAC,MAAM,CAAC;QAChE,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,IAAI,CAAC,EAAC,CAAC,CAAC,CAAC;IACpD,CAAC;IAKD,+BAAY,GAAZ;QAAA,iBASC;QARG,IAAI,CAAC,SAAS,CAAC,EAAE,CAAC,EAAE,CAAC,IAAI,CAAC,SAAS,CAAC,SAAS,EAAC,UAAC,CAAC;YAC5C,sBAAY,CAAC,WAAW,EAAE,CAAC,SAAS,CAAC,kBAAkB,CAAC,CAAC;YACzD,IAAG,KAAI,CAAC,YAAY,GAAC,KAAI,CAAC,iBAAiB,EAAC;gBACxC,SAAS;gBACT,OAAO;aACV;YACD,EAAE,CAAC,QAAQ,CAAC,SAAS,CAAC,MAAM,CAAC,CAAC;QAClC,CAAC,CAAC,CAAA;IACN,CAAC;IAED,+BAAY,GAAZ;QACI,EAAE,CAAC,MAAM,CAAC,UAAU,CAAC,UAAU,EAAC,IAAI,CAAC,gBAAgB,CAAC,IAAI,CAAC,IAAI,CAAC,EAAC,IAAI,CAAC,gBAAgB,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC;IACvG,CAAC;IAED,mCAAgB,GAAhB,UAAiB,cAAc,EAAC,UAAU,EAAC,IAAI;QAC3C,IAAI,CAAC,SAAS,CAAC,YAAY,CAAC,EAAE,CAAC,WAAW,CAAC,CAAC,QAAQ,GAAC,cAAc,GAAC,UAAU,CAAC;IACnF,CAAC;IAED,mCAAgB,GAAhB;QACI,IAAI,CAAC,QAAQ,EAAE,CAAC;IACpB,CAAC;IAED,2BAAQ,GAAR;QACI,IAAI,CAAC,aAAa,EAAE,CAAC;QACrB,IAAI,CAAC,mBAAmB,EAAE,CAAC;QAC3B,IAAI,CAAC,YAAY,EAAE,CAAC;QACpB,IAAI,CAAC,mBAAmB,EAAE,CAAA;QAC1B,IAAI,CAAC,aAAa,EAAE,CAAC;IACzB,CAAC;IAED,gCAAa,GAAb;QAAA,iBAMC;QALG,EAAE,CAAC,MAAM,CAAC,OAAO,CAAC,cAAc,EAAC,UAAC,GAAG,EAAC,GAAG;YACrC,IAAG,GAAG,EAAC;gBAAC,OAAM;aAAC;YACf,iBAAO,CAAC,WAAW,GAAC,GAAG,CAAC;YACxB,KAAI,CAAC,mBAAmB,EAAE,CAAC;QAC/B,CAAC,CAAC,CAAA;IACN,CAAC;IAED,sCAAmB,GAAnB;QAAA,iBAMC;QALG,EAAE,CAAC,MAAM,CAAC,OAAO,CAAC,oBAAoB,EAAC,UAAC,GAAG,EAAC,GAAG;YAC3C,IAAG,GAAG,EAAC;gBAAC,OAAM;aAAC;YACf,iBAAO,CAAC,iBAAiB,GAAC,GAAG,CAAC;YAC9B,KAAI,CAAC,mBAAmB,EAAE,CAAC;QAC/B,CAAC,CAAC,CAAA;IACN,CAAC;IAED,+BAAY,GAAZ;QAAA,iBAMC;QALG,EAAE,CAAC,MAAM,CAAC,OAAO,CAAC,aAAa,EAAC,UAAC,GAAG,EAAC,GAAG;YACpC,IAAG,GAAG,EAAC;gBAAC,OAAM;aAAC;YACf,iBAAO,CAAC,UAAU,GAAC,GAAG,CAAC;YACvB,KAAI,CAAC,mBAAmB,EAAE,CAAC;QAC/B,CAAC,CAAC,CAAA;IACN,CAAC;IAED,sCAAmB,GAAnB;QAAA,iBAOC;QANG,EAAE,CAAC,MAAM,CAAC,OAAO,CAAC,oBAAoB,EAAC,UAAC,GAAG,EAAC,GAAG;YAC3C,IAAG,GAAG,EAAC;gBAAC,OAAM;aAAC;YACf,iBAAO,CAAC,iBAAiB,GAAC,GAAG,CAAC;YAC9B,OAAO,CAAC,GAAG,CAAC,0CAA0C,EAAC,iBAAO,CAAC,iBAAiB,CAAC,CAAC;YAClF,KAAI,CAAC,mBAAmB,EAAE,CAAC;QAC/B,CAAC,CAAC,CAAA;IACN,CAAC;IAED,gCAAa,GAAb;QAAA,iBAMC;QALG,EAAE,CAAC,MAAM,CAAC,OAAO,CAAC,cAAc,EAAC,UAAC,GAAG,EAAC,GAAG;YACrC,IAAG,GAAG,EAAC;gBAAC,OAAM;aAAC;YACf,iBAAO,CAAC,WAAW,GAAC,GAAG,CAAC;YACxB,KAAI,CAAC,mBAAmB,EAAE,CAAC;QAC/B,CAAC,CAAC,CAAA;IACN,CAAC;IAED,sCAAmB,GAAnB;QACI,IAAI,CAAC,YAAY,EAAE,CAAC;IACxB,CAAC;IAGD,2BAAQ,GAAR;QACI,IAAG,iBAAO,CAAC,WAAW,EAAE,CAAC,cAAc,EAAE,EAAC;YACtC,iBAAO,CAAC,KAAK,GAAC,iBAAO,CAAC,WAAW,EAAE,CAAC,cAAc,EAAE,CAAC;SACxD;aAAI;YACD,iBAAO,CAAC,KAAK,GAAC,CAAC,CAAC;YAChB,iBAAO,CAAC,WAAW,EAAE,CAAC,cAAc,EAAE,CAAC;SAC1C;QAED,IAAG,iBAAO,CAAC,WAAW,EAAE,CAAC,mBAAmB,EAAE,EAAC;YAC3C,iBAAO,CAAC,gBAAgB,GAAC,iBAAO,CAAC,WAAW,EAAE,CAAC,mBAAmB,EAAE,CAAC;SACxE;aAAI;YACD,iBAAO,CAAC,gBAAgB,GAAC,CAAC,CAAC;YAC3B,iBAAO,CAAC,WAAW,EAAE,CAAC,mBAAmB,EAAE,CAAC;SAC/C;QAED,IAAG,iBAAO,CAAC,WAAW,EAAE,CAAC,YAAY,EAAE,EAAC;YACpC,iBAAO,CAAC,SAAS,GAAC,iBAAO,CAAC,WAAW,EAAE,CAAC,YAAY,EAAE,CAAC;SAC1D;aAAI;YACD,iBAAO,CAAC,SAAS,GAAC,CAAC,CAAC;YACpB,iBAAO,CAAC,WAAW,EAAE,CAAC,YAAY,EAAE,CAAC;SACxC;QAED,OAAO,CAAC,GAAG,CAAC,+BAA+B,EAAC,iBAAO,CAAC,SAAS,CAAC,CAAC;QAE/D,IAAG,iBAAO,CAAC,WAAW,EAAE,CAAC,cAAc,EAAE,EAAC;YACtC,iBAAO,CAAC,WAAW,GAAC,IAAI,CAAC,KAAK,CAAC,iBAAO,CAAC,WAAW,EAAE,CAAC,cAAc,EAAE,CAAC,CAAC;SAC1E;aAAI;YACD,iBAAO,CAAC,WAAW,GAAC,EAAE,CAAC;YACvB,iBAAO,CAAC,WAAW,CAAC,IAAI,CAAC,EAAC,KAAK,EAAC,CAAC,EAAC,MAAM,EAAC,IAAI,EAAC,CAAC,CAAC;YAChD,iBAAO,CAAC,WAAW,EAAE,CAAC,cAAc,EAAE,CAAC;SAC1C;QAED,IAAG,MAAM,CAAC,YAAY,CAAC,OAAO,CAAC,OAAO,CAAC,EAAC;YACpC,iBAAO,CAAC,KAAK,GAAC,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC,YAAY,CAAC,OAAO,CAAC,OAAO,CAAC,CAAC,CAAA;SACjE;aAAI;YACD,iBAAO,CAAC,KAAK,GAAC,EAAE,CAAC;YACjB,iBAAO,CAAC,WAAW,EAAE,CAAC,QAAQ,EAAE,CAAC;SACpC;QAED,IAAG,MAAM,CAAC,YAAY,CAAC,OAAO,CAAC,YAAY,CAAC,EAAC;YACzC,iBAAO,CAAC,UAAU,GAAC,iBAAO,CAAC,WAAW,EAAE,CAAC,aAAa,EAAE,CAAC;SAC5D;aAAI;YACD,iBAAO,CAAC,UAAU,GAAC,CAAC,CAAC;YACrB,iBAAO,CAAC,WAAW,EAAE,CAAC,aAAa,EAAE,CAAC;SACzC;QAGD,iBAAO,CAAC,IAAI,GAAC,iBAAO,CAAC,WAAW,EAAE,CAAC,OAAO,EAAE,CAAC;QAC7C,iBAAO,CAAC,KAAK,GAAC,iBAAO,CAAC,WAAW,EAAE,CAAC,QAAQ,EAAE,CAAC;QAC/C,iBAAO,CAAC,UAAU,GAAC,iBAAO,CAAC,WAAW,EAAE,CAAC,aAAa,EAAE,CAAC;QACzD,iBAAO,CAAC,KAAK,GAAC,iBAAO,CAAC,WAAW,EAAE,CAAC,QAAQ,EAAE,CAAC;QAC/C,IAAG,CAAC,iBAAO,CAAC,IAAI;YAAE,iBAAO,CAAC,IAAI,GAAC,CAAC,CAAC;QACjC,IAAG,CAAC,iBAAO,CAAC,KAAK;YAAE,iBAAO,CAAC,KAAK,GAAC,CAAC,CAAC;QACnC,IAAG,CAAC,iBAAO,CAAC,UAAU;YAAE,iBAAO,CAAC,UAAU,GAAC,CAAC,CAAC;IACjD,CAAC;IAED,qCAAkB,GAAlB;QACI,IAAG,CAAC,iBAAO,CAAC,SAAS,EAAC;YAAC,OAAO;SAAC;QAC/B,IAAG,CAAC,iBAAO,CAAC,OAAO,CAAC,GAAG,CAAC,MAAM,IAAE,iBAAO,CAAC,OAAO,CAAC,GAAG,CAAC,MAAM,IAAE,CAAC,EAAC;YAAC,OAAO;SAAC;QACvE,IAAG,CAAC,IAAI,CAAC,OAAO,EAAC;YAAC,OAAM;SAAC;QACzB,IAAI,CAAC,OAAO,CAAC,MAAM,GAAC,IAAI,CAAC;QACzB,IAAI,OAAO,GAAC,IAAI,CAAC,OAAO,CAAC,cAAc,CAAC,SAAS,CAAC,CAAC;QACnD,KAAI,IAAI,CAAC,GAAC,CAAC,EAAC,CAAC,GAAC,iBAAO,CAAC,OAAO,CAAC,GAAG,CAAC,MAAM,CAAC,MAAM,EAAC,CAAC,EAAE,EAAC;YAChD,IAAG,CAAC,IAAE,CAAC;gBAAC,OAAO;YACf,IAAI,EAAE,GAAC,EAAE,CAAC,WAAW,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC;YAC/B,EAAE,CAAC,MAAM,GAAC,OAAO,CAAC;YAClB,EAAE,CAAC,KAAK,GAAC,GAAG,CAAC;YACb,EAAE,CAAC,YAAY,CAAC,IAAI,CAAC,CAAC,IAAI,CAAC,iBAAO,CAAC,OAAO,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC;YAC1D,EAAE,CAAC,CAAC,GAAC,CAAC,EAAE,CAAC;YACT,IAAG,CAAC,IAAE,CAAC;gBAAC,EAAE,CAAC,CAAC,GAAC,CAAC,GAAG,CAAC;YAClB,IAAG,CAAC,IAAE,CAAC;gBAAC,EAAE,CAAC,CAAC,GAAC,CAAC,EAAE,CAAC;YACjB,IAAG,CAAC,IAAE,CAAC;gBAAC,EAAE,CAAC,CAAC,GAAC,EAAE,CAAC;YAChB,IAAG,CAAC,IAAE,CAAC;gBAAC,EAAE,CAAC,CAAC,GAAC,GAAG,CAAC;SACpB;QACD,IAAI,CAAC,YAAY,EAAE,CAAC;IACxB,CAAC;IAvND;QADC,QAAQ,CAAC,EAAE,CAAC,MAAM,CAAC;wCACF;IAXD,QAAQ;QAD5B,OAAO;OACa,QAAQ,CAqO5B;IAAD,eAAC;CArOD,AAqOC,CArOqC,EAAE,CAAC,SAAS,GAqOjD;kBArOoB,QAAQ","file":"","sourceRoot":"..\\..\\..\\..\\..\\..\\assets\\Script\\UI\\loading","sourcesContent":["import GameCtr from \"../../Controller/GameCtr\";\r\nimport AudioManager from \"../../Common/AudioManager\";\r\nimport WXCtr from \"../../Controller/WXCtr\";\r\nimport HttpCtr from \"../../Controller/HttpCtr\";\r\nconst {ccclass, property} = cc._decorator;\r\n\r\n@ccclass\r\nexport default class NewClass extends cc.Component {\r\n    _btnStart=null;\r\n    _progress=null;\r\n    _configTotalCount=5;\r\n    _configIndex=0;\r\n    _adNode=null;\r\n    _carouselNode=null;\r\n    _carouseAds=[];\r\n    _carouselIndex=0;\r\n\r\n    @property(cc.Prefab)\r\n    ad:cc.Prefab=null;\r\n\r\n    onLoad(){\r\n      \r\n        this._progress=this.node.getChildByName(\"progress\");\r\n        this._btnStart=this.node.getChildByName(\"btn_start\");\r\n        this._adNode=this.node.getChildByName(\"adNode\");\r\n        this._carouselNode=this.node.getChildByName(\"carouselNode\")\r\n        this.initData();\r\n        this.loadConf();\r\n        this.initBtnStart();\r\n        GameCtr.getInstance();\r\n        //GameCtr.showLoading();\r\n        GameCtr.getInstance().setLoading(this);\r\n        this._btnStart.runAction(cc.repeatForever(cc.sequence(\r\n            cc.scaleTo(0.4,1.05),\r\n            cc.scaleTo(0.4,1.0)\r\n        )))\r\n    }\r\n\r\n    initCarousel(){\r\n        if(!GameCtr.isAudited){return;}\r\n        if(!GameCtr.setting.nav.navA||GameCtr.setting.nav.navA<=0){return;}\r\n\r\n        for(let i=0;i<GameCtr.setting.nav.navA.length;i++){\r\n            let ad=cc.instantiate(this.ad);\r\n            ad.parent=this._carouselNode;\r\n            ad.scale=1.0;\r\n            ad.getComponent(\"ad\").init(GameCtr.setting.nav.navA[i]);\r\n            ad.x=i==0?0:1800;\r\n            this._carouseAds.push(ad);\r\n        }\r\n        this._carouselIndex=0;\r\n        this.scheduleOnce(()=>{\r\n            this._carouseAds[this._carouselIndex].getComponent(\"ad\").doShake();\r\n        },2)\r\n        this.scheduleOnce(this.doCarousel.bind(this),5);\r\n\r\n    }\r\n\r\n    doCarousel(){\r\n        if(this._carouseAds.length<=1){ //广告位推荐位大于1个，才有轮播功能\r\n            return \r\n        }\r\n        this._carouseAds[this._carouselIndex].x=0;\r\n        this._carouseAds[this._carouselIndex].getComponent(\"ad\").doShake();\r\n        for(let i=0;i<this._carouseAds.length;i++){\r\n            if(i==this._carouselIndex){\r\n                continue;\r\n            }\r\n            this._carouseAds[i].rotation=0;\r\n            this._carouseAds[i].getComponent(\"ad\").stopActions();\r\n            this._carouseAds[i].x=1800;//移除屏幕之外\r\n        }\r\n\r\n        this._carouselIndex++;\r\n        this._carouselIndex=this._carouselIndex%this._carouseAds.length;\r\n        this.scheduleOnce(this.doCarousel.bind(this),5);\r\n    }\r\n\r\n\r\n\r\n\r\n    initBtnStart(){\r\n        this._btnStart.on(cc.Node.EventType.TOUCH_END,(e)=>{\r\n            AudioManager.getInstance().playSound(\"audio/open_panel\");\r\n            if(this._configIndex<this._configTotalCount){\r\n                //todo 提示\r\n                return;\r\n            }\r\n            cc.director.loadScene(\"Game\");\r\n        })\r\n    }\r\n\r\n    loadResource(){\r\n        cc.loader.loadResDir(\"textures\",this.progressCallback.bind(this),this.completeCallback.bind(this));\r\n    }\r\n\r\n    progressCallback(completedCount,totalCount,item){\r\n        this._progress.getComponent(cc.ProgressBar).progress=completedCount/totalCount;\r\n    }\r\n\r\n    completeCallback(){\r\n        this.loadConf();\r\n    }\r\n\r\n    loadConf(){\r\n        this.loadLevelConf();\r\n        this.loadmanufactureConf();\r\n        this.loadCombConf();\r\n        this.loadPfTurntableConf()\r\n        this.loadOtherConf();\r\n    }\r\n\r\n    loadLevelConf(){\r\n        cc.loader.loadRes(\"config/level\",(err,res)=>{\r\n            if(err){return}\r\n            GameCtr.levelConfig=res;\r\n            this.checkLoadConfigOver();\r\n        })\r\n    }\r\n\r\n    loadmanufactureConf(){\r\n        cc.loader.loadRes(\"config/manufacture\",(err,res)=>{\r\n            if(err){return}\r\n            GameCtr.manufactureConfig=res;\r\n            this.checkLoadConfigOver();\r\n        })\r\n    }\r\n\r\n    loadCombConf(){\r\n        cc.loader.loadRes(\"config/comb\",(err,res)=>{\r\n            if(err){return}\r\n            GameCtr.combConfig=res;\r\n            this.checkLoadConfigOver();\r\n        })\r\n    }\r\n\r\n    loadPfTurntableConf(){\r\n        cc.loader.loadRes(\"config/pfTurnTable\",(err,res)=>{\r\n            if(err){return}\r\n            GameCtr.pfTurnTableConfig=res;\r\n            console.log(\"log----------GameCtr.pfTurnTableConfig=:\",GameCtr.pfTurnTableConfig);\r\n            this.checkLoadConfigOver();\r\n        }) \r\n    }\r\n\r\n    loadOtherConf(){\r\n        cc.loader.loadRes(\"config/other\",(err,res)=>{\r\n            if(err){return}\r\n            GameCtr.otherConfig=res;\r\n            this.checkLoadConfigOver();\r\n        })\r\n    }\r\n\r\n    checkLoadConfigOver(){\r\n        this._configIndex++;\r\n    }\r\n\r\n\r\n    initData(){\r\n        if(GameCtr.getInstance().getPlayerLevel()){\r\n            GameCtr.level=GameCtr.getInstance().getPlayerLevel(); \r\n        }else{\r\n            GameCtr.level=1;\r\n            GameCtr.getInstance().setPlayerLevel();\r\n        }\r\n\r\n        if(GameCtr.getInstance().getManufactureLevel()){\r\n            GameCtr.ManufactureLevel=GameCtr.getInstance().getManufactureLevel(); \r\n        }else{\r\n            GameCtr.ManufactureLevel=1;\r\n            GameCtr.getInstance().setManufactureLevel();\r\n        }\r\n\r\n        if(GameCtr.getInstance().getCombLevel()){\r\n            GameCtr.comblevel=GameCtr.getInstance().getCombLevel(); \r\n        }else{\r\n            GameCtr.comblevel=1;\r\n            GameCtr.getInstance().setCombLevel();\r\n        }\r\n\r\n        console.log(\"log-------GameCtr.comblebel=:\",GameCtr.comblevel);\r\n\r\n        if(GameCtr.getInstance().getCombsUnlock()){\r\n            GameCtr.combsUnlock=JSON.parse(GameCtr.getInstance().getCombsUnlock()); \r\n        }else{\r\n            GameCtr.combsUnlock=[];\r\n            GameCtr.combsUnlock.push({level:1,unlock:true});\r\n            GameCtr.getInstance().setCombsUnlock();\r\n        }\r\n\r\n        if(window.localStorage.getItem(\"guide\")){\r\n            GameCtr.guide=JSON.parse(window.localStorage.getItem(\"guide\"))\r\n        }else{\r\n            GameCtr.guide=[];\r\n            GameCtr.getInstance().setGuide();\r\n        }\r\n\r\n        if(window.localStorage.getItem(\"honeyValue\")){\r\n            GameCtr.honeyValue=GameCtr.getInstance().getHoneyValue();\r\n        }else{\r\n            GameCtr.honeyValue=0;\r\n            GameCtr.getInstance().setHoneyValue();\r\n        }\r\n\r\n\r\n        GameCtr.rich=GameCtr.getInstance().getRich();\r\n        GameCtr.money=GameCtr.getInstance().getMoney();\r\n        GameCtr.levelMoney=GameCtr.getInstance().getLevelMoney();\r\n        GameCtr.guide=GameCtr.getInstance().getGuide();\r\n        if(!GameCtr.rich) GameCtr.rich=0;\r\n        if(!GameCtr.money) GameCtr.money=0;\r\n        if(!GameCtr.levelMoney) GameCtr.levelMoney=0;\r\n    }\r\n\r\n    refreshMoreNewGame(){\r\n        if(!GameCtr.isAudited){return;}\r\n        if(!GameCtr.setting.nav.banner||GameCtr.setting.nav.banner<=0){return;}\r\n        if(!this._adNode){return}\r\n        this._adNode.active=true;\r\n        let adFrame=this._adNode.getChildByName(\"adFrame\");\r\n        for(let i=0;i<GameCtr.setting.nav.banner.length;i++){\r\n            if(i>=4)return;\r\n            let ad=cc.instantiate(this.ad);\r\n            ad.parent=adFrame;\r\n            ad.scale=1.0;\r\n            ad.getComponent(\"ad\").init(GameCtr.setting.nav.banner[i]);\r\n            ad.y=-15;\r\n            if(i==0)ad.x=-292;\r\n            if(i==1)ad.x=-97;\r\n            if(i==2)ad.x=96;\r\n            if(i==3)ad.x=292; \r\n        }\r\n        this.initCarousel();\r\n    }\r\n\r\n\r\n}\r\n"]}
{"version":3,"sources":["loading.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"../../../../../../assets/Script/UI/loading","sourcesContent":["\r\nimport GameCtr from \"../../Controller/GameCtr\";\r\nconst {ccclass, property} = cc._decorator;\r\n\r\n@ccclass\r\nexport default class NewClass extends cc.Component {\r\n    _progress=null;\r\n    _configTotalCount=4;\r\n    _configIndex=0;\r\n\r\n    onLoad(){\r\n        this._progress=this.node.getChildByName(\"progress\");\r\n        this.loadResource();\r\n    }\r\n\r\n    loadResource(){\r\n        cc.loader.loadResDir(\"textures\",this.progressCallback.bind(this),this.completeCallback.bind(this));\r\n    }\r\n\r\n    progressCallback(completedCount,totalCount,item){\r\n        this._progress.getComponent(cc.ProgressBar).progress=completedCount/totalCount;\r\n    }\r\n\r\n    completeCallback(){\r\n        this.loadConfigs();\r\n    }\r\n\r\n    loadConfigs(){\r\n        this.loadLevelConfig();\r\n        this.loadmanufacture();\r\n        this.loadCombConfig();\r\n        this.loadOtherConfig();\r\n    }\r\n\r\n    loadLevelConfig(){\r\n        cc.loader.loadRes(\"config/level\",(err,res)=>{\r\n            if(err){return}\r\n            GameCtr.levelConfig=res;\r\n            this.checkLoadConfigOver();\r\n        })\r\n    }\r\n\r\n    loadmanufacture(){\r\n        cc.loader.loadRes(\"config/manufacture\",(err,res)=>{\r\n            if(err){return}\r\n            GameCtr.manufactureConfig=res;\r\n            this.checkLoadConfigOver();\r\n        })\r\n    }\r\n\r\n    loadCombConfig(){\r\n        cc.loader.loadRes(\"config/comb\",(err,res)=>{\r\n            if(err){return}\r\n            GameCtr.combConfig=res;\r\n            this.checkLoadConfigOver();\r\n        })\r\n    }\r\n\r\n    loadOtherConfig(){\r\n        cc.loader.loadRes(\"config/other\",(err,res)=>{\r\n            if(err){return}\r\n            GameCtr.otherConfig=res;\r\n            this.checkLoadConfigOver();\r\n        })\r\n    }\r\n\r\n    checkLoadConfigOver(){\r\n        this._configIndex++;\r\n        if(this._configIndex==this._configTotalCount){\r\n            cc.director.loadScene(\"Game\");\r\n        }\r\n    }\r\n\r\n\r\n\r\n   \r\n}\r\n"]}
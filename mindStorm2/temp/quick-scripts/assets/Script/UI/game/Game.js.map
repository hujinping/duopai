{"version":3,"sources":["Game.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"..\\..\\..\\..\\..\\..\\assets\\Script\\UI\\game","sourcesContent":["/**\r\n * 游戏界面\r\n * 游戏逻辑自己实现\r\n */\r\nimport GameCtr from \"../../Controller/GameCtr\";\r\nimport WXCtr from \"../../Controller/WXCtr\";\r\nimport ViewManager from \"../../Common/ViewManager\";\r\nimport HttpCtr from \"../../Controller/HttpCtr\";\r\nimport UserManager from \"../../Common/UserManager\";\r\nimport Util from \"../../Common/Util\";\r\nimport AudioManager from \"../../Common/AudioManager\";\r\nconst { ccclass, property } = cc._decorator;\r\n\r\nenum GameMap{\r\n    LEFT,\r\n    RIGHT\r\n}\r\n\r\nenum Obstacle{\r\n    CAVE,\r\n    CACTI,\r\n}\r\n\r\n@ccclass\r\nexport default class Game extends cc.Component {\r\n\r\n    @property(cc.Prefab)\r\n    cave:cc.Prefab=null;\r\n\r\n    @property(cc.Prefab)\r\n    cacti:cc.Prefab=null;\r\n\r\n    @property(cc.Prefab)\r\n    role_1:cc.Prefab=null;\r\n\r\n    @property(cc.Prefab)\r\n    role_2:cc.Prefab=null;\r\n\r\n    @property(cc.Prefab)\r\n    role_3:cc.Prefab=null;\r\n    \r\n    @property(cc.Prefab)\r\n    morePower:cc.Prefab=null;\r\n\r\n    @property(cc.Prefab)\r\n    titlePrefab:cc.Prefab=null;\r\n\r\n    @property(cc.Prefab)\r\n    revivePrefab:cc.Prefab=null;\r\n\r\n    @property(cc.Prefab)\r\n    eatChickenPrefab:cc.Prefab=null;\r\n\r\n    @property(cc.Prefab)\r\n    flagPrefab:cc.Prefab=null;\r\n\r\n    @property(cc.Node)\r\n    choiceIcon:cc.Node\r\n\r\n    private gameBg1=null;\r\n    private gameBg2=null;\r\n    private btn_error=null;\r\n    private btn_error_clicked=null;\r\n    private btn_corrent=null;\r\n    private btn_corrent_clicked=null;\r\n    private titleNode=null;\r\n    private reviveNode=null;\r\n    private line=null;\r\n    private gameOverNode=null;\r\n    private firstTitleTime=10;\r\n    private titleIntervalTime=10;\r\n    private matchingCount=3;\r\n    private lastAnswerTime=-1;\r\n    private lastAnserFinishTime=-1;\r\n    \r\n    private obstacleNode=null;\r\n    private banAnswer=false;\r\n    private isGameOver=false;\r\n    private isObstacleComing=false;\r\n    private dieLeft=false;\r\n\r\n    private birthPlaceArr=[];\r\n    private rolePlaceArr=[];\r\n    private roles=[];\r\n    private roleModleArr=[];\r\n    \r\n    onLoad() {\r\n        GameCtr.getInstance().setGame(this);\r\n        this.initData();\r\n        this.initNode();\r\n        this.initBtns();\r\n        this.initEvent();\r\n    }\r\n\r\n    initData(){\r\n        this.birthPlaceArr.push(cc.p(-600,600));\r\n        this.birthPlaceArr.push(cc.p( 600,600));\r\n        this.birthPlaceArr.push(cc.p(-600,0));\r\n        this.birthPlaceArr.push(cc.p( 600,0));\r\n        this.birthPlaceArr.push(cc.p(-600,-600));\r\n        this.birthPlaceArr.push(cc.p( 600,-600));\r\n\r\n        for(let i=0;i<GameCtr.gameRoleCount*2;i++){\r\n            let offx=i%6>=3?50:0;\r\n            this.rolePlaceArr.push({pos:cc.p(-400+(i%6)*150+offx+Math.random()*50-25,-480+Math.floor(i/6)*150),isEmpty:true,index:i});\r\n        }\r\n\r\n        this.roleModleArr.push(this.role_1);\r\n        this.roleModleArr.push(this.role_2);\r\n        this.roleModleArr.push(this.role_3);\r\n    }\r\n\r\n    initNode(){\r\n        this.gameBg1=this.node.getChildByName('bg1');\r\n        this.gameBg2=this.node.getChildByName('bg2');\r\n        this.line=this.node.getChildByName(\"line\");\r\n        this.line.active=false;\r\n        this.initGameOverNode();\r\n    }\r\n\r\n    initBtns(){\r\n        this.btn_error=this.node.getChildByName(\"btn_error\");\r\n        this.btn_corrent=this.node.getChildByName(\"btn_corrent\");\r\n        this.btn_error_clicked=this.node.getChildByName(\"btn_error_clicked\");\r\n        this.btn_corrent_clicked=this.node.getChildByName(\"btn_corrent_clicked\");\r\n\r\n        this.btn_error.active=false;\r\n        this.btn_corrent.active=false;\r\n        this.btn_error_clicked.active=false;\r\n        this.btn_corrent_clicked.active=false;\r\n\r\n        this.initBtn(this.btn_error);\r\n        this.initBtn(this.btn_corrent);\r\n\r\n    }\r\n\r\n    initBtn(btn){\r\n        btn.on(cc.Node.EventType.TOUCH_END,function(e){\r\n            if((Date.now()-this.lastAnswerTime)/1000<0.6){return;}\r\n            if((Date.now()-this.lastAnserFinishTime)/1000<1.0){return;}\r\n            if(this.isObstacleComing){return;}\r\n           \r\n            AudioManager.getInstance().playSound(\"audio/btnCick\");\r\n            this.doRoleAnswer(0);\r\n            let btnName=e.target.getName();\r\n            if(btnName==\"btn_corrent\"){\r\n                this.btn_error.active=true;\r\n                this.btn_corrent.active=false;\r\n                this.btn_error_clicked.active=false;\r\n                this.btn_corrent_clicked.active=true;\r\n                this.choiceIcon.x=-280;\r\n            }else if(btnName=\"btn_error\"){\r\n                this.btn_error.active=false;\r\n                this.btn_corrent.active=true;\r\n                this.btn_error_clicked.active=true;\r\n                this.btn_corrent_clicked.active=false;\r\n                this.choiceIcon.x=280;\r\n            }\r\n\r\n            this.choiceIcon.active=true;\r\n            this.choiceIcon.opacity=0;\r\n            this.choiceIcon.runAction(cc.sequence(\r\n                cc.fadeIn(0.2),\r\n                cc.delayTime(0.1),\r\n                cc.fadeOut(0.2)\r\n            ));\r\n            this.lastAnswerTime=Date.now();\r\n        }.bind(this))\r\n    }\r\n\r\n    initGameOverNode(){\r\n        this.gameOverNode=this.node.getChildByName(\"gameOver\");\r\n        let btn_back=this.gameOverNode.getChildByName(\"frame\").getChildByName(\"btn_back\");\r\n        let btn_continue=this.gameOverNode.getChildByName(\"frame\").getChildByName(\"btn_continue\");\r\n        let btn_share=this.gameOverNode.getChildByName(\"desFrame\").getChildByName(\"btn_share\");\r\n       \r\n        this.gameOverNode.setLocalZOrder(80);\r\n\r\n        btn_back.on(cc.Node.EventType.TOUCH_END,function(e){\r\n            AudioManager.getInstance().playSound(\"audio/btnCick\");\r\n            cc.director.loadScene(\"Start\")\r\n        })\r\n\r\n        btn_share.on(cc.Node.EventType.TOUCH_END,function(e){\r\n            AudioManager.getInstance().playSound(\"audio/btnCick\");\r\n            WXCtr.share(null);\r\n        })\r\n\r\n        btn_continue.on(cc.Node.EventType.TOUCH_END,function(e){\r\n            AudioManager.getInstance().playSound(\"audio/btnCick\");\r\n            if(GameCtr.powerValue>0){\r\n                GameCtr.powerValue--;\r\n                this.gameOverNode.active=false;\r\n                this.clearRoles();\r\n                this.start();\r\n                this.gameBg1;\r\n                this.gameBg2;\r\n            }else{\r\n                if(!GameCtr.isAudited){\r\n                    ViewManager.toast(\"没有体力值\");\r\n                    return}\r\n                if(this.node.getChildByName(\"morePower\")){return}\r\n                let morePowerNode=cc.instantiate(this.morePower);\r\n                morePowerNode.parent=this.node;\r\n                morePowerNode.setLocalZOrder(100);\r\n               \r\n            }\r\n        }.bind(this))\r\n    }\r\n\r\n    initEvent(){\r\n        GameCtr.getInstance().addListener(\"answerFinish\",  this.onAnswerFinish.bind(this));\r\n        GameCtr.getInstance().addListener(\"shareSuccess\",  this.onShareSuccess.bind(this));\r\n        GameCtr.getInstance().addListener(\"banAnswer\",     this.onBanAnswer.bind(this));\r\n        GameCtr.getInstance().addListener(\"matchCountDown\",this.onMatchCountDown.bind(this));\r\n        GameCtr.getInstance().addListener(\"showFlag\",      this.onShowFlag.bind(this));\r\n        GameCtr.getInstance().addListener(\"choiceGame\",    this.onChoiceGame.bind(this));\r\n        GameCtr.getInstance().addListener(\"restartGame\",   this.onRestartGame.bind(this));\r\n    }\r\n\r\n\r\n    start() {\r\n        this.matchingCount=3;\r\n        GameCtr.reviveTimes=1;\r\n        this.isGameOver=false;\r\n        this.isObstacleComing=false;\r\n        this.lastAnswerTime=Date.now();\r\n        GameCtr.rankingEntrance = \"Start\";               //进入游戏后把排行榜的入口信息恢复成默认\r\n        GameCtr.isMatchingOver =false;\r\n        HttpCtr.GameStart(null);\r\n        HttpCtr.getGameStartInfo(this.initMatchingRoles.bind(this));\r\n        this.showMatching();\r\n        this.scheduleOnce(function(){\r\n            this.getTitie();\r\n            AudioManager.getInstance().playSound(\"audio/start\");\r\n        }.bind(this),this.firstTitleTime);\r\n        this.startBgRoll();\r\n    }\r\n\r\n    startBgRoll(){\r\n        this.gameBg1.stopAllActions();\r\n        this.gameBg2.stopAllActions();\r\n        this.gameBg1.y=0;\r\n        this.gameBg2.y=-GameCtr.IPONEX_HEIGHT;\r\n\r\n        this.gameBg1.runAction(cc.repeatForever(cc.sequence(\r\n            cc.moveBy(2.5,cc.p(0,GameCtr.IPONEX_HEIGHT)),\r\n            cc.callFunc(function(){\r\n                if(this.gameBg1.y>=GameCtr.IPONEX_HEIGHT-5){this.gameBg1.y=-GameCtr.IPONEX_HEIGHT};\r\n            }.bind(this)),\r\n        )));\r\n        this.gameBg2.runAction(cc.repeatForever(cc.sequence(\r\n            cc.moveBy(2.5,cc.p(0,GameCtr.IPONEX_HEIGHT)),\r\n            cc.callFunc(function(){\r\n                if(this.gameBg2.y>=GameCtr.IPONEX_HEIGHT-5){this.gameBg2.y=-GameCtr.IPONEX_HEIGHT};\r\n            }.bind(this)),\r\n        )));\r\n\r\n        if(this.obstacleNode){\r\n            this.obstacleNode.destroy();\r\n        }\r\n    }\r\n\r\n\r\n    showMatching(){\r\n        this.titleNode=cc.instantiate(this.titlePrefab);\r\n        this.titleNode.parent=this.node;\r\n        this.titleNode.getComponent(\"titleNode\").showMatching();\r\n        this.titleNode.setLocalZOrder(40);\r\n    }\r\n\r\n    getTitie(){\r\n        if(this.isGameOver){\r\n            return;\r\n        }\r\n        this.banAnswer=false;\r\n        this.titleNode.active=true;\r\n        this.titleNode.getComponent(\"titleNode\").getTitle();\r\n        this.btn_error.active=true;\r\n        this.btn_corrent.active=true;\r\n        this.line.active=true;\r\n        this.randomOtherRoleAnswer();\r\n        this.switchBtnStateByPos();\r\n\r\n        this.scheduleOnce(this.getTitie.bind(this),this.titleIntervalTime);\r\n    }\r\n\r\n    switchBtnStateByPos(){\r\n        if(this.roles[0].node.x>0){//自己在错误队列\r\n            this.btn_error.active=false;\r\n            this.btn_corrent.active=true;\r\n            this.btn_error_clicked.active=true;\r\n            this.btn_corrent_clicked.active=false;\r\n        }else{\r\n            this.btn_error.active=true;\r\n            this.btn_corrent.active=false;\r\n            this.btn_error_clicked.active=false;\r\n            this.btn_corrent_clicked.active=true;\r\n        }\r\n    }\r\n\r\n    initMatchingRoles(matchingRoles){\r\n        for(let i=0;i<GameCtr.gameRoleCount;i++){\r\n            this.node.runAction(cc.sequence(\r\n                cc.delayTime(0.2*i),\r\n                cc.callFunc(function(){\r\n                let role=null;\r\n                if(i==0){//初始化玩家自己\r\n                    let selfInfo=GameCtr.getInstance().getSelfInfoFromLocal();\r\n                    role=cc.instantiate(this.roleModleArr[GameCtr.roleTag]);\r\n                    role.parent=this.node;\r\n                    role.getComponent(\"role\").setName(Util.cutstr(selfInfo.nickName,4));\r\n                    role.getComponent(\"role\").setHeadImg(selfInfo.avatarUrl);\r\n                }else{//其他玩家\r\n                    role=cc.instantiate(this.roleModleArr[Math.floor(Math.random()*3)]);\r\n                    role.parent=this.node;\r\n                    role.getComponent(\"role\").setName(Util.cutstr(matchingRoles[i].nick,4));\r\n                }\r\n                let randomNum=Math.floor(Math.random()*6);\r\n                role.x=this.birthPlaceArr[randomNum].x;\r\n                role.y=this.birthPlaceArr[randomNum].y;\r\n                \r\n                role.tag=i;\r\n                role.setLocalZOrder(GameCtr.gameRoleCount*2-i);\r\n                role.runAction(cc.moveTo(0.3,this.rolePlaceArr[i].pos)); \r\n                this.rolePlaceArr[i].isEmpty=false;\r\n                this.roles.push({node:role,die:false});\r\n                }.bind(this))\r\n            ))\r\n        }\r\n    }\r\n\r\n\r\n    randomOtherRoleAnswer(){\r\n        if(this.banAnswer ||this.roles.length==1){return}\r\n\r\n        let randomNum=Math.floor(Math.random()*(this.roles.length-1)+1);\r\n        randomNum=this.roles.length==1?0:randomNum;\r\n            \r\n        this.doRoleAnswer(randomNum);\r\n        let nextTime=Math.random()*0.5+Math.floor(8/this.roles.length);\r\n        \r\n        this.scheduleOnce(this.randomOtherRoleAnswer.bind(this),nextTime);\r\n        this.scheduleOnce(this.makeUpRoles.bind(this),nextTime*(1.5));\r\n    }\r\n\r\n\r\n\r\n    doRoleAnswer(roleIndex){\r\n        let role=this.roles[roleIndex].node;\r\n        this.rolePlaceArr[role.tag].isEmpty=true;\r\n        let posIndex=null;\r\n        if(role.x>0){//此机器人判断当前问题是错的\r\n            posIndex=this.getBestEmptyPosIndex(GameMap.LEFT);\r\n        }else{//此机器人判断当前问题是对的\r\n            posIndex=this.getBestEmptyPosIndex(GameMap.RIGHT);\r\n        }\r\n        role.stopAllActions();\r\n        console.log(\"log-----------doRoleAnswer-----------roleIndex  this.rolePlaceArr=:\",posIndex,this.rolePlaceArr);\r\n        role.runAction(cc.moveTo(0.5,cc.p(this.rolePlaceArr[posIndex].pos)));\r\n        role.setLocalZOrder(GameCtr.gameRoleCount*2-posIndex);\r\n        role.tag=posIndex;\r\n        this.rolePlaceArr[posIndex].isEmpty=false;\r\n\r\n    }\r\n\r\n    getPrePosIndex(role){\r\n        for(let i=0;i<this.rolePlaceArr.length;i++){\r\n            if(role.x==this.rolePlaceArr[i].pos.x && role.y==this.rolePlaceArr[i].pos.y){\r\n                return i\r\n            }\r\n        }\r\n    }\r\n\r\n    getBestEmptyPosIndex(gameMapPos:GameMap){\r\n        if(gameMapPos==GameMap.LEFT){\r\n            for(let i=0;i<this.rolePlaceArr.length;i++){\r\n                if(i%6>=3){continue;}\r\n                if(this.rolePlaceArr[i].isEmpty) \r\n                    return i; \r\n            }\r\n        }else {\r\n            for(let i=0;i<this.rolePlaceArr.length;i++){\r\n                if(i%6<3){continue;}\r\n                if(this.rolePlaceArr[i].isEmpty) \r\n                    return i; \r\n            }\r\n        }\r\n    }\r\n\r\n    //当前玩家要到另一队列中，需要找到最后面的机器人来补齐此机器人的位置\r\n    makeUpRoles(){\r\n        if(this.banAnswer){return}\r\n\r\n        let randomNum=Math.floor(Math.random()*(this.roles.length-1)+1);\r\n        randomNum=this.roles.length==1?0:randomNum;\r\n\r\n        if(this.roles[randomNum].node.x>0){\r\n            for(let i =0;i<this.rolePlaceArr.length;i++){\r\n                if(i%6<3){continue;}\r\n                if(randomNum-i<6){return};\r\n\r\n                if(this.rolePlaceArr[i].isEmpty){\r\n                    this.rolePlaceArr[this.roles[randomNum].node.tag].isEmpty=true;\r\n                    this.rolePlaceArr[i].isEmpty=false;\r\n                    this.roles[randomNum].node.tag=i;\r\n                    this.roles[randomNum].node.setLocalZOrder(GameCtr.gameRoleCount*2-i)\r\n                    this.roles[randomNum].node.stopAllActions();\r\n                    this.roles[randomNum].node.runAction(cc.moveTo(0.5,this.rolePlaceArr[i].pos))\r\n                    return \r\n                }\r\n            }\r\n\r\n        }else{\r\n            for(let i =0;i<this.rolePlaceArr.length;i++){\r\n                if(i%6>3){continue;}\r\n                if(randomNum-i<6){return};\r\n\r\n                if(this.rolePlaceArr[i].isEmpty){\r\n                    this.rolePlaceArr[this.roles[randomNum].node.tag].isEmpty=true;\r\n                    this.rolePlaceArr[i].isEmpty=false;\r\n                    this.roles[randomNum].node.tag=i;\r\n                    this.roles[randomNum].node.setLocalZOrder(GameCtr.gameRoleCount*2-i) \r\n                    this.roles[randomNum].node.stopAllActions();\r\n                    this.roles[randomNum].node.runAction(cc.moveTo(0.5,this.rolePlaceArr[i].pos))\r\n                    return \r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n\r\n\r\n    getBackwardRoleIndex(gameMapPos:GameMap){\r\n        if(gameMapPos==GameMap.LEFT){\r\n            for(let i=this.rolePlaceArr.length-1;i>=0;i--){\r\n                if(i%6>=3){continue;}\r\n                if(!this.rolePlaceArr[i].isEmpty) \r\n                    return i; \r\n            }\r\n        }else {\r\n            for(let i=this.rolePlaceArr.length-1;i>=0;i--){\r\n                if(i%6<3){continue;}\r\n                if(!this.rolePlaceArr[i].isEmpty) \r\n                    return i; \r\n            }\r\n        }\r\n    }\r\n\r\n    showErrorObstacle(){\r\n        this.isObstacleComing=true;\r\n        let randnum=Math.floor(Math.random()*2);\r\n        let absX=null;\r\n        if(randnum==Obstacle.CAVE){\r\n            this.obstacleNode=cc.instantiate(this.cave);\r\n            this.obstacleNode.scaleX=1.0;\r\n            absX=310;\r\n        }else if(randnum==Obstacle.CACTI){\r\n            this.obstacleNode=cc.instantiate(this.cacti);\r\n            this.obstacleNode.scaleX=0.79;\r\n            this.obstacleNode.scaleY=0.79*0.79;\r\n            absX=274;\r\n        }\r\n\r\n        if(this.gameBg1.y<0){\r\n            this.obstacleNode.parent=this.gameBg1;\r\n        }else{\r\n            this.obstacleNode.parent=this.gameBg2;\r\n        }\r\n        \r\n        if(GameCtr.questionAnswer==1){\r\n            this.obstacleNode.x=absX\r\n        }else{\r\n            this.obstacleNode.x=-absX\r\n        }\r\n        this.obstacleNode.y=-960;\r\n        this.obstacleNode.scaleY=1/1.269\r\n        this.obstacleNode.tag=randnum;\r\n    }\r\n\r\n    //增加游戏分数\r\n    addScore(num = 1) {\r\n        GameCtr.addScore(num);\r\n    }\r\n\r\n    /**\r\n     * 下面两个方法为测试用，自己根据实际需求处理\r\n     */\r\n    gameOver() {\r\n        GameCtr.gameOver();\r\n    }\r\n\r\n    clickAddScore() {\r\n        this.addScore(1);\r\n    }\r\n \r\n    showRevive(){\r\n        if(this.node.getChildByName(\"revive\")){return};\r\n        if(!GameCtr.isAudited){return}\r\n\r\n        this.reviveNode=cc.instantiate(this.revivePrefab);\r\n        this.reviveNode.parent=this.node;\r\n        this.reviveNode.setLocalZOrder(60);\r\n    }\r\n\r\n    matchingCountDown(){\r\n        if(this.matchingCount==0){return};\r\n        let countNode=this.node.getChildByName(\"countDown_\"+this.matchingCount);\r\n        countNode.active=true;\r\n        countNode.setLocalZOrder(90);\r\n        countNode.scale=1.8;\r\n        countNode.runAction(cc.sequence(\r\n            cc.scaleTo(0.5,1.0),\r\n            cc.delayTime(0.5),\r\n            cc.callFunc(function(){\r\n                countNode.active=false;\r\n            })\r\n        ))\r\n        this.matchingCount--;\r\n        AudioManager.getInstance().playSound(\"audio/countDown\");\r\n        this.scheduleOnce(this.matchingCountDown.bind(this),1);\r\n    }   \r\n    \r\n    \r\n    clearRoles(){\r\n        for(let i=0;i<this.roles.length;i++){\r\n            this.roles[i].node.destroy();\r\n        }\r\n        this.roles.splice(0,this.roles.length);\r\n    }\r\n\r\n    /*------------------------------event-------------------------*/\r\n    onAnswerFinish(){\r\n        this.lastAnserFinishTime=Date.now();\r\n        this.node.runAction(cc.sequence(\r\n            cc.delayTime(1.5),\r\n            cc.callFunc(function(){\r\n                this.obstacleNode.destroy();\r\n                this.obstacleNode=null;\r\n            }.bind(this))\r\n        ))\r\n    }\r\n\r\n    \r\n    onBanAnswer(){\r\n        this.banAnswer=true;\r\n        this.showErrorObstacle();\r\n        this.hideGameBtns();\r\n    }\r\n\r\n    onShowFlag(){\r\n        while(this.node.getChildByTag(5555)){\r\n            this.node.removeChildByTag(5555);\r\n        }\r\n        let flag=cc.instantiate(this.flagPrefab);\r\n        flag.setLocalZOrder(80);\r\n        flag.parent=this.node;\r\n        flag.tag=5555;\r\n    }\r\n\r\n    onMatchCountDown(){ \r\n       this.matchingCountDown()\r\n    }\r\n\r\n    onShareSuccess(){\r\n        this.reviveNode.destroy();\r\n        this.reviveNode=null;\r\n        this.revive();\r\n        AudioManager.getInstance().playMusic(\"audio/gameMusic\");\r\n        //console.log(\"log---------------音乐开关=：\", AudioManager.getInstance().musicOn);\r\n    }\r\n\r\n    onChoiceGame(){\r\n        let desFrame=this.gameOverNode.getChildByName(\"desFrame\");\r\n        desFrame.active=!GameCtr.isAudited?false:true\r\n        let lb_question=this.gameOverNode.getChildByName(\"desFrame\").getChildByName(\"lb_question\");\r\n        let lb_answer=this.gameOverNode.getChildByName(\"desFrame\").getChildByName(\"lb_answer\");\r\n        lb_question.getComponent(cc.Label).string=GameCtr.questionDes;\r\n        lb_answer.getComponent(cc.Label).string=GameCtr.questionAnswer==1?\"正确\":\"错误\";\r\n\r\n        this.node.runAction(cc.sequence(\r\n            cc.delayTime(0.3),\r\n            cc.callFunc(function(){\r\n                this.gameOverNode.active=true;\r\n            }.bind(this))\r\n        ))\r\n    }\r\n\r\n    onRestartGame(){\r\n        this.clearRoles();\r\n        this.start();\r\n    }\r\n\r\n    //----------------------------------------------------------------------------------//\r\n    showEatChicken(){\r\n        let eatChickenNode=cc.instantiate(this.eatChickenPrefab);\r\n        eatChickenNode.parent=this.node;\r\n        eatChickenNode.setLocalZOrder(60);\r\n    }\r\n\r\n\r\n    collateRolesData(){\r\n        let rolesTemp=[];\r\n        for(let i=0;i<this.roles.length;i++){\r\n            if(!this.roles[i].die){\r\n                rolesTemp.push(this.roles[i]);\r\n            }\r\n        }\r\n        this.roles.splice(0,this.roles.length);\r\n        for(let i=0;i<rolesTemp.length;i++){\r\n            this.roles.push(rolesTemp[i]);\r\n        }\r\n    }\r\n\r\n    checkEatChicken(){\r\n        if(this.roles.length==1&&!this.isGameOver){//吃鸡成功\r\n            this.unscheduleAllCallbacks();\r\n            this.titleNode.getComponent(\"titleNode\").unscheduleAllCallbacks();\r\n            HttpCtr.getGameWin(null);\r\n            this.showEatChicken();\r\n        }\r\n    }\r\n\r\n    doAbstacle(){\r\n        let offx=GameCtr.questionAnswer==2?1:-1;\r\n        for(let i=0;i<this.roles.length;i++){\r\n            if(offx*this.roles[i].node.x>0){\r\n\r\n            }else{\r\n                if(i==0){\r\n                    this.isGameOver=true;\r\n                    this.dieLeft=this.roles[0].node.x>0?false:true;\r\n                    this.roles[i].node.getComponent(\"role\").die(this.obstacleNode.tag,false);\r\n                    this.rolePlaceArr[this.roles[i].node.tag].isEmpty=true;\r\n                    this.unscheduleAllCallbacks();\r\n                }else{\r\n                    this.roles[i].die=true;\r\n                    this.rolePlaceArr[this.roles[i].node.tag].isEmpty=true;\r\n                    this.roles[i].node.getComponent(\"role\").die(this.obstacleNode.tag);\r\n                    \r\n                }\r\n            }\r\n        }\r\n\r\n        this.collateRolesData();\r\n        this.chickRivive();\r\n        this.setMoney();\r\n        this.checkEatChicken();\r\n    }\r\n\r\n    setMoney(){\r\n        if(!this.isGameOver){\r\n            GameCtr.money+=10;\r\n            HttpCtr.setMoney(GameCtr.money);\r\n        }\r\n    }\r\n\r\n    chickRivive(){\r\n        if(!this.isGameOver){return;}\r\n        console.log(\"log------------------GameCtr.totalReviveTimes  GameCtr.reviveData.revive_number=:\",GameCtr.totalReviveTimes,GameCtr.reviveData.revive_number)\r\n        if(GameCtr.reviveTimes>0&&this.roles.length>1&&GameCtr.isAudited&&GameCtr.totalReviveTimes<=GameCtr.reviveData.revive_number){\r\n            this.scheduleOnce(this.showRevive.bind(this),1.0);\r\n        }else{\r\n            this.onChoiceGame();\r\n        }\r\n    }\r\n\r\n\r\n    hideGameBtns(){\r\n        this.btn_error.active=false;\r\n        this.btn_corrent.active=false;\r\n        this.btn_error_clicked.active=false;\r\n        this.btn_corrent_clicked.active=false;\r\n        this.line.active=false;\r\n    }\r\n\r\n\r\n    revive(){\r\n        this.isGameOver=false;\r\n        this.roles[0].node.active=true;\r\n        let posIndex=null;\r\n        console.log(\"log--------------revive-----this.dieLeft=:\",this.dieLeft);\r\n        if(!this.dieLeft){\r\n            posIndex=this.getBestEmptyPosIndex(GameMap.RIGHT);\r\n        }else{\r\n            posIndex=this.getBestEmptyPosIndex(GameMap.LEFT);\r\n        }\r\n        console.log(\"log--------------revive-----this.dieLeft posIndex=:\",this.dieLeft,posIndex);\r\n        this.roles[0].node.setLocalZOrder(GameCtr.gameRoleCount*2-posIndex);\r\n        this.roles[0].node.tag=posIndex;\r\n        this.roles[0].node.x=this.rolePlaceArr[posIndex].pos.x;\r\n        this.roles[0].node.y=this.rolePlaceArr[posIndex].pos.y;\r\n        this.rolePlaceArr[posIndex].isEmpty=false;\r\n\r\n        GameCtr.reviveTimes--;\r\n        GameCtr.totalReviveTimes++;\r\n        this.unscheduleAllCallbacks();\r\n        this.titleNode.getComponent(\"titleNode\").unscheduleAllCallbacks();\r\n        this.getTitie();\r\n        this.startBgRoll();\r\n    }\r\n\r\n    update (dt) {\r\n        if(this.obstacleNode && this.isObstacleComing){\r\n            if(this.obstacleNode.parent.y>200){\r\n                this.doAbstacle();\r\n                this.isObstacleComing=false;\r\n            }\r\n        }\r\n    }\r\n}\r\n"]}
require=function a(r,c,s){function l(t,e){if(!c[t]){if(!r[t]){var o="function"==typeof require&&require;if(!e&&o)return o(t,!0);if(d)return d(t,!0);var n=new Error("Cannot find module '"+t+"'");throw n.code="MODULE_NOT_FOUND",n}var i=c[t]={exports:{}};r[t][0].call(i.exports,function(e){return l(r[t][1][e]||e)},i,i.exports,a,r,c,s)}return c[t].exports}for(var d="function"==typeof require&&require,e=0;e<s.length;e++)l(s[e]);return l}({AudioManager:[function(e,t,o){"use strict";cc._RF.push(t,"55d02b1p5hDgagEsZ4zByL4","AudioManager"),Object.defineProperty(o,"__esModule",{value:!0});var n=cc._decorator,i=n.ccclass,a=(n.property,function(){function e(){this.string=null,this.musicId=null,this.soundId=null,this._musicOn=!0,this._soundOn=!0}return(t=e).getInstance=function(){return null==t.mAudioManager&&(t.mAudioManager=new t),t.mAudioManager},e.prototype.playMusic=function(o,n,i){return void 0===n&&(n=!0),void 0===i&&(i=1),__awaiter(this,void 0,void 0,function(){var t;return __generator(this,function(e){switch(e.label){case 0:if(!o)return[2];e.label=1;case 1:return e.trys.push([1,4,,5]),this.musicPath==o?[3,3]:(null!=this.musicId&&cc.audioEngine.stop(this.musicId),[4,(t=this).play(o,n,i)]);case 2:t.musicId=e.sent(),e.label=3;case 3:return this.musicPath=o,this.musicOn||this.pauseMusic(),[3,5];case 4:return e.sent(),[3,5];case 5:return[2]}})})},e.prototype.pauseMusic=function(){cc.audioEngine.pause(this.musicId)},e.prototype.resumeMusic=function(){cc.audioEngine.resume(this.musicId)},e.prototype.playSoundAsync=function(e,t,o,n){void 0===t&&(t=!1);var i=this.playSound(e,t);if(i){if(o&&n)return void i.then(o,n);n&&i.catch(n)}else n&&n(null)},e.prototype.playSound=function(o,n){return void 0===n&&(n=!1),__awaiter(this,void 0,void 0,function(){var t;return __generator(this,function(e){switch(e.label){case 0:if(!o)return[2];if(!this.soundOn)return[2];e.label=1;case 1:return e.trys.push([1,3,,4]),[4,(t=this).play(o,n)];case 2:return t.soundId=e.sent(),[2,this.soundId];case 3:return e.sent(),[3,4];case 4:return[2]}})})},e.prototype.stopSound=function(e){"number"==typeof e&&cc.audioEngine.stop(e)},e.prototype.stopAll=function(){this.musicPath=null,this.musicId=null,cc.audioEngine.stopAll()},e.prototype.play=function(t,a,r){return void 0===a&&(a=!1),void 0===r&&(r=1),__awaiter(this,void 0,void 0,function(){return __generator(this,function(e){return[2,new Promise(function(n,i){cc.loader.loadRes(t,function(e,t){if(e)cc.error(e),i(e);else{var o=cc.audioEngine.play(t,a,r);n(o)}})})]})})},Object.defineProperty(e.prototype,"musicOn",{get:function(){return this._musicOn},set:function(e){this._musicOn!=e&&((this._musicOn=e)?this.resumeMusic():this.pauseMusic())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"soundOn",{get:function(){return this._soundOn},set:function(e){this._soundOn=e},enumerable:!0,configurable:!0}),e=t=__decorate([i],e);var t}());o.default=a,cc._RF.pop()},{}],BaseDialog:[function(e,t,o){"use strict";cc._RF.push(t,"dfe29FRZ8NPSpj5hr0RuVh2","BaseDialog"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("./PopupView"),i=e("../../Common/Util"),a=cc._decorator,r=a.ccclass,c=(a.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),(o=t).prototype.onLoad=function(){var e=i.default.findChildByName(o.ButtonTag.SURE,this.node);e&&(this._sureButton=e.getComponent(cc.Button)),(e=i.default.findChildByName(o.ButtonTag.CANCEL,this.node))&&(this._cancelButton=e.getComponent(cc.Button)),(e=i.default.findChildByName(o.ButtonTag.CLOSE,this.node))&&(this._closeButton=e.getComponent(cc.Button)),this.initButton(this._sureButton,o.ButtonTag.SURE),this.initButton(this._cancelButton,o.ButtonTag.CANCEL),this.initButton(this._closeButton,o.ButtonTag.CLOSE),this.initData()},t.prototype.initData=function(){},t.prototype.setData=function(e){this._data=e},t.prototype.dismiss=function(){if(this.node.parent){var e=this.node.parent.getComponent(n.default);e?e.dismiss():this.node.destroy()}},t.prototype.onButtonClick=function(e,t){switch(t){case o.ButtonTag.SURE:break;case o.ButtonTag.CANCEL:case o.ButtonTag.CLOSE:this.dismiss()}},t.prototype.initButton=function(e,t){if(cc.isValid(e)){var o=new cc.Component.EventHandler;o.target=this.node,o.component="BaseDialog",o.handler="onButtonClick",o.customEventData=t,e.clickEvents.push(o)}},t.ButtonTag={SURE:"button_sure",CANCEL:"button_cancel",CLOSE:"button_close"},t=o=__decorate([r],t);var o}(cc.Component));o.default=c,cc._RF.pop()},{"../../Common/Util":"Util","./PopupView":"PopupView"}],GameCtr:[function(e,t,o){"use strict";cc._RF.push(t,"ea049dlKOtItKkSXQ54e5Sr","GameCtr"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../Common/AudioManager"),i=e("../Common/UserManager"),a=e("./WXCtr"),r=e("./HttpCtr"),c=e("../Common/Http"),s=cc._decorator,l=s.ccclass,d=(s.property,function(){function e(){this.eventTarget=null,t.ins=this,a.default.getLaunchOptionsSync(),a.default.getAuthSetting(),a.default.showShareMenu(),a.default.wxOnLogin(),a.default.getSelfData(),this.initEventTarget()}return(t=e).getInstance=function(){return t.ins||(t.ins=new t),t.ins},e.prototype.getAdaptScaleRate=function(){var e=cc.view.getFrameSize(),t=1920*e.width/1080;return e.height/t},e.prototype.initEventTarget=function(){this.eventTarget=new cc.EventTarget},e.prototype.getEventTarget=function(){return this.eventTarget},e.prototype.emitEvent=function(e,t){this.eventTarget.emit(e,t)},e.prototype.addListener=function(e,t){this.eventTarget.on(e,t)},e.prototype.removeListener=function(e){this.eventTarget.off(e)},e.prototype.setGame=function(e){this.mGame=e},e.prototype.setStart=function(e){this.mStart=e},e.prototype.setEnd=function(e){this.mEnd=e},e.prototype.setRanking=function(e){this.mRanking=e},e.gotoScene=function(e){cc.director.loadScene(e),n.default.getInstance().stopAll()},e.showEnd=function(){t.gotoScene("End")},e.showStart=function(){t.gotoScene("Start")},e.showStrongest=function(){t.gotoScene("Strongest")},e.showRevive=function(){t.ins&&t.ins.mGame.showRevive()},e.startGame=function(){t.score=0,t.gotoScene("Game")},e.showRanking=function(e){t.rankingEntrance=e,t.gotoScene("Ranking")},e.revive=function(){},e.playBgm=function(){},e.addScore=function(e){t.ins&&(t.score+=e)},e.gameOver=function(){t.ins&&(a.default.submitScoreToWx(t.score),r.default.sendScore())},e.prototype.saveSelfInfoToLocal=function(e){var t={avatarUrl:e.avatarUrl,city:e.city,country:e.country,gender:e.gender,language:e.language,nickName:e.nickName,province:e.province};window.localStorage.setItem("selfInfo",JSON.stringify(t))},e.prototype.getSelfInfoFromLocal=function(){var e=window.localStorage.getItem("selfInfo");if(e)return JSON.parse(e)},e.shareGroupCheck=function(e,t,o){c.default.send({url:c.default.UrlConfig.SHARE_GROUP,data:{user_id:i.default.user_id,encrypted_data:e,iv:t},success:function(e){console.log("分享到群成功",e),console.log(403==e.code),200==e.code||e.code}})},e.selfInfo=null,e.isAudited=!1,e.reviveTimes=0,e.totalReviveTimes=0,e.questionDes="",e.isMatchingOver=!1,e.questionAnswer=-1,e.powerValue=10,e.gameRoleCount=30,e.roleTag=-1,e.chickenCount=-1,e.joinGameCount=-1,e.score=0,e.rankingEntrance="Start",e.IPONEX_HEIGHT=2436,e.navigatorData=null,e.challengerData=null,e.challengeSwitch=!1,e.reviveData=null,e.money=null,e=t=__decorate([l],e);var t}());o.default=d,cc._RF.pop()},{"../Common/AudioManager":"AudioManager","../Common/Http":"Http","../Common/UserManager":"UserManager","./HttpCtr":"HttpCtr","./WXCtr":"WXCtr"}],Game:[function(e,t,o){"use strict";cc._RF.push(t,"f1f06VxNc1Fi7PAUDkZyb/2","Game"),Object.defineProperty(o,"__esModule",{value:!0});var n,i,a,r,c=e("../../Controller/GameCtr"),s=e("../../Controller/WXCtr"),l=e("../../Common/ViewManager"),d=e("../../Controller/HttpCtr"),u=e("../../Common/Util"),h=e("../../Common/AudioManager"),p=cc._decorator,f=p.ccclass,g=p.property;(i=n||(n={}))[i.LEFT=0]="LEFT",i[i.RIGHT=1]="RIGHT",(r=a||(a={}))[r.CAVE=0]="CAVE",r[r.CACTI=1]="CACTI";var m=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.cave=null,e.cacti=null,e.role_1=null,e.role_2=null,e.role_3=null,e.morePower=null,e.titlePrefab=null,e.revivePrefab=null,e.eatChickenPrefab=null,e.flagPrefab=null,e.gameBg1=null,e.gameBg2=null,e.btn_error=null,e.btn_error_clicked=null,e.btn_corrent=null,e.btn_corrent_clicked=null,e.titleNode=null,e.reviveNode=null,e.line=null,e.gameOverNode=null,e.firstTitleTime=10,e.titleIntervalTime=10,e.matchingCount=3,e.lastAnswerTime=-1,e.lastAnserFinishTime=-1,e.obstacleNode=null,e.banAnswer=!1,e.isGameOver=!1,e.isObstacleComing=!1,e.dieLeft=!1,e.birthPlaceArr=[],e.rolePlaceArr=[],e.roles=[],e.roleModleArr=[],e}return __extends(e,t),e.prototype.onLoad=function(){c.default.getInstance().setGame(this),this.initData(),this.initNode(),this.initBtns(),this.initEvent()},e.prototype.initData=function(){this.birthPlaceArr.push(cc.p(-600,600)),this.birthPlaceArr.push(cc.p(600,600)),this.birthPlaceArr.push(cc.p(-600,0)),this.birthPlaceArr.push(cc.p(600,0)),this.birthPlaceArr.push(cc.p(-600,-600)),this.birthPlaceArr.push(cc.p(600,-600));for(var e=0;e<2*c.default.gameRoleCount;e++){var t=3<=e%6?50:0;this.rolePlaceArr.push({pos:cc.p(e%6*150-400+t+50*Math.random()-25,150*Math.floor(e/6)-480),isEmpty:!0,index:e})}this.roleModleArr.push(this.role_1),this.roleModleArr.push(this.role_2),this.roleModleArr.push(this.role_3)},e.prototype.initNode=function(){this.gameBg1=this.node.getChildByName("bg1"),this.gameBg2=this.node.getChildByName("bg2"),this.line=this.node.getChildByName("line"),this.line.active=!1,this.initGameOverNode()},e.prototype.initBtns=function(){this.btn_error=this.node.getChildByName("btn_error"),this.btn_corrent=this.node.getChildByName("btn_corrent"),this.btn_error_clicked=this.node.getChildByName("btn_error_clicked"),this.btn_corrent_clicked=this.node.getChildByName("btn_corrent_clicked"),this.btn_error.active=!1,this.btn_corrent.active=!1,this.btn_error_clicked.active=!1,this.btn_corrent_clicked.active=!1,this.initBtn(this.btn_error),this.initBtn(this.btn_corrent)},e.prototype.initBtn=function(e){e.on(cc.Node.EventType.TOUCH_END,function(e){if(!((Date.now()-this.lastAnswerTime)/1e3<.6||(Date.now()-this.lastAnserFinishTime)/1e3<1||this.isObstacleComing)){h.default.getInstance().playSound("audio/btnCick"),this.doRoleAnswer(0);var t=e.target.getName();"btn_corrent"==t?(this.btn_error.active=!0,this.btn_corrent.active=!1,this.btn_error_clicked.active=!1,this.btn_corrent_clicked.active=!0,this.choiceIcon.x=-280):(t="btn_error")&&(this.btn_error.active=!1,this.btn_corrent.active=!0,this.btn_error_clicked.active=!0,this.btn_corrent_clicked.active=!1,this.choiceIcon.x=280),this.choiceIcon.active=!0,this.choiceIcon.opacity=0,this.choiceIcon.runAction(cc.sequence(cc.fadeIn(.2),cc.delayTime(.1),cc.fadeOut(.2))),this.lastAnswerTime=Date.now()}}.bind(this))},e.prototype.initGameOverNode=function(){this.gameOverNode=this.node.getChildByName("gameOver");var e=this.gameOverNode.getChildByName("frame").getChildByName("btn_back"),t=this.gameOverNode.getChildByName("frame").getChildByName("btn_continue"),o=this.gameOverNode.getChildByName("desFrame").getChildByName("btn_share");this.gameOverNode.setLocalZOrder(80),e.on(cc.Node.EventType.TOUCH_END,function(e){h.default.getInstance().playSound("audio/btnCick"),cc.director.loadScene("Start")}),o.on(cc.Node.EventType.TOUCH_END,function(e){h.default.getInstance().playSound("audio/btnCick"),s.default.share(null)}),t.on(cc.Node.EventType.TOUCH_END,function(e){if(h.default.getInstance().playSound("audio/btnCick"),0<c.default.powerValue)c.default.powerValue--,this.gameOverNode.active=!1,this.clearRoles(),this.start(),this.gameBg1,this.gameBg2;else{if(!c.default.isAudited)return void l.default.toast("没有体力值");if(this.node.getChildByName("morePower"))return;var t=cc.instantiate(this.morePower);t.parent=this.node,t.setLocalZOrder(100)}}.bind(this))},e.prototype.initEvent=function(){c.default.getInstance().addListener("answerFinish",this.onAnswerFinish.bind(this)),c.default.getInstance().addListener("shareSuccess",this.onShareSuccess.bind(this)),c.default.getInstance().addListener("banAnswer",this.onBanAnswer.bind(this)),c.default.getInstance().addListener("matchCountDown",this.onMatchCountDown.bind(this)),c.default.getInstance().addListener("showFlag",this.onShowFlag.bind(this)),c.default.getInstance().addListener("choiceGame",this.onChoiceGame.bind(this)),c.default.getInstance().addListener("restartGame",this.onRestartGame.bind(this))},e.prototype.start=function(){this.matchingCount=3,c.default.reviveTimes=1,this.isGameOver=!1,this.isObstacleComing=!1,this.lastAnswerTime=Date.now(),c.default.rankingEntrance="Start",c.default.isMatchingOver=!1,d.default.GameStart(null),d.default.getGameStartInfo(this.initMatchingRoles.bind(this)),this.showMatching(),this.scheduleOnce(function(){this.getTitie(),h.default.getInstance().playSound("audio/start")}.bind(this),this.firstTitleTime),this.startBgRoll()},e.prototype.startBgRoll=function(){this.gameBg1.stopAllActions(),this.gameBg2.stopAllActions(),this.gameBg1.y=0,this.gameBg2.y=-c.default.IPONEX_HEIGHT,this.gameBg1.runAction(cc.repeatForever(cc.sequence(cc.moveBy(2.5,cc.p(0,c.default.IPONEX_HEIGHT)),cc.callFunc(function(){this.gameBg1.y>=c.default.IPONEX_HEIGHT-5&&(this.gameBg1.y=-c.default.IPONEX_HEIGHT)}.bind(this))))),this.gameBg2.runAction(cc.repeatForever(cc.sequence(cc.moveBy(2.5,cc.p(0,c.default.IPONEX_HEIGHT)),cc.callFunc(function(){this.gameBg2.y>=c.default.IPONEX_HEIGHT-5&&(this.gameBg2.y=-c.default.IPONEX_HEIGHT)}.bind(this))))),this.obstacleNode&&this.obstacleNode.destroy()},e.prototype.showMatching=function(){this.titleNode=cc.instantiate(this.titlePrefab),this.titleNode.parent=this.node,this.titleNode.getComponent("titleNode").showMatching(),this.titleNode.setLocalZOrder(40)},e.prototype.getTitie=function(){this.isGameOver||(this.banAnswer=!1,this.titleNode.active=!0,this.titleNode.getComponent("titleNode").getTitle(),this.btn_error.active=!0,this.btn_corrent.active=!0,this.line.active=!0,this.randomOtherRoleAnswer(),this.switchBtnStateByPos(),this.scheduleOnce(this.getTitie.bind(this),this.titleIntervalTime))},e.prototype.switchBtnStateByPos=function(){0<this.roles[0].node.x?(this.btn_error.active=!1,this.btn_corrent.active=!0,this.btn_error_clicked.active=!0,this.btn_corrent_clicked.active=!1):(this.btn_error.active=!0,this.btn_corrent.active=!1,this.btn_error_clicked.active=!1,this.btn_corrent_clicked.active=!0)},e.prototype.initMatchingRoles=function(i){for(var e=function(n){t.node.runAction(cc.sequence(cc.delayTime(.2*n),cc.callFunc(function(){var e=null;if(0==n){var t=c.default.getInstance().getSelfInfoFromLocal();(e=cc.instantiate(this.roleModleArr[c.default.roleTag])).parent=this.node,e.getComponent("role").setName(u.default.cutstr(t.nickName,4)),e.getComponent("role").setHeadImg(t.avatarUrl)}else(e=cc.instantiate(this.roleModleArr[Math.floor(3*Math.random())])).parent=this.node,e.getComponent("role").setName(u.default.cutstr(i[n].nick,4));var o=Math.floor(6*Math.random());e.x=this.birthPlaceArr[o].x,e.y=this.birthPlaceArr[o].y,e.tag=n,e.setLocalZOrder(2*c.default.gameRoleCount-n),e.runAction(cc.moveTo(.3,this.rolePlaceArr[n].pos)),this.rolePlaceArr[n].isEmpty=!1,this.roles.push({node:e,die:!1})}.bind(t))))},t=this,o=0;o<c.default.gameRoleCount;o++)e(o)},e.prototype.randomOtherRoleAnswer=function(){if(!this.banAnswer&&1!=this.roles.length){var e=Math.floor(Math.random()*(this.roles.length-1)+1);e=1==this.roles.length?0:e,this.doRoleAnswer(e);var t=.5*Math.random()+Math.floor(8/this.roles.length);this.scheduleOnce(this.randomOtherRoleAnswer.bind(this),t),this.scheduleOnce(this.makeUpRoles.bind(this),1.5*t)}},e.prototype.doRoleAnswer=function(e){var t=this.roles[e].node;this.rolePlaceArr[t.tag].isEmpty=!0;var o=null;o=0<t.x?this.getBestEmptyPosIndex(n.LEFT):this.getBestEmptyPosIndex(n.RIGHT),t.stopAllActions(),console.log("log-----------doRoleAnswer-----------roleIndex  this.rolePlaceArr=:",o,this.rolePlaceArr),t.runAction(cc.moveTo(.5,cc.p(this.rolePlaceArr[o].pos))),t.setLocalZOrder(2*c.default.gameRoleCount-o),t.tag=o,this.rolePlaceArr[o].isEmpty=!1},e.prototype.getPrePosIndex=function(e){for(var t=0;t<this.rolePlaceArr.length;t++)if(e.x==this.rolePlaceArr[t].pos.x&&e.y==this.rolePlaceArr[t].pos.y)return t},e.prototype.getBestEmptyPosIndex=function(e){if(e==n.LEFT){for(var t=0;t<this.rolePlaceArr.length;t++)if(!(3<=t%6)&&this.rolePlaceArr[t].isEmpty)return t}else for(t=0;t<this.rolePlaceArr.length;t++)if(!(t%6<3)&&this.rolePlaceArr[t].isEmpty)return t},e.prototype.makeUpRoles=function(){if(!this.banAnswer){var e=Math.floor(Math.random()*(this.roles.length-1)+1);if(e=1==this.roles.length?0:e,0<this.roles[e].node.x){for(var t=0;t<this.rolePlaceArr.length;t++)if(!(t%6<3)){if(e-t<6)return;if(this.rolePlaceArr[t].isEmpty)return this.rolePlaceArr[this.roles[e].node.tag].isEmpty=!0,this.rolePlaceArr[t].isEmpty=!1,this.roles[e].node.tag=t,this.roles[e].node.setLocalZOrder(2*c.default.gameRoleCount-t),this.roles[e].node.stopAllActions(),void this.roles[e].node.runAction(cc.moveTo(.5,this.rolePlaceArr[t].pos))}}else for(t=0;t<this.rolePlaceArr.length;t++)if(!(3<t%6)){if(e-t<6)return;if(this.rolePlaceArr[t].isEmpty)return this.rolePlaceArr[this.roles[e].node.tag].isEmpty=!0,this.rolePlaceArr[t].isEmpty=!1,this.roles[e].node.tag=t,this.roles[e].node.setLocalZOrder(2*c.default.gameRoleCount-t),this.roles[e].node.stopAllActions(),void this.roles[e].node.runAction(cc.moveTo(.5,this.rolePlaceArr[t].pos))}}},e.prototype.getBackwardRoleIndex=function(e){if(e==n.LEFT){for(var t=this.rolePlaceArr.length-1;0<=t;t--)if(!(3<=t%6||this.rolePlaceArr[t].isEmpty))return t}else for(t=this.rolePlaceArr.length-1;0<=t;t--)if(!(t%6<3||this.rolePlaceArr[t].isEmpty))return t},e.prototype.showErrorObstacle=function(){this.isObstacleComing=!0;var e=Math.floor(2*Math.random()),t=null;e==a.CAVE?(this.obstacleNode=cc.instantiate(this.cave),this.obstacleNode.scaleX=1,t=310):e==a.CACTI&&(this.obstacleNode=cc.instantiate(this.cacti),this.obstacleNode.scaleX=.79,this.obstacleNode.scaleY=.79*.79,t=274),this.gameBg1.y<0?this.obstacleNode.parent=this.gameBg1:this.obstacleNode.parent=this.gameBg2,1==c.default.questionAnswer?this.obstacleNode.x=t:this.obstacleNode.x=-t,this.obstacleNode.y=-960,this.obstacleNode.scaleY=1/1.269,this.obstacleNode.tag=e},e.prototype.addScore=function(e){void 0===e&&(e=1),c.default.addScore(e)},e.prototype.gameOver=function(){c.default.gameOver()},e.prototype.clickAddScore=function(){this.addScore(1)},e.prototype.showRevive=function(){this.node.getChildByName("revive")||c.default.isAudited&&(this.reviveNode=cc.instantiate(this.revivePrefab),this.reviveNode.parent=this.node,this.reviveNode.setLocalZOrder(60))},e.prototype.matchingCountDown=function(){if(0!=this.matchingCount){var e=this.node.getChildByName("countDown_"+this.matchingCount);e.active=!0,e.setLocalZOrder(90),e.scale=1.8,e.runAction(cc.sequence(cc.scaleTo(.5,1),cc.delayTime(.5),cc.callFunc(function(){e.active=!1}))),this.matchingCount--,h.default.getInstance().playSound("audio/countDown"),this.scheduleOnce(this.matchingCountDown.bind(this),1)}},e.prototype.clearRoles=function(){for(var e=0;e<this.roles.length;e++)this.roles[e].node.destroy();this.roles.splice(0,this.roles.length)},e.prototype.onAnswerFinish=function(){this.lastAnserFinishTime=Date.now(),this.node.runAction(cc.sequence(cc.delayTime(1.5),cc.callFunc(function(){this.obstacleNode.destroy(),this.obstacleNode=null}.bind(this))))},e.prototype.onBanAnswer=function(){this.banAnswer=!0,this.showErrorObstacle(),this.hideGameBtns()},e.prototype.onShowFlag=function(){for(;this.node.getChildByTag(5555);)this.node.removeChildByTag(5555);var e=cc.instantiate(this.flagPrefab);e.setLocalZOrder(80),e.parent=this.node,e.tag=5555},e.prototype.onMatchCountDown=function(){this.matchingCountDown()},e.prototype.onShareSuccess=function(){this.reviveNode.destroy(),this.reviveNode=null,this.revive(),h.default.getInstance().playMusic("audio/gameMusic")},e.prototype.onChoiceGame=function(){this.gameOverNode.getChildByName("desFrame").active=!!c.default.isAudited;var e=this.gameOverNode.getChildByName("desFrame").getChildByName("lb_question"),t=this.gameOverNode.getChildByName("desFrame").getChildByName("lb_answer");e.getComponent(cc.Label).string=c.default.questionDes,t.getComponent(cc.Label).string=1==c.default.questionAnswer?"正确":"错误",this.node.runAction(cc.sequence(cc.delayTime(.3),cc.callFunc(function(){this.gameOverNode.active=!0}.bind(this))))},e.prototype.onRestartGame=function(){this.clearRoles(),this.start()},e.prototype.showEatChicken=function(){var e=cc.instantiate(this.eatChickenPrefab);e.parent=this.node,e.setLocalZOrder(60)},e.prototype.collateRolesData=function(){for(var e=[],t=0;t<this.roles.length;t++)this.roles[t].die||e.push(this.roles[t]);this.roles.splice(0,this.roles.length);for(t=0;t<e.length;t++)this.roles.push(e[t])},e.prototype.checkEatChicken=function(){1!=this.roles.length||this.isGameOver||(this.unscheduleAllCallbacks(),this.titleNode.getComponent("titleNode").unscheduleAllCallbacks(),d.default.getGameWin(null),this.showEatChicken())},e.prototype.doAbstacle=function(){for(var e=2==c.default.questionAnswer?1:-1,t=0;t<this.roles.length;t++)0<e*this.roles[t].node.x||(0==t?(this.isGameOver=!0,this.dieLeft=!(0<this.roles[0].node.x),this.roles[t].node.getComponent("role").die(this.obstacleNode.tag,!1),this.rolePlaceArr[this.roles[t].node.tag].isEmpty=!0,this.unscheduleAllCallbacks()):(this.roles[t].die=!0,this.rolePlaceArr[this.roles[t].node.tag].isEmpty=!0,this.roles[t].node.getComponent("role").die(this.obstacleNode.tag)));this.collateRolesData(),this.chickRivive(),this.setMoney(),this.checkEatChicken()},e.prototype.setMoney=function(){this.isGameOver||(c.default.money+=10,d.default.setMoney(c.default.money))},e.prototype.chickRivive=function(){this.isGameOver&&(console.log("log------------------GameCtr.totalReviveTimes  GameCtr.reviveData.revive_number=:",c.default.totalReviveTimes,c.default.reviveData.revive_number),0<c.default.reviveTimes&&1<this.roles.length&&c.default.isAudited&&c.default.totalReviveTimes<=c.default.reviveData.revive_number?this.scheduleOnce(this.showRevive.bind(this),1):this.onChoiceGame())},e.prototype.hideGameBtns=function(){this.btn_error.active=!1,this.btn_corrent.active=!1,this.btn_error_clicked.active=!1,this.btn_corrent_clicked.active=!1,this.line.active=!1},e.prototype.revive=function(){this.isGameOver=!1,this.roles[0].node.active=!0;var e=null;console.log("log--------------revive-----this.dieLeft=:",this.dieLeft),e=this.dieLeft?this.getBestEmptyPosIndex(n.LEFT):this.getBestEmptyPosIndex(n.RIGHT),console.log("log--------------revive-----this.dieLeft posIndex=:",this.dieLeft,e),this.roles[0].node.setLocalZOrder(2*c.default.gameRoleCount-e),this.roles[0].node.tag=e,this.roles[0].node.x=this.rolePlaceArr[e].pos.x,this.roles[0].node.y=this.rolePlaceArr[e].pos.y,this.rolePlaceArr[e].isEmpty=!1,c.default.reviveTimes--,c.default.totalReviveTimes++,this.unscheduleAllCallbacks(),this.titleNode.getComponent("titleNode").unscheduleAllCallbacks(),this.getTitie(),this.startBgRoll()},e.prototype.update=function(e){this.obstacleNode&&this.isObstacleComing&&200<this.obstacleNode.parent.y&&(this.doAbstacle(),this.isObstacleComing=!1)},__decorate([g(cc.Prefab)],e.prototype,"cave",void 0),__decorate([g(cc.Prefab)],e.prototype,"cacti",void 0),__decorate([g(cc.Prefab)],e.prototype,"role_1",void 0),__decorate([g(cc.Prefab)],e.prototype,"role_2",void 0),__decorate([g(cc.Prefab)],e.prototype,"role_3",void 0),__decorate([g(cc.Prefab)],e.prototype,"morePower",void 0),__decorate([g(cc.Prefab)],e.prototype,"titlePrefab",void 0),__decorate([g(cc.Prefab)],e.prototype,"revivePrefab",void 0),__decorate([g(cc.Prefab)],e.prototype,"eatChickenPrefab",void 0),__decorate([g(cc.Prefab)],e.prototype,"flagPrefab",void 0),__decorate([g(cc.Node)],e.prototype,"choiceIcon",void 0),e=__decorate([f],e)}(cc.Component);o.default=m,cc._RF.pop()},{"../../Common/AudioManager":"AudioManager","../../Common/Util":"Util","../../Common/ViewManager":"ViewManager","../../Controller/GameCtr":"GameCtr","../../Controller/HttpCtr":"HttpCtr","../../Controller/WXCtr":"WXCtr"}],HttpCtr:[function(e,t,o){"use strict";cc._RF.push(t,"e7a76N18wxAD6bqHIHxO/KK","HttpCtr"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../Common/Http"),i=e("../Common/UserManager"),a=e("./WXCtr"),r=e("./GameCtr"),c=e("../Common/ViewManager"),s=cc._decorator,l=s.ccclass,d=(s.property,function(){function e(){}return(t=e).login=function(e){console.log("log------------HttpCtr-----LoginCode=:",e),n.default.send({url:n.default.UrlConfig.LOGIN,success:function(e){1==e.ret&&(i.default.user_id=e.data.uid,i.default.voucher=e.data.voucher,t.getUserInfo(),t.getSettingConfig(),a.default.getUserInfo(),t.chanelCheck(a.default.launchOption.query))},data:{code:e}})},e.getShareConfig=function(){n.default.send({url:n.default.UrlConfig.GET_SHARE,success:function(e){console.log("获取分享配置信息",e),a.default.shareTitle=e.data.share_title,a.default.shareImg=e.data.share_img,a.default.setShareAppMessage()},data:{share_type:"index"}})},e.getUserInfo=function(t){void 0===t&&(t=null),console.log("log------uid=:",typeof i.default.user_id),n.default.send({url:n.default.UrlConfig.GET_USERINFO,success:function(e){e.success==n.default.Code.OK&&(i.default.user=e.user,window.localStorage.setItem("money",e.user.money),console.log("log------------UserManager.user=:",e),r.default.chickenCount=e.user.Sum,r.default.joinGameCount=e.user.SumLog,r.default.money=e.user.money,t&&t(e.user))},data:{uid:i.default.user_id,voucher:i.default.voucher}})},e.saveUserInfo=function(e){console.log("log---------------saveUserInfo-----  data=:",e),n.default.send({url:n.default.UrlConfig.SET_USER_DATA,data:{uid:i.default.user_id,voucher:i.default.voucher,encryptedData:e.encryptedData,iv:e.iv},success:function(){console.log("log-----------------上传信息成功------------")}})},e.chanelCheck=function(e){n.default.send({url:n.default.UrlConfig.CHANEL_RECORD,data:{uid:i.default.user_id,voucher:i.default.voucher,channel_id:e.channel_id},success:function(e){console.log("渠道验证成功",e)}})},e.getSettingConfig=function(){n.default.send({url:n.default.UrlConfig.GET_SETTING,success:function(e){r.default.isAudited=e.ok}})},e.videoCheck=function(e){n.default.send({url:n.default.UrlConfig.VideoOpen,data:{user_id:i.default.user_id,channel_id:e.channel_id,cuid:e.cuid,cvoucher:e.cvoucher,cid:e.cid,pid:e.pid}})},e.shareGroupCheck=function(e,t,o){n.default.send({url:n.default.UrlConfig.SHARE_GROUP,data:{user_id:i.default.user_id,encrypted_data:e,iv:t},success:function(e){1==e.ret?o&&o():0==e.ret&&c.default.toast(e.msg)}})},e.getAdConfig=function(){n.default.send({url:n.default.UrlConfig.ADConfig,success:function(e){console.log("获取广告配置",e),e.data.videoid&&a.default.setVideoAd(e.data.videoid),e.data.advid&&(a.default.bannerId=e.data.advid)},data:{user_id:i.default.user_id}})},e.invitedByFriend=function(e){n.default.send({url:n.default.UrlConfig.INVITED_BY_FRIEND,success:function(){},data:{user_id:i.default.user_id,voucher:i.default.voucher,friend_user_id:e.invite}})},e.getInviteResult=function(e){void 0===e&&(e=null),n.default.send({url:n.default.UrlConfig.INVITE_RESULT,success:function(e){},data:{user_id:i.default.user_id}})},e.getNevigatorData=function(){n.default.send({url:n.default.UrlConfig.GET_NAVIGATOR,success:function(e){e.code==n.default.Code.OK&&(r.default.navigatorData=e.data)},data:{string:"more_games"}})},e.channelGift=function(e){88==e.channel_id&&e.guanzu},e.getLoginAwardList=function(t){void 0===t&&(t=null),n.default.send({url:n.default.UrlConfig.GET_TODAY,success:function(e){e.code==n.default.Code.OK&&t&&t(e)},data:{user_id:i.default.user_id,voucher:i.default.voucher}})},e.sign=function(e){n.default.send({url:n.default.UrlConfig.DO_TODAY,success:function(e){console.log("log----------签到res=：",e)},data:{uid:i.default.user_id,voucher:i.default.voucher}})},e.getRankList=function(e,t){n.default.send({url:n.default.UrlConfig.GET_RANK_LIST,success:function(e){e.code==n.default.Code.OK?t(!0):(c.default.toast(e.msg),t(!1))},data:{uid:i.default.user_id,type:e}})},e.getGameStartInfo=function(t){n.default.send({url:n.default.UrlConfig.GET_GAME_START,success:function(e){1==e.ret?t(e.data):c.default.toast(e.msg)},data:{uid:i.default.user_id,voucher:i.default.voucher}})},e.GameStart=function(e){n.default.send({url:n.default.UrlConfig.GAME_START,success:function(e){console.log("log------------GAME_START---res=:",e),1==e.ret?r.default.joinGameCount++:c.default.toast(e.msg)},data:{uid:i.default.user_id,voucher:i.default.voucher}})},e.getTitle=function(t){n.default.send({url:n.default.UrlConfig.GET_TITLE,success:function(e){console.log("log---------getTitle---res=:",e),1==e.ret?(r.default.questionAnswer=e.info.ok,t(e.info.title)):c.default.toast(e.msg)},data:{uid:i.default.user_id,voucher:i.default.voucher}})},e.getGameWin=function(e){n.default.send({url:n.default.UrlConfig.GAME_WIN,success:function(e){1==e.ret?r.default.chickenCount++:c.default.toast(e.msg)},data:{uid:i.default.user_id,voucher:i.default.voucher}})},e.setMoney=function(e){n.default.send({url:n.default.UrlConfig.SET_GOLD_DATA,success:function(e){1==e.ret?console.log("log-----------金币上报成功--------------"):(c.default.toast(e.msg),console.log("log-----------金币上报失败--------------"))},data:{uid:i.default.user_id,voucher:i.default.voucher,money:e}})},e=t=__decorate([l],e);var t}());o.default=d,cc._RF.pop()},{"../Common/Http":"Http","../Common/UserManager":"UserManager","../Common/ViewManager":"ViewManager","./GameCtr":"GameCtr","./WXCtr":"WXCtr"}],Http:[function(e,t,o){"use strict";cc._RF.push(t,"ba804Fwfo1B7pM2bIm/ruPv","Http"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("./UrlConfig"),i=cc._decorator,a=i.ccclass,r=(i.property,function(){function e(){this.isCancel=!1,this.xhr=new XMLHttpRequest,this.xhr.timeout=1e4}return(v=e).send=function(e){var t=e.mountNode,o=void 0===t?null:t,n=e.tag,i=void 0===n?null:n,a=e.url,r=void 0===a?null:a,c=e.data,s=void 0===c?{}:c,l=e.method,d=void 0===l?"POST":l,u=e.success,h=void 0===u?function(e,t){}:u,p=e.error,f=void 0===p?null:p,g=e.async,m=void 0===g||g;if(r){!/^http/.test(r)&&v.rootUrl&&(r=v.rootUrl+r),cc.log("request url:%s method:%s",r,d),s.tk,cc.log(JSON.stringify(s));var _=new v;return _.request({mountNode:o,tag:i,url:r,data:s,method:d,success:h,error:f,async:m}),cc.log("sendsendsendsendsendsendsend",r,d),_}},e.prototype.request=function(e){var t=this,o=e.mountNode,n=void 0===o?null:o,i=e.tag,a=void 0===i?null:i,r=e.url,c=void 0===r?null:r,s=e.data,l=void 0===s?{}:s,d=e.method,u=void 0===d?"GET":d,h=e.success,p=void 0===h?function(e,t){}:h,f=e.error,g=void 0===f?null:f,m=e.async,_=void 0===m||m;u=u||"GET";var v="";for(var y in l)""!=v&&(v+="&"),v+=y+"="+encodeURIComponent(l[y]);"GET"==u&&""!=v&&(-1==c.indexOf("?")&&(c+="?"),c+=v);var C=function(e){t.isCancel?cc.log("request canceled!"):(null==n||cc.isValid(n))&&g&&(g(e,a),g=null)};this.xhr.onreadystatechange=function(){if(4==t.xhr.readyState&&!t.isCancel)if(200<=t.xhr.status&&t.xhr.status<=400){var e=t.xhr.responseText;try{if(cc.log(e),0==e.indexOf("{")&&(e=JSON.parse(e)),null!=n&&!cc.isValid(n))return;p&&p(e,a)}catch(e){cc.error(e)}}else cc.warn("http request problem:"+t.xhr.status),C("连接失败:"+t.xhr.status)},this.xhr.onerror=function(e){cc.error("http request onerror"),C("连接失败，请检查网络")},this.xhr.ontimeout=function(){cc.error("http request ontimeout"),C("连接超时")},this.xhr.open(u,c,_),this.xhr.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),"GET"==u?(cc.log("send Get!!"),this.xhr.send()):"POST"==u?(cc.log("send Post!!"),this.xhr.send(v)):cc.log("[HTTP] no send")},e.prototype.cancel=function(){this.isCancel=!0},e.Code={OK:"300"},e.UrlConfig=n.default,e.rootUrl=v.UrlConfig.rootUrl,e=v=__decorate([a],e);var v}());o.default=r,cc._RF.pop()},{"./UrlConfig":"UrlConfig"}],LoginAwardCell:[function(e,t,o){"use strict";cc._RF.push(t,"d753fYwlRhGTJnKujjL9l/l","LoginAwardCell"),Object.defineProperty(o,"__esModule",{value:!0});var n=cc._decorator,i=n.ccclass,a=n.property,r=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.ndSigned=null,e.lbNum=null,e.sprGiftIcon=null,e}return __extends(e,t),e.prototype.start=function(){},e.prototype.setData=function(e){this.lbNum.string=e.gold_amount+"",this.ndSigned.active=e.isSign},__decorate([a(cc.Node)],e.prototype,"ndSigned",void 0),__decorate([a(cc.Label)],e.prototype,"lbNum",void 0),__decorate([a(cc.Sprite)],e.prototype,"sprGiftIcon",void 0),e=__decorate([i],e)}(cc.Component);o.default=r,cc._RF.pop()},{}],LoginAward:[function(e,t,o){"use strict";cc._RF.push(t,"4d551SDv6NGKLTvsUBI5m19","LoginAward"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../../Controller/HttpCtr"),i=e("../view/PopupView"),a=e("./LoginAwardCell"),r=e("../../Common/Util"),c=e("../../Common/ViewManager"),s=cc._decorator,l=s.ccclass,d=s.property,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.ndContent=null,e}return __extends(e,t),e.prototype.onLoad=function(){this.setAwardDatas()},e.prototype.setAwardDatas=function(){var i=this;n.default.getLoginAwardList(function(e){for(var t=e.data.sign_days,o=0;o<t.length;o++){var n=t[o];i.ndContent.children[o].getComponent(a.default).setData(n)}})},e.prototype.signIn=function(e){var t=this,o=e.target.getComponent(cc.Button);o.interactable=!1,n.default.sign(r.default.getCurrTimeYYMMDD(),function(e){o.interactable=!0,e&&(c.default.toast("签到成功"),t.setAwardDatas())})},e.prototype.close=function(){if(this.node.parent){var e=this.node.parent.getComponent(i.default);e?e.dismiss():this.node.destroy()}},__decorate([d(cc.Node)],e.prototype,"ndContent",void 0),e=__decorate([l],e)}(cc.Component);o.default=u,cc._RF.pop()},{"../../Common/Util":"Util","../../Common/ViewManager":"ViewManager","../../Controller/HttpCtr":"HttpCtr","../view/PopupView":"PopupView","./LoginAwardCell":"LoginAwardCell"}],MemoryDetector:[function(e,t,o){"use strict";cc._RF.push(t,"dd037Jm2bhDhqofpfMJ2lKq","MemoryDetector"),Object.defineProperty(o,"__esModule",{value:!0});var n=cc._decorator,i=n.ccclass,a=(n.property,function(){function e(){}return(t=e).showMemoryStatus=function(){if(!cc.sys.isNative&&!t._inited){cc.profiler;cc.director.on(cc.Director.EVENT_AFTER_VISIT,function(){var e=0,t=cc.textureCache._textures;for(var o in t){var n=t[o];e+=n.getPixelWidth()*n.getPixelHeight()*4}var i=cc.textureCache._textureColorsCache;for(var o in i){var a=i[o];for(var r in a){var c=a[r];e+=c.width*c.height*4}}console.log("log-----------------------memory=:",(e/1048576).toFixed(2)+"M")}),t._inited=!0}},e._inited=!1,e=t=__decorate([i],e);var t}());o.MemoryDetector=a,cc._RF.pop()},{}],PopupView:[function(e,t,o){"use strict";cc._RF.push(t,"19031wwCBpBi6olCmXjcj5x","PopupView"),Object.defineProperty(o,"__esModule",{value:!0});var n=cc._decorator,i=n.ccclass,a=(n.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._maskNode=null,e._maskOpacity=0,e._localZOrder=0,e}return __extends(e,t),e.prototype.onLoad=function(){cc.log("PopupView onLoad %s",this.name),this._maskNode=this.node.getChildByName("mask"),this._maskNode&&(this._maskNode.active=this._showMask,this._maskNode.opacity=this._maskOpacity,this._maskNode.on(cc.Node.EventType.TOUCH_START,this.onTouchMask,this),this._maskNode.on(cc.Node.EventType.TOUCH_END,this.onTouchMask,this))},e.prototype.onDestroy=function(){cc.log("PopupView onDestroy %s",this.name),this._maskNode&&(this._maskNode.off(cc.Node.EventType.TOUCH_START,this.onTouchMask,this),this._maskNode.off(cc.Node.EventType.TOUCH_END,this.onTouchMask,this)),this.destroyCallback&&this.destroyCallback(this)},e.prototype.onTouchMask=function(e){e.stopPropagation(),e.type==cc.Node.EventType.TOUCH_END&&this.closeOnTouchOutside&&this.contentNode&&!cc.rectContainsPoint(this.contentNode.getBoundingBoxToWorld(),e.getLocation())&&this.dismiss()},e.prototype.show=function(e){cc.isValid(this)&&cc.isValid(e)&&(this.node.parent=e,this.node.setLocalZOrder(this.localZOrder||0),cc.isValid(this._showActionTarget)&&cc.isValid(this._showAction)&&(this._showActionTarget.stopAllActions(),this._showActionTarget.runAction(this._showAction)))},e.prototype.dismiss=function(){cc.isValid(this.node)&&(cc.isValid(this._dismissActionTarget)&&cc.isValid(this._dismissAction)?(this._dismissActionTarget.stopAllActions(),this._dismissActionTarget.runAction(this._dismissAction)):this.doDismiss())},e.prototype.doDismiss=function(){this.node.destroy()},e.prototype.setMask=function(e,t){this._showMask=e,this._maskOpacity=t},e.prototype.setShowAction=function(e,t){cc.isValid(t)&&cc.isValid(e)&&(this._showAction=e,this._showActionTarget=t)},e.prototype.setDismissAction=function(e,t){var o=this;cc.isValid(t)&&cc.isValid(e)&&(this._dismissAction=cc.sequence(e,cc.callFunc(function(){o.doDismiss()})),this._dismissActionTarget=t)},e.prototype.setOnDestroyCallback=function(e){this.destroyCallback=e},Object.defineProperty(e.prototype,"closeOnTouchOutside",{get:function(){return this._closeOnTouchOutside},set:function(e){this._closeOnTouchOutside=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"closeOnKeyBack",{get:function(){return this._closeOnKeyBack},set:function(e){this._closeOnKeyBack=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"localZOrder",{get:function(){return this._localZOrder},set:function(e){this._localZOrder=e},enumerable:!0,configurable:!0}),e=__decorate([i],e)}(cc.Component));o.default=a,cc._RF.pop()},{}],PromptDialog:[function(e,t,o){"use strict";cc._RF.push(t,"107f6idJYdHi6R3QKRQ4W4g","PromptDialog"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("./BaseDialog"),i=e("../../Common/Util"),a=cc._decorator,r=a.ccclass,c=a.property,s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.promptLabel=null,e._promptText="",e.singleButton=!1,e}return __extends(e,t),e.prototype.onLoad=function(){t.prototype.onLoad.call(this)},e.prototype.initData=function(){var e="确定",t="取消";this._data&&(this.cancelButtonClick=this._data.cancelButtonClick,this.sureButtonClick=this._data.sureButtonClick,this.singleButton=!!this._data.singleButton,"string"==typeof this._data.message&&(this._promptText=this._data.message,this.promptLabel.string=this._promptText),e=this._data.rightText||e,t=this._data.leftText||t),this._sureButton&&i.default.setString(i.default.findChildByName("Label",this._sureButton.node),e),this._cancelButton&&i.default.setString(i.default.findChildByName("Label",this._cancelButton.node),t),this.singleButton&&(cc.isValid(this._sureButton)&&(this._sureButton.node.x=0),cc.isValid(this._cancelButton)&&(this._cancelButton.node.active=!1))},e.prototype.onButtonClick=function(e,t){switch(t){case n.default.ButtonTag.SURE:if(this.sureButtonClick&&this.sureButtonClick())return;this.dismiss();break;case n.default.ButtonTag.CANCEL:if(this.cancelButtonClick&&this.cancelButtonClick())return;this.dismiss();break;case n.default.ButtonTag.CLOSE:this.dismiss()}},__decorate([c(cc.Label)],e.prototype,"promptLabel",void 0),e=__decorate([r],e)}(n.default);o.default=s,cc._RF.pop()},{"../../Common/Util":"Util","./BaseDialog":"BaseDialog"}],RankingCell:[function(e,t,o){"use strict";cc._RF.push(t,"31f9f5AnaRKtZm39HiZkXn2","RankingCell"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../../Common/Util"),i=cc._decorator,a=i.ccclass,r=i.property,c=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.sprBg=null,e.sprMedal=null,e.sprHead=null,e.lbRank=null,e.lbName=null,e.lbScore=null,e.medalFrames=[],e}return __extends(e,t),e.prototype.setData=function(e,t){this.setMedal(e),this.createImage(t.Icon),this.lbName.string=n.default.cutstr(t.nick,10),this.lbScore.string=t.value+""},e.prototype.setMedal=function(e){e<3?(this.sprMedal.node.active=!0,this.sprMedal.spriteFrame=this.medalFrames[e],this.lbRank.node.active=!0,this.lbRank.string=e+1):(this.lbRank.node.active=!0,this.lbRank.string=e+1,this.sprMedal.node.active=!1)},e.prototype.setBgColor=function(e){e%=2,this.sprBg.node.color=0==e?cc.hexToColor("#1966EE"):cc.hexToColor("#5990F1")},e.prototype.createImage=function(e){var o=this;if(null!=window.wx)try{var t=wx.createImage();t.onload=function(){try{var e=new cc.Texture2D;e.initWithElement(t),e.handleLoadedTexture(),o.sprHead.spriteFrame=new cc.SpriteFrame(e)}catch(e){cc.log(e),o.sprHead.node.active=!1}},t.src=e}catch(e){cc.log(e),this.sprHead.node.active=!1}else cc.loader.load({url:e,type:"jpg"},function(e,t){o.sprHead.spriteFrame=new cc.SpriteFrame(t)})},__decorate([r(cc.Sprite)],e.prototype,"sprBg",void 0),__decorate([r(cc.Sprite)],e.prototype,"sprMedal",void 0),__decorate([r(cc.Sprite)],e.prototype,"sprHead",void 0),__decorate([r(cc.Label)],e.prototype,"lbRank",void 0),__decorate([r(cc.Label)],e.prototype,"lbName",void 0),__decorate([r(cc.Label)],e.prototype,"lbScore",void 0),__decorate([r([cc.SpriteFrame])],e.prototype,"medalFrames",void 0),e=__decorate([a],e)}(cc.Component);o.default=c,cc._RF.pop()},{"../../Common/Util":"Util"}],RankingView:[function(e,t,o){"use strict";cc._RF.push(t,"ccb460UQXtHubIzenjgDSa0","RankingView"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../../Controller/GameCtr"),i=e("../../Controller/WXCtr"),a=e("../../Common/Http"),r=e("../../Common/UserManager"),c=e("../../Common/UILoader"),s=cc._decorator,l=s.ccclass,d=s.property,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.ndRanking=null,e.sprFreindRankScroll=null,e.ndWorldScr=null,e.ndWorldContent=null,e.pfCell=null,e.friendToggle=null,e.worldToggle=null,e.ndAuthTip=null,e.tex=null,e.isGetWorldList=!1,e.isGetFriendList=!1,e}return __extends(e,t),e.prototype.onLoad=function(){n.default.getInstance().setRanking(this)},e.prototype.start=function(){null!=window.wx&&(this.tex=new cc.Texture2D,window.sharedCanvas.width=900,window.sharedCanvas.height=1200),this.initRank()},e.prototype.initRank=function(){this.showWorldRanking()},e.prototype.back=function(){this.showAuthTip(!1),this.isGetFriendList=!1,i.default.closeFriendRanking(),n.default.gotoScene(n.default.rankingEntrance)},e.prototype.showWorldRanking=function(){if(console.log("点击了世界排行榜"),this.ndWorldScr.active=!0,this.sprFreindRankScroll.node.active=!1,!i.default.wxLoginSuccess)return console.log("未授权，引导获取授权！！！"),void this.showAuthTip(!0);this.isGetWorldList||this.getWorldRankingData()},e.prototype.showAuthTip=function(e){void 0===e&&(e=!1),(this.ndAuthTip.active=e)?i.default.userInfoBtn.show():i.default.userInfoBtn.hide()},e.prototype.getWorldRankingData=function(){var t=this;console.log("获取世界排行数据???"),a.default.send({url:a.default.UrlConfig.GET_RANK_LIST,success:function(e){console.log("getWorldList response == ",e),t.isGetWorldList=!0,t.setWorldList(e.data,e.metop,e.metopvalue)},data:{uid:r.default.user_id,voucher:r.default.voucher}})},e.prototype.setWorldList=function(t,o,n){var i=this;c.UILoader.loadRes("prefab/totalRank",cc.Prefab,function(e){c.UILoader.instantiate(e,i.node,function(e){e.getComponent("totalRank").init(t,o,n)})})},e.prototype.showFreindRanking=function(){this.sprFreindRankScroll.node.active=!0,this.ndWorldScr.active=!1,this.showAuthTip(!1),this.isGetFriendList||(this.isGetFriendList=!0,i.default.showFriendRanking())},e.prototype.onCloseRank=function(){this.ndRanking.active=!1},e.prototype._updateSubDomainCanvas=function(){null!=window.sharedCanvas&&null!=this.tex&&this.ndRanking.active&&this.sprFreindRankScroll.node.active&&(this.tex.initWithElement(window.sharedCanvas),this.tex.handleLoadedTexture(),this.sprFreindRankScroll.spriteFrame=new cc.SpriteFrame(this.tex))},e.prototype.update=function(){this._updateSubDomainCanvas()},__decorate([d(cc.Node)],e.prototype,"ndRanking",void 0),__decorate([d(cc.Sprite)],e.prototype,"sprFreindRankScroll",void 0),__decorate([d(cc.Node)],e.prototype,"ndWorldScr",void 0),__decorate([d(cc.Node)],e.prototype,"ndWorldContent",void 0),__decorate([d(cc.Prefab)],e.prototype,"pfCell",void 0),__decorate([d(cc.Toggle)],e.prototype,"friendToggle",void 0),__decorate([d(cc.Toggle)],e.prototype,"worldToggle",void 0),__decorate([d(cc.Node)],e.prototype,"ndAuthTip",void 0),e=__decorate([l],e)}(cc.Component);o.default=u,cc._RF.pop()},{"../../Common/Http":"Http","../../Common/UILoader":"UILoader","../../Common/UserManager":"UserManager","../../Controller/GameCtr":"GameCtr","../../Controller/WXCtr":"WXCtr"}],Start:[function(e,t,o){"use strict";cc._RF.push(t,"3c6d1dwlJBCnJO9JYDxCrgR","Start"),Object.defineProperty(o,"__esModule",{value:!0});var n,i,a=e("../../Controller/GameCtr"),r=e("../../Controller/WXCtr"),c=e("../../Common/ViewManager"),s=e("../../Common/Util"),l=e("../../Common/UserManager"),d=e("../../Common/Http"),u=e("../../Common/AudioManager"),h=cc._decorator,p=h.ccclass,f=h.property;(i=n||(n={}))[i.LEFT=0]="LEFT",i[i.RIGHT=1]="RIGHT";var g=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.roleCard_1=null,e.roleCard_2=null,e.roleCard_3=null,e.worldRank=null,e.morePower=null,e.selfInfoPrefab=null,e.signIn=null,e.totalRankNode=null,e.sliderData=null,e.roleListEventMask=null,e.roleListArrowLeft=null,e.roleListArrowRight=null,e.lb_roleIndex=null,e.mask_up=null,e.mask_down=null,e.btnsNode=null,e.tex=null,e.friendRankNode=null,e.curRoleCardIndex=2,e.roleCardDistance=500,e.roleCardBoundary=1e3,e.lastClickTime=-1,e.roleCardList=[],e.roleCardInfoList=[],e}return __extends(e,t),e.prototype.onLoad=function(){a.default.getInstance().setStart(this),this.initCurrentRoleIndex(),this.initNode(),this.initEvent(),this.initSelfInfo(),u.default.getInstance().playMusic("audio/gameMusic")},e.prototype.start=function(){r.default.getFriendRankingData(),this.showGameCount(),null!=window.wx&&(this.tex=new cc.Texture2D,window.sharedCanvas.width=900,window.sharedCanvas.height=1200)},e.prototype.startGame=function(){a.default.startGame()},e.prototype.initCurrentRoleIndex=function(){},e.prototype.initNode=function(){this.mask_up=this.node.getChildByName("mask_up"),this.mask_down=this.node.getChildByName("mask_down"),this.btnsNode=this.node.getChildByName("btnsNode"),this.friendRankNode=this.node.getChildByName("friendRankNode"),this.btnsNode.active=!1,this.friendRankNode.active=!1,this.roleCardList.push(this.roleCard_1),this.roleCardList.push(this.roleCard_2),this.roleCardList.push(this.roleCard_3),this.initBtnsNode()},e.prototype.initBtnsNode=function(){var e=this.btnsNode.getChildByName("btn_start"),t=this.btnsNode.getChildByName("roleFrame"),o=this.btnsNode.getChildByName("btn_invite"),n=this.btnsNode.getChildByName("btn_signIn"),i=this.btnsNode.getChildByName("btn_gameCount"),a=this.btnsNode.getChildByName("btn_totalRank"),r=this.btnsNode.getChildByName("btn_gameEntrance1"),c=this.btnsNode.getChildByName("btn_gameEntrance2"),s=this.node.getChildByName("mask_up").getChildByName("headNode").getChildByName("headFrame");this.initBtnsListener(e),this.initBtnsListener(a),this.initBtnsListener(i),this.initBtnsListener(s),this.initBtnsListener(t),this.initBtnsListener(o),this.initBtnsListener(n),this.initBtnsListener(r),this.initBtnsListener(c)},e.prototype.initBtnsListener=function(e){e.on(cc.Node.EventType.TOUCH_END,function(e){u.default.getInstance().playSound("audio/btnCick");var t=e.target.getName();if("btn_totalRank"==t)this.showWorldRank();else if("btn_gameCount"==t){if(!a.default.isAudited)return;this.createMorePowerNode()}else"btn_start"==t?this.startFight():"headFrame"==t?this.creatSelfInfoNode():"arrow_left"==t?this.updateRoleCardPos(n.RIGHT):"arrow_right"==t?this.updateRoleCardPos(n.LEFT):"btn_invite"==t?console.log("log--------btn_invite  click"):"btn_signIn"==t?this.createSignInNode():"btn_gameEntrance1"==t?console.log("log--------btn_gameEntrance1  click"):"btn_gameEntrance2"==t?console.log("log--------btn_gameEntrance2  click"):"roleFrame"==t&&console.log("log--------roleFrame  click")}.bind(this))},e.prototype.initSelfInfo=function(){var e=a.default.getInstance().getSelfInfoFromLocal();if(e){var t=this.mask_up.getChildByName("headNode"),o=t.getChildByName("lb_name"),n=t.getChildByName("lb_gold"),i=t.getChildByName("mask").getChildByName("headImg");o.getComponent(cc.Label).string=e.nickName,n.getComponent(cc.Label).string=a.default.money,s.default.loadImg(i.getComponent(cc.Sprite),e.avatarUrl)}},e.prototype.createTotalRankNode=function(e,t,o){if(!this.node.parent.getChildByName("totalRank")){cc.director.getVisibleSize();var n=cc.instantiate(this.worldRank);n.parent=this.node.parent,n.getComponent("totalRank").initData(e,t,o),r.default.authed?n.getComponent("totalRank").init():n.getComponent("totalRank").showAuthTip(),n.scale=.2,n.runAction(cc.sequence(cc.scaleTo(.15,1.1),cc.scaleTo(.1,1)))}},e.prototype.createMorePowerNode=function(){if(!this.node.getChildByName("morePower")){var e=cc.instantiate(this.morePower);e.parent=this.node,e.setLocalZOrder(20)}},e.prototype.creatSelfInfoNode=function(){if(!this.node.parent.getChildByName("btn_head")){var e=this.node.getChildByName("mask_up").getChildByName("headNode").getChildByName("headFrame"),t=cc.instantiate(this.selfInfoPrefab);t.parent=this.mask_up;var o=a.default.getInstance().getSelfInfoFromLocal();t.getComponent("selfInfo").setID("用户ID:"+l.default.user_id),t.getComponent("selfInfo").setName(o.nickName),t.getComponent("selfInfo").setGameCount("场次:"+a.default.joinGameCount),t.getComponent("selfInfo").setChickenCount(a.default.chickenCount),t.x=e.x,t.y=e.y-350,t.runAction(cc.sequence(cc.scaleTo(.1,1.2),cc.scaleTo(.1,1)))}},e.prototype.createSignInNode=function(){this.node.getChildByName("signIn")||(cc.instantiate(this.signIn).parent=this.node)},e.prototype.initEvent=function(){a.default.getInstance().addListener("showStartFullly",this.onShowStartFullly.bind(this)),a.default.getInstance().addListener("getSelfInfoSuccess",this.onGetSelfInfoSuccess.bind(this)),a.default.getInstance().addListener("morePowerSuccess1",this.showGameCount.bind(this))},e.prototype.onShowStartFullly=function(){this.mask_up.runAction(cc.moveBy(.5,cc.p(0,650))),this.mask_down.runAction(cc.sequence(cc.moveBy(.5,cc.p(0,-150)),cc.callFunc(function(){this.showBtnNodeAction()}.bind(this))))},e.prototype.onGetSelfInfoSuccess=function(){this.initSelfInfo()},e.prototype.roleCardAcion1=function(){for(var e=0;e<this.roleCardInfoList.length;e++)this.roleCardInfoList[e].node.active=!0,this.roleCardInfoList[e].node.y=450,this.roleCardInfoList[e].node.runAction(cc.spawn(cc.moveBy(.2,cc.p(500*(e-this.curRoleCardIndex),65*Math.abs(e-this.curRoleCardIndex))),cc.rotateBy(.2,-15*(e-this.curRoleCardIndex))))},e.prototype.showRoleCardArrow=function(){this.roleListArrowLeft.active=!0,this.roleListArrowRight.active=!0,this.lb_roleIndex.active=!0,this.roleListArrowLeft.opacity=0,this.roleListArrowRight.opacity=0,this.roleListArrowLeft.runAction(cc.fadeIn(.2)),this.roleListArrowRight.runAction(cc.fadeIn(.2))},e.prototype.showRankFriendAction=function(){cc.director.getVisibleSize();this.friendRankNode.active=!0,this.friendRankNode.y=-1250,this.friendRankNode.runAction(cc.moveTo(.2,cc.p(0,-960)))},e.prototype.showBtnNodeAction=function(){this.btnsNode.active=!0;var e=this.btnsNode.getChildByName("btn_start");e.scale=1.2,e.runAction(cc.scaleTo(.2,1))},e.prototype.showWorldRank=function(){var t=this;console.log("获取世界排行数据???"),d.default.send({url:d.default.UrlConfig.GET_RANK_LIST,success:function(e){console.log("getWorldList response == ",e),t.createTotalRankNode(e.data,e.metop,e.metopvalue)},data:{uid:l.default.user_id,voucher:l.default.voucher}})},e.prototype.startFight=function(){if(!r.default.authed){var e=this.node.getChildByName("authTip");return e.setLocalZOrder(60),e.active=!0,r.default.createUserInfoBtn(),void r.default.onUserInfoBtnTap(this.hideAuthTip.bind(this))}if(0<a.default.powerValue)cc.director.loadScene("Game"),a.default.powerValue--;else{if(!a.default.isAudited)return void c.default.toast("没有体力值");this.createMorePowerNode()}},e.prototype.hideAuthTip=function(){this.node.getChildByName("authTip").active=!1},e.prototype.showGameCount=function(){this.btnsNode.getChildByName("btn_gameCount").getChildByName("lb_gameCount").getComponent(cc.Label).string=a.default.powerValue+"/10"},e.prototype._updateSubDomainCanvas=function(){null!=window.sharedCanvas&&null!=this.tex&&(this.tex.initWithElement(window.sharedCanvas),this.tex.handleLoadedTexture())},e.prototype.update=function(){this._updateSubDomainCanvas()},__decorate([f(cc.Prefab)],e.prototype,"roleCard_1",void 0),__decorate([f(cc.Prefab)],e.prototype,"roleCard_2",void 0),__decorate([f(cc.Prefab)],e.prototype,"roleCard_3",void 0),__decorate([f(cc.Prefab)],e.prototype,"worldRank",void 0),__decorate([f(cc.Prefab)],e.prototype,"morePower",void 0),__decorate([f(cc.Prefab)],e.prototype,"selfInfoPrefab",void 0),__decorate([f(cc.Prefab)],e.prototype,"signIn",void 0),e=__decorate([p],e)}(cc.Component);o.default=g,cc._RF.pop()},{"../../Common/AudioManager":"AudioManager","../../Common/Http":"Http","../../Common/UserManager":"UserManager","../../Common/Util":"Util","../../Common/ViewManager":"ViewManager","../../Controller/GameCtr":"GameCtr","../../Controller/WXCtr":"WXCtr"}],ToastView:[function(e,t,o){"use strict";cc._RF.push(t,"1a52bS/p5tF7oHdbdFrndcM","ToastView"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("./PopupView"),i=cc._decorator,a=i.ccclass,r=i.property,c=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.messageLabel=null,e._showTime=1.5,e}return __extends(e,t),e.prototype.onLoad=function(){t.prototype.onLoad.call(this)},e.prototype.setMessage=function(e){this.message=e||"提示",this.messageLabel.string=e},e.prototype.setFontSize=function(e){void 0===e&&(e=0),0<e&&(this.messageLabel.fontSize=e,this.messageLabel.lineHeight=e)},e.prototype.setTextColor=function(e){void 0===e&&(e=null),e&&(this.messageLabel.node.color=e)},e.prototype.show=function(e){t.prototype.show.call(this,e),this.unscheduleAllCallbacks(),this.schedule(this.delayDismiss.bind(this),this._showTime)},e.prototype.delayDismiss=function(){this.dismiss()},__decorate([r(cc.Label)],e.prototype,"messageLabel",void 0),e=__decorate([a],e)}(n.default);o.default=c,cc._RF.pop()},{"./PopupView":"PopupView"}],UILoader:[function(e,t,o){"use strict";function u(e){null==e.retain&&(e.retain=0)}function h(e){return!!e}function i(e){return!!e&&(null!=e.retain&&null!=e.retain||!(e.retain=1))}function a(e,t){e._children.forEach(function(e){(function(e,t){var o=e.getComponent(cc.Sprite);o&&o.spriteFrame&&(u(cc.loader._cache[o.spriteFrame._textureFilename]),cc.loader._cache[o.spriteFrame._textureFilename].retain+=t);var n=e.getComponent(cc.Button);n&&(n.normalSprite&&(u(cc.loader._cache[n.normalSprite._textureFilename]),cc.loader._cache[n.normalSprite._textureFilename].retain+=t),n.pressedSprite&&(u(cc.loader._cache[n.pressedSprite._textureFilename]),cc.loader._cache[n.pressedSprite._textureFilename].retain+=t),n.hoverSprite&&(u(cc.loader._cache[n.hoverSprite._textureFilename]),cc.loader._cache[n.hoverSprite._textureFilename].retain+=t),n.disabledSprite&&(u(cc.loader._cache[n.disabledSprite._textureFilename]),cc.loader._cache[n.disabledSprite._textureFilename].retain+=t));var i=e.getComponent(cc.Label);i&&i.font&&i.font instanceof cc.BitmapFont&&i.font.spriteFrame&&(u(cc.loader._cache[i.font.spriteFrame._textureFilename]),cc.loader._cache[i.font.spriteFrame._textureFilename].retain+=t);var a=e.getComponent(cc.RichText);if(a&&a.imageAtlas){var r=Object.keys(a.imageAtlas._spriteFrames);0<r.length&&(u(cc.loader._cache[a.imageAtlas._spriteFrames[r[0]]._textureFilename]),cc.loader._cache[a.imageAtlas._spriteFrames[r[0]]._textureFilename].retain+=t)}var c=e.getComponent(cc.ParticleSystem);c&&c._texture&&(u(cc.loader._cache[c._texture]),cc.loader._cache[c._texture].retain+=t);var s=e.getComponent(cc.PageViewIndicator);s&&s.spriteFrame&&(u(cc.loader._cache[s.spriteFrame._textureFilename]),cc.loader._cache[s.spriteFrame._textureFilename].retain+=t);var l=e.getComponent(cc.EditBox);l&&l.backgroundImage&&(u(cc.loader._cache[l.backgroundImage._textureFilename]),cc.loader._cache[l.backgroundImage._textureFilename].retain+=t);var d=e.getComponent(cc.Mask);d&&d.spriteFrame&&(u(cc.loader._cache[d.spriteFrame._textureFilename]),cc.loader._cache[d.spriteFrame._textureFilename].retain+=t)})(e,t),a(e,t)})}function r(t,o){if(t instanceof cc.Texture2D)cc.loader._cache[t.url].isStatic=!0,cc.loader._cache[t.url].cusTag=o;else if(t instanceof cc.SpriteFrame)cc.loader._cache[t._textureFilename].isStatic=!0,cc.loader._cache[t._textureFilename].cusTag=o;else if(t instanceof cc.Prefab)(function t(e,o){var n=e;e.data&&(n=e.data);n instanceof cc.Scene||c(n,o);var i=n._children;i.forEach(function(e){c(e,o),t(e,o)})})(t,o);else if(t instanceof cc.BitmapFont)cc.loader._cache[t.spriteFrame._textureFilename].isStatic=!0,cc.loader._cache[t.spriteFrame._textureFilename].cusTag=o;else if(t instanceof cc.SpriteAtlas){Object.keys(t._spriteFrames).forEach(function(e){cc.loader._cache[t._spriteFrames[e]._textureFilename].isStatic=!0,cc.loader._cache[t._spriteFrames[e]._textureFilename].cusTag=o})}else t instanceof cc.AnimationClip?cc.log("AnimationClip 资源加载未做处理"):t instanceof Object&&t.name&&cc.log("Object 资源加载未做处理")}function c(e,t){var o=e.getComponent(cc.Sprite);o&&o.spriteFrame&&h(cc.loader._cache[o.spriteFrame._textureFilename])&&(cc.loader._cache[o.spriteFrame._textureFilename].isStatic=!0,cc.loader._cache[o.spriteFrame._textureFilename].cusTag=t);var n=e.getComponent(cc.Button);n&&(n.normalSprite&&h(cc.loader._cache[n.normalSprite._textureFilename])&&(cc.loader._cache[n.normalSprite._textureFilename].isStatic=!0,cc.loader._cache[n.normalSprite._textureFilename].cusTag=t),n.pressedSprite&&h(cc.loader._cache[n.pressedSprite._textureFilename])&&(cc.loader._cache[n.pressedSprite._textureFilename].isStatic=!0,cc.loader._cache[n.pressedSprite._textureFilename].cusTag=t),n.hoverSprite&&h(cc.loader._cache[n.hoverSprite._textureFilename])&&(cc.loader._cache[n.hoverSprite._textureFilename].isStatic=!0,cc.loader._cache[n.hoverSprite._textureFilename].cusTag=t),n.disabledSprite&&h(cc.loader._cache[n.disabledSprite._textureFilename])&&(cc.loader._cache[n.disabledSprite._textureFilename].isStatic=!0,cc.loader._cache[n.disabledSprite._textureFilename].cusTag=t));var i=e.getComponent(cc.Label);i&&i.font&&i.font instanceof cc.BitmapFont&&i.font.spriteFrame&&h(cc.loader._cache[i.font.spriteFrame._textureFilename])&&(cc.loader._cache[i.font.spriteFrame._textureFilename].isStatic=!0,cc.loader._cache[i.font.spriteFrame._textureFilename].cusTag=t);var a=e.getComponent(cc.RichText);if(a&&a.imageAtlas){var r=Object.keys(a.imageAtlas._spriteFrames);0<r.length&&h(cc.loader._cache[a.imageAtlas._spriteFrames[r[0]]._textureFilename])&&(cc.loader._cache[a.imageAtlas._spriteFrames[r[0]]._textureFilename].isStatic=!0,cc.loader._cache[a.imageAtlas._spriteFrames[r[0]]._textureFilename].cusTag=t)}var c=e.getComponent(cc.ParticleSystem);c&&c._texture&&h(cc.loader._cache[c._texture])&&(cc.loader._cache[c._texture].isStatic=!0,cc.loader._cache[c._texture].cusTag=t);var s=e.getComponent(cc.PageViewIndicator);s&&s.spriteFrame&&h(cc.loader._cache[s.spriteFrame._textureFilename])&&(cc.loader._cache[s.spriteFrame._textureFilename].isStatic=!0,cc.loader._cache[s.spriteFrame._textureFilename].cusTag=t);var l=e.getComponent(cc.EditBox);l&&l.backgroundImage&&h(cc.loader._cache[l.backgroundImage._textureFilename])&&(cc.loader._cache[l.backgroundImage._textureFilename].isStatic=!0,cc.loader._cache[l.backgroundImage._textureFilename].cusTag=t);var d=e.getComponent(cc.Mask);d&&d.spriteFrame&&h(cc.loader._cache[d.spriteFrame._textureFilename])&&(cc.loader._cache[d.spriteFrame._textureFilename].cusTag=t,cc.loader._cache[d.spriteFrame._textureFilename].isStatic=!0)}function s(e){var t,o=Array.isArray(e)?[]:{};for(t in e)e.hasOwnProperty(t)&&(o[t]="Object"==typeof e[t]?s(e[t]):e[t]);return o}function l(){cc.director.getScene().dependAssets;var e=s(cc.loader._cache),t=[];for(var o in e)e[o].isStatic||e[o].retain<=0&&(t.push(e[o].url),cc.loader.release(e[o].url));var n=[];for(var o in cc.loader._cache)if(cc.loader._cache[o].dependKeys&&0<cc.loader._cache[o].dependKeys.length){for(var i=!1,a=0;a<cc.loader._cache[o].dependKeys.length;a++)-1!==t.indexOf(cc.loader._cache[o].dependKeys[a])&&(i=!0);i&&(n.push(cc.loader._cache[o].url),cc.loader.release(cc.loader._cache[o].url))}for(var o in cc.loader._cache)if(cc.loader._cache[o].dependKeys&&0<cc.loader._cache[o].dependKeys.length){for(i=!1,a=0;a<cc.loader._cache[o].dependKeys.length;a++)-1!==n.indexOf(cc.loader._cache[o].dependKeys[a])&&(i=!0);i&&cc.loader.release(cc.loader._cache[o].url)}t=[]}function d(e,t,o){e[t]&&(u(cc.loader._cache[e[t]._textureFilename]),cc.loader._cache[e[t]._textureFilename].retain-=1),u(cc.loader._cache[o._textureFilename]),cc.loader._cache[o._textureFilename].retain+=1,e[t]=o}cc._RF.push(t,"4d4d9jueVJMnoeoNVuMb5gY","UILoader"),Object.defineProperty(o,"__esModule",{value:!0});var p={},f=null,n=cc._decorator,g=n.ccclass,m=(n.property,function(){function e(){}return e.loadRes=function(e,t,o){cc.loader.loadRes(e,t,function(e,t){e?cc.log("[资源加载] 错误 "+e):o(t)})},e.loadStaticRes=function(e,t,o,n){e&&t&&n?cc.loader.loadRes(e,t,function(e,t){e?cc.log("[资源加载] 错误 "+e):(n(t),r(t,o))}):cc.log("参数错误")},e.retainScene=function(e){a(e,1)},e.replaceSpriteTexture=function(e,t){e&&t?e.getComponent(cc.Sprite)?(d(e.getComponent(cc.Sprite),"spriteFrame",t),l()):cc.log("目标节点没有Sprite组件"):cc.log("参数错误")},e.replaceButtonTexture=function(e,t,o,n,i){if(e&&t)if(e.getComponent(cc.Button)){var a=e.getComponent(cc.Button);t&&d(a,"normalSprite",t),o&&d(a,"pressedSprite",o),n&&d(a,"hoverSprite",n),i&&d(a,"disabledSprite",i),l()}else cc.log("目标节点没有Button组件");else cc.log("参数错误")},e.instantiate=function(e,t,o){t&&o||cc.log("参数不对, 请检查参数");var n=cc.instantiate(e);t.addChild(n),o(n),a(n,1)},e.releaseStaticRes=function(e){void 0===e&&(e=null),function(e){cc.director.getScene().dependAssets;var t=s(cc.loader._cache),o=[];for(var n in t)e&&t[n].cusTag!=e||(0<t[n].retain&&t[n].isStatic?cc.log(n+" 还在使用中..., 该纹理不会释放"):t[n].retain<=0&&(o.push(t[n].url),cc.loader.release(t[n].url)));var i=[];for(var n in cc.loader._cache)if(cc.loader._cache[n].dependKeys&&0<cc.loader._cache[n].dependKeys.length){for(var a=!1,r=0;r<cc.loader._cache[n].dependKeys.length;r++)-1!==o.indexOf(cc.loader._cache[n].dependKeys[r])&&(a=!0);a&&(i.push(cc.loader._cache[n].url),cc.loader.release(cc.loader._cache[n].url))}for(var n in cc.loader._cache)if(cc.loader._cache[n].dependKeys&&0<cc.loader._cache[n].dependKeys.length){for(a=!1,r=0;r<cc.loader._cache[n].dependKeys.length;r++)-1!==i.indexOf(cc.loader._cache[n].dependKeys[r])&&(a=!0);a&&cc.loader.release(cc.loader._cache[n].url)}o=[]}(e)},e.destroy=function(e){e instanceof cc.Node?(a(e,-1),e.destroy(),l()):cc.log("你要销毁的不是一个节点")},e.beforeSceneLoading=function(e){p={};var t=e.currentTarget._scene.dependAssets;if(t&&0<t.length)for(var o=0;o<t.length;o++)cc.loader._cache[t[o]]&&cc.loader._cache[t[o]].isStatic&&(p[o]=t[o],delete t[o]),i(cc.loader._cache[t[o]])&&(cc.loader._cache[t[o]].retain-=1);Object.keys(cc.loader._cache).forEach(function(e){cc.loader._cache[e]&&!cc.loader._cache[e].isStatic&&0<cc.loader._cache[e].retain&&i(cc.loader._cache[e])&&(cc.loader._cache[e].retain=0)})},e.afterSceneLaunch=function(e){for(var t in p)e.currentTarget._scene.dependAssets[t]=p[t];var o=e.currentTarget._scene.dependAssets;if(o&&0<o.length)for(var n=o.length-1;0<=n;n--)cc.loader._cache[o[n]]&&cc.loader._cache[o[n]].isStatic||i(cc.loader._cache[o[n]])&&(cc.loader._cache[o[n]].retain+=1);l()},e.playEffect=function(e,t){if(e&&t){var o=cc.audioEngine.play(e,!1,t);return cc.audioEngine.setFinishCallback(o,function(e,t){cc.loader.release(cc.loader._cache[e.target.src].url)}),o}cc.log("参数错误")},e.playMusic=function(e,t,o){if(e&&o){f&&cc.loader.release(cc.loader._cache[f].url),f=e;var n=cc.audioEngine.play(e,t,o);return cc.audioEngine.setFinishCallback(n,function(e,t){cc.log("触发回调函数"),cc.loader.release(cc.loader._cache[e.target.src].url)}),n}cc.log("参数错误")},e=__decorate([g],e)}());o.UILoader=m,cc._RF.pop()},{}],UrlConfig:[function(e,t,o){"use strict";cc._RF.push(t,"aa7e0ISVFNKh4mRZZ+qgLW/","UrlConfig"),Object.defineProperty(o,"__esModule",{value:!0});var n=cc._decorator,i=n.ccclass,a=(n.property,function(){function e(){}return e.rootUrl="https://api.2-00.cn/api_game_chiji2",e.LOGIN="/publicapi.php?method=getuid",e.SET_USER_DATA="/publicapi.php?method=setUserData",e.DISPOSE_USER="publicapi.php?method=disposeUser",e.GET_USERINFO="/publicapi.php?method=getUserInfo",e.GET_SETTING="/weixinapi.php?method=getsetting",e.GET_GOLD="/weixinapi.php?method=getGoldByShare",e.GET_SHARE="/weixinapi.php?method=getShare",e.ADD_FRIEND="/weixinapi.php?method=addFriend",e.SHARE_FRIEND_RESULT="/weixinapi.php?method=friendResult",e.RECEIVE_PRIZE="/weixinapi.php?method=receivePrize",e.GET_RANDOM_USER="/weixinapi.php?method=getRandomUser",e.REVIVECONFIG="/weixinapi.php?method=reviveConfig",e.CHANEL_RECORD="/weixinapi.php?method=addChannelRecord",e.ADConfig="/weixinapi.php?method=getAdv",e.VideoOpen="/weixinapi.php?method=openAdv",e.SET_GOLD_DATA="/weixinapi.php?method=setData",e.SET_FORMID="/weixinapi.php?method=setformId",e.INVITED_BY_FRIEND="/weixinapi.php?method=addSeek",e.SEEK_LOG="/weixinapi.php?method=SeekLog",e.SHARE_GROUP="/weixinapi.php?method=shareGroup",e.GET_RANK_LIST="/weixinapi.php?method=getRankList",e.MONEY_TOTICES="/weixinapi.php?method=moneynotices",e.GET_TODAY="/weixinapi.php?method=getToday",e.DO_TODAY="/weixinapi.php?method=doToday",e.GAME_START="/weixinapi.php?method=GameStart",e.GET_GAME_START="/weixinapi.php?method=getGameStart",e.GET_TITLE="/weixinapi.php?method=getTitle",e.GAME_WIN="/weixinapi.php?method=GameWin",e=__decorate([i],e)}());o.default=a,cc._RF.pop()},{}],UserManager:[function(e,t,o){"use strict";cc._RF.push(t,"1c7810/IFZD5LG6YNJImyPA","UserManager"),Object.defineProperty(o,"__esModule",{value:!0});var n=cc._decorator,i=n.ccclass,a=(n.property,function(){function e(){}return t=e,Object.defineProperty(e,"user",{get:function(){return t._user},set:function(e){t._user=e},enumerable:!0,configurable:!0}),Object.defineProperty(e,"user_id",{get:function(){return null!=t._user_id?t._user_id:null},set:function(e){t._user_id=e},enumerable:!0,configurable:!0}),Object.defineProperty(e,"voucher",{get:function(){return t._voucher},set:function(e){t._voucher=e},enumerable:!0,configurable:!0}),e._user=null,e._user_id=null,e._voucher=null,e=t=__decorate([i],e);var t}());o.default=a,cc._RF.pop()},{}],Util:[function(e,t,o){"use strict";cc._RF.push(t,"2190bA9XapLCKNN06NNZmnm","Util"),Object.defineProperty(o,"__esModule",{value:!0});var n=cc._decorator,i=n.ccclass,a=(n.property,function(){function e(){}return(a=e).loadImg=function(o,e){cc.loader.load({url:e,type:"png"},function(e,t){o.spriteFrame=new cc.SpriteFrame(t)})},e.findChildByName=function(e,t){if(!e||!t||!t.children)return null;var o=t.getChildByName(e);if(o)return o;for(var n=t.children,i=0;i<n.length;i++)if(o=a.findChildByName(e,n[i]))return o;return null},e.setString=function(e,t){if("number"==typeof t&&(t+=""),t=t||"",e instanceof cc.Node){var o=e.getComponent(cc.Label);if(cc.isValid(o))return void(o.string=t);var n=e.getComponent(cc.EditBox);cc.isValid(n)&&(n.string=t)}else cc.isValid(e)&&(e.string=t)},e.cutstr=function(e,t){var o,n=0,i=new String;o=e.length;for(var a=0;a<o;a++){var r=e.charAt(a);if(n++,4<escape(r).length&&n++,i=i.concat(r),t<n)return i=i.concat("...")}return e},e.getCurrTimeYYMMDD=function(){var e=new Date;return e.getFullYear()+"-"+(e.getMonth()+1<10?"0"+(e.getMonth()+1):e.getMonth()+1)+"-"+(e.getDate()<10?"0"+e.getDate():e.getDate())},e=a=__decorate([i],e);var a}());o.default=a,cc._RF.pop()},{}],ViewManager:[function(e,t,o){"use strict";cc._RF.push(t,"a4f81RHNkJOZ7DAr9pb05OX","ViewManager"),Object.defineProperty(o,"__esModule",{value:!0});var F=e("../ui/view/PopupView"),n=e("../ui/view/PromptDialog"),r=e("../UI/view/ToastView"),i=cc._decorator,a=i.ccclass,c=i.property,s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.popupView=null,e.promptDialog=null,e.toastView=null,e.popupViewList=new Array,e.popupViewMap={},e}return __extends(e,t),(B=e).prototype.onLoad=function(){B.mViewManager=this,cc.game.addPersistRootNode(this.node),cc.systemEvent.on(cc.SystemEvent.EventType.KEY_DOWN,this.onKeyDown,this)},e.prototype.onDestroy=function(){cc.systemEvent.off(cc.SystemEvent.EventType.KEY_DOWN,this.onKeyDown,this)},e.prototype.onKeyDown=function(e){if(e.keyCode==cc.KEY.back)for(;0<this.popupViewList.length;){var t=this.popupViewList.pop();if(this.removeFromMap(t),cc.isValid(t)){t.dismiss();break}}},e.prototype.onPopupDestroy=function(e){this.removeFromMap(e),this.removeFromArray(e)},e.prototype.show=function(e,t){void 0===t&&(t=null),cc.isValid(e)&&(e.closeOnKeyBack&&this.popupViewList.push(e),B.getPopupView(e.name)!=e&&B.dismiss(e.name),e.name&&(this.popupViewMap[e.name]=e),e.setOnDestroyCallback(this.onPopupDestroy.bind(this)),e.show(t||B.getRoot()))},e.prototype.removeFromMap=function(e){e&&e.name&&(this.popupViewMap[e.name]=null)},e.prototype.removeFromArray=function(e){if(e){var t=this.popupViewList.indexOf(e);0<=t&&this.popupViewList.splice(t,1)}},e.checkValid=function(){return!!B.mViewManager},e.show=function(e){var t=e.node,o=void 0===t?null:t,n=e.name,i=void 0===n?null:n,a=e.parent,r=void 0===a?null:a,c=e.localZOrder,s=void 0===c?0:c,l=(e.data,e.closeOnTouchOutside),d=void 0!==l&&l,u=e.closeOnKeyBack,h=void 0!==u&&u,p=e.mask,f=void 0===p||p,g=e.maskOpacity,m=void 0===g?200:g,_=e.transitionShow,v=void 0!==_&&_,y=e.transitionDismiss,C=void 0===y||y,w=e.showAction,b=void 0===w?null:w,N=e.showActionTarget,k=void 0===N?null:N,T=e.dismissAction,S=void 0===T?null:T,A=e.dismissActionTarget,I=void 0===A?null:A;if(cc.isValid(o)&&B.checkValid()&&cc.isValid(B.mViewManager.popupView)){var R=o.getComponent(F.default);if(R)R.contentNode=R.contentNode||R.node.getChildByName("ContentNode")||R.node;else(R=cc.instantiate(B.mViewManager.popupView).getComponent(F.default)).contentNode=o,R.contentNode.parent=R.node;return B.showPopup({popupView:R,name:i,parent:r,localZOrder:s,closeOnTouchOutside:d,closeOnKeyBack:h,mask:f,maskOpacity:m,transitionShow:v,transitionDismiss:C,showAction:b,showActionTarget:k,dismissAction:S,dismissActionTarget:I}),R}},e.showPopup=function(e){var t=e.popupView,o=void 0===t?null:t,n=e.name,i=void 0===n?null:n,a=e.parent,r=void 0===a?null:a,c=e.localZOrder,s=void 0===c?0:c,l=e.closeOnTouchOutside,d=void 0!==l&&l,u=e.closeOnKeyBack,h=void 0!==u&&u,p=e.mask,f=void 0===p||p,g=e.maskOpacity,m=void 0===g?200:g,_=e.transitionShow,v=void 0!==_&&_,y=e.transitionDismiss,C=void 0===y||y,w=e.showAction,b=void 0===w?null:w,N=e.showActionTarget,k=void 0===N?null:N,T=e.dismissAction,S=void 0===T?null:T,A=e.dismissActionTarget,I=void 0===A?null:A;B.checkValid()&&cc.isValid(o)&&(d&&(f=!0),o.setMask(f,m),k=k||o.contentNode,v&&cc.isValid(k)&&(b=b||cc.sequence(cc.callFunc(function(){k.scale=0}),cc.scaleTo(.1,1,1).easing(cc.easeOut(3)))),o.setShowAction(b,k),I=I||o.contentNode,C&&(S=S||null),o.setDismissAction(S,I),o.closeOnTouchOutside=d,o.closeOnKeyBack=h,o.name=i||o.name,o.localZOrder=s||0,B.mViewManager.show(o,r))},e.dismissPopup=function(e){e&&(cc.isValid(e)&&e.dismiss(),B.checkValid()&&(B.mViewManager.removeFromMap(e),B.mViewManager.removeFromArray(e)))},e.dismiss=function(e){if(e&&B.checkValid()){var t=B.mViewManager.popupViewMap[e];cc.isValid(t)&&t.dismiss(),B.mViewManager.popupViewMap[e]=null,B.mViewManager.removeFromMap(t),B.mViewManager.removeFromArray(t)}},e.isShow=function(e){return!!e&&(!!B.checkValid()&&cc.isValid(B.mViewManager.popupViewMap[e]))},e.getPopupView=function(e){return e&&B.checkValid()?cc.isValid(B.mViewManager.popupViewMap[e])?B.mViewManager.popupViewMap[e]:(B.mViewManager.popupViewMap[e]&&(B.mViewManager.popupViewMap[e]=null),null):null},e.createDialog=function(e){if(B.checkValid());},e.showPromptDialog=function(e){if(B.checkValid()){var t=cc.instantiate(B.mViewManager.promptDialog);t.getComponent(n.default).setData(e),B.show({node:t,name:e.name||B.View.PromptDialog,localZOrder:B.LocalZOrder.PromptDialog,mask:!0,maskOpacity:200,transitionShow:!0})}},e.toast=function(e,t,o){if(void 0===t&&(t=cc.color(255,255,255)),void 0===o&&(o=0),B.checkValid()){var n,i,a=B.getPopupView(B.View.ToastView);a instanceof r.default?(n=a.node,i=a):i=(n=cc.instantiate(B.mViewManager.toastView)).getComponent(r.default),i.setMessage(e),i.setFontSize(o),i.setTextColor(t),B.show({node:n,name:B.View.ToastView,localZOrder:B.LocalZOrder.Toast,mask:!1,transitionDismiss:!1})}},e.getRoot=function(){return cc.director.getScene().getChildByName("Canvas")},e.LocalZOrder={PromptDialog:1e3,Loading:1001,Toast:1002},e.View={PromptDialog:"PromptDialog",ToastView:"ToastView"},__decorate([c(cc.Prefab)],e.prototype,"popupView",void 0),__decorate([c(cc.Prefab)],e.prototype,"promptDialog",void 0),__decorate([c(cc.Prefab)],e.prototype,"toastView",void 0),e=B=__decorate([a],e);var B}(cc.Component);o.default=s,cc._RF.pop()},{"../UI/view/ToastView":"ToastView","../ui/view/PopupView":"PopupView","../ui/view/PromptDialog":"PromptDialog"}],WXCtr:[function(e,t,o){"use strict";cc._RF.push(t,"e659baZaMVDzKDI5WvkuwsU","WXCtr"),Object.defineProperty(o,"__esModule",{value:!0});var n,i,a=e("../Common/Http"),r=e("./HttpCtr"),c=e("./GameCtr"),s=cc._decorator,l=s.ccclass;s.property;(i=n||(n={}))[i.Get_SelfData=0]="Get_SelfData",i[i.Get_FriendData=1]="Get_FriendData",i[i.Get_GroupData=2]="Get_GroupData",i[i.Submit_SelfScore=3]="Submit_SelfScore",i[i.Compare_Score=4]="Compare_Score",i[i.Show_WholeRanking=5]="Show_WholeRanking",i[i.Show_OverRanking=6]="Show_OverRanking",i[i.Close_WholeRanking=7]="Close_WholeRanking",i[i.Close_OverRanking=8]="Close_OverRanking";var d=375,u=667,h=function(){function e(){}return(o=e).getLaunchOptionsSync=function(){null!=window.wx&&(o.launchOption=window.wx.getLaunchOptionsSync(),console.log("获取启动参数",o.launchOption),wx.getFileSystemManager().getSavedFileList({success:function(e){console.log("获取本地缓存文件列表成功",e)}}))},e.getSystemInfo=function(){null!=window.wx&&wx.getSystemInfo({success:function(e){console.log("获取设备信息成功",e),o.screenWidth=e.screenWidth,o.screenHeight=e.screenHeight,o.widthRatio=o.screenWidth/d,o.heightRatio=o.screenHeight/u}})},e.exitGame=function(){null!=window.wx&&wx.exitMiniProgram()},e.getAuthSetting=function(){null!=window.wx&&wx.getSetting({success:function(e){var t=e.authSetting;!0===t["scope.userInfo"]?o.authed=!0:(t["scope.userInfo"],o.authed=!1)}})},e.createUserInfoBtn=function(){null!=window.wx&&(console.log("创建用户授权按钮"),wx.getSystemInfo({success:function(e){console.log("获取设备信息成功",e),e.model,o.screenWidth=e.screenWidth,o.screenHeight=e.screenHeight,o.widthRatio=o.screenWidth/d,o.heightRatio=o.screenHeight/u}}),o.userInfoBtn=wx.createUserInfoButton({type:"image",image:"res/raw-assets/resources/textures/authBtn.png",style:{left:o.screenWidth/2-80,top:o.screenHeight/2-40+50*o.heightRatio,width:160*o.widthRatio,height:40*o.heightRatio}}))},e.onUserInfoBtnTap=function(t){o.userInfoBtn.onTap(function(e){console.log("UserInfoBtn tap",e),e.userInfo&&(o.wxGetUsrInfo(),t&&t(!0),o.userInfoBtn.destroy())})},e.wxGetUsrInfo=function(){null!=window.wx&&window.wx.getUserInfo({lang:"zh_CN",withCredentials:!0,success:function(e){e.userInfo;o.authed=!0,r.default.saveUserInfo(e),c.default.getInstance().saveSelfInfoToLocal(e.userInfo),c.default.getInstance().emitEvent("getSelfInfoSuccess",null),c.default.getInstance().emitEvent("getSelfInfoSuccess1",null)},fail:function(e){console.log("获取自己信息失败",e)}})},e.wxOnLogin=function(){null!=window.wx&&window.wx.login({success:function(e){console.log("微信登录返回值res",e),r.default.login(e.code),o.getShareConfig(),o.getReviveData()}})},e.getUserInfo=function(){window.wx.getUserInfo({lang:"zh_CN",success:function(e){var t=e.userInfo;t.avatarUrl,t.city,t.country,t.gender,t.language,t.nickName,t.openId,t.province;c.default.getInstance().saveSelfInfoToLocal(e.userInfo),c.default.getInstance().emitEvent("getSelfInfoSuccess",null),o.wxLoginSuccess=!0,o.authed=!0,r.default.saveUserInfo(e)},fail:function(e){console.log("获取自己信息失败",e)}})},e.getShareConfig=function(){a.default.send({url:a.default.UrlConfig.GET_SHARE,success:function(e){console.log("获取分享配置信息",e),o.shareTitle=e.data.share_title,o.shareImg=e.data.share_img,wx.onShareAppMessage(function(){return{title:o.shareTitle,imageUrl:o.shareImg}})},data:{share_type:"index"}})},e.getReviveData=function(){a.default.send({url:a.default.UrlConfig.REVIVECONFIG,success:function(e){console.log("获取复活配置信息",e),c.default.reviveData=e.data}})},e.showShareMenu=function(){null!=window.wx&&(console.log("显示分享按钮！！！！！！"),window.wx.showShareMenu({withShareTicket:!0,success:function(e){},fail:function(e){},complete:function(e){}}))},e.setShareAppMessage=function(){null!=window.wx&&wx.onShareAppMessage(function(){return{title:o.shareTitle,imageUrl:o.shareImg}})},e.onShow=function(t){if(void 0===t&&(t=null),console.log("监听小游戏回到前台的事件"),null!=window.wx){var e=function(e){t&&t()};window.wx.onShow(e),o.onShowCall=e}},e.offShow=function(){null!=window.wx&&(console.log("取消监听小游戏回到前台的事件"),window.wx.offShow(o.onShowCall))},e.previewImg=function(e){null!=window.wx&&wx.previewImage({urls:[e],success:function(e){console.log("预览图片成功回调",e)}})},e.setVideoAd=function(e){null!=window.wx&&(o.videoAd=wx.createRewardedVideoAd({adUnitId:e}),o.videoAd.onLoad(function(){console.log("banner 广告加载成功")}),o.videoAd.load(),o.videoAd.onError(function(e){console.log(e)}))},e.showVideoAd=function(){o.videoAd&&o.videoAd.show()},e.onCloseVideo=function(t){var e=function(e){e&&e.isEnded||void 0===e?(t(!0),r.default.videoCheck(o.launchOption.query)):t(!1)};o.videoAd.onClose(e),o.videoAdCallback=e},e.offCloseVideo=function(){o.videoAdCallback&&o.videoAd.offClose(o.videoAdCallback)},e.createBannerAd=function(e){if(void 0===e&&(e=null),null!=window.wx){o.bannerAd&&o.bannerAd.destroy();var t=100;e&&(t=e),o.bannerAd=wx.createBannerAd({adUnitId:o.bannerId,style:{left:0,top:o.screenHeight-t*o.heightRatio,width:375*o.widthRatio}}),o.bannerAd.show()}},e.hideBannerAd=function(){o.bannerAd&&o.bannerAd.destroy()},e.share=function(t){null!=window.wx&&window.wx.shareAppMessage({title:o.shareTitle,imageUrl:o.shareImg,query:"",success:function(e){"revive"==t?(c.default.getInstance().emitEvent("shareSuccess",null),null!=e.shareTickets&&0<e.shareTickets.length&&(console.log("分享到群成功"),o.getWxShareInfo(e.shareTickets[0],"revive"))):(c.default.powerValue++,c.default.getInstance().emitEvent("morePowerSuccess",null),c.default.getInstance().emitEvent("morePowerSuccess1",null))}})},e.getWxShareInfo=function(e,t){null!=window.wx&&window.wx.getShareInfo({shareTicket:e,success:function(e){console.log("获取分享信息成功！！！",e),r.default.shareGroupCheck(e.encryptedData,e.iv,t)}})},e.getStorageData=function(e,t){void 0===t&&(t=null),null!=window.wx&&wx.getStorage({key:e,success:function(e){t&&t(e.data)},fail:function(e){t&&t(null)}})},e.setStorageData=function(e,t){null!=window.wx&&wx.setStorage({key:e,data:t,success:function(e){}})},e.gotoOther=function(e){console.log("data = ",e),e.appid&&wx.navigateToMiniProgram({appId:e.appid,path:e.path,success:function(e){console.log("打开成功")},fail:function(e){wx.showToast({title:"打开失败!",icon:"none"})}})},e.customService=function(){wx.openCustomerServiceConversation({success:function(){o.exitGame()}})},e.getSelfData=function(){null!=window.wx&&window.wx.postMessage({messageType:n.Get_SelfData})},e.getGroupRankingData=function(){console.log("获取群数据！！！！！！"),null!=window.wx&&window.wx.shareAppMessage({title:o.shareTitle,imageUrl:o.shareImg,success:function(e){console.log("分享成功回调返回值",e),null!=e.shareTickets&&0<e.shareTickets.length&&window.wx.postMessage({messageType:n.Get_GroupData,LIST_KEY:"Rank_Data",shareTicket:e.shareTickets[0]})}})},e.getFriendRankingData=function(){null!=window.wx&&window.wx.postMessage({messageType:n.Get_FriendData,LIST_KEY:"Rank_Data"})},e.showOverRanking=function(){null!=window.wx&&(console.log("主域发送消息____显示结束好友排行"),window.wx.postMessage({messageType:n.Show_OverRanking}))},e.closeFriendEndRanking=function(){null!=window.wx&&(console.log("主域发送消息____关闭End好友排行"),window.wx.postMessage({messageType:n.Close_OverRanking}))},e.showFriendRanking=function(){null!=window.wx&&(console.log("主域发送消息____显示好友排行"),window.wx.postMessage({messageType:n.Show_WholeRanking}))},e.closeFriendRanking=function(){null!=window.wx&&(console.log("主域发送消息____关闭好友排行"),window.wx.postMessage({messageType:n.Close_WholeRanking}))},e.submitScoreToWx=function(e){null!=window.wx&&(console.log("主域发送消息____提交分数"),window.wx.postMessage({messageType:n.Submit_SelfScore,LIST_KEY:"Rank_Data",score:e}))},e.saveImge=function(e,t){null!=window.wx&&wx.downloadFile({url:e,success:function(e){console.log("下载图片成功",e),wx.saveImageToPhotosAlbum({filePath:e.tempFilePath,success:function(e){console.log("图片保存到本地相册成功",e),t&&t(!0)}})}})},e.wxLoginSuccess=!1,e.onShowCall=null,e.videoAd=null,e.videoAdCallback=null,e.bannerAd=null,e.bannerId=null,e.authed=!1,e=o=__decorate([l],e);var o}();o.default=h,cc._RF.pop()},{"../Common/Http":"Http","./GameCtr":"GameCtr","./HttpCtr":"HttpCtr"}],eatChicken:[function(e,t,o){"use strict";cc._RF.push(t,"1d702ZePVhGVJlEUtZR8G3G","eatChicken"),Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../Controller/GameCtr"),r=e("../../Common/AudioManager"),c=e("../../Common/ViewManager"),n=cc._decorator,i=n.ccclass,s=n.property,l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.onLoad=function(){var e=this.node.getChildByName("light"),t=a.default.getInstance().getSelfInfoFromLocal(),o=this.node.getChildByName("mask").getChildByName("headImg"),n=this.node.getChildByName("frame").getChildByName("btn_back"),i=this.node.getChildByName("frame").getChildByName("btn_continue");e.runAction(cc.repeatForever(cc.rotateBy(.5,30))),this.loadHeadImg(o,t.avatarUrl),n.on(cc.Node.EventType.TOUCH_END,function(e){r.default.getInstance().playSound("audio/btnCick"),cc.director.loadScene("Start")}),i.on(cc.Node.EventType.TOUCH_END,function(e){if(r.default.getInstance().playSound("audio/btnCick"),0<a.default.powerValue)a.default.powerValue--,a.default.getInstance().emitEvent("restartGame",null),this.node.destroy();else{if(!a.default.isAudited)return void c.default.toast("没有体力值");if(this.node.parent.getChildByName("morePower"))return;var t=cc.instantiate(this.morePower);t.parent=this.node.parent,t.setLocalZOrder(80)}}.bind(this))},t.prototype.loadHeadImg=function(e,t){if(null!=t&&""!=t){var o=e.getComponent(cc.Sprite);cc.loader.load({url:t,type:"png"},function(e,t){o.spriteFrame=new cc.SpriteFrame(t)})}},__decorate([s(cc.Prefab)],t.prototype,"morePower",void 0),t=__decorate([i],t)}(cc.Component);o.default=l,cc._RF.pop()},{"../../Common/AudioManager":"AudioManager","../../Common/ViewManager":"ViewManager","../../Controller/GameCtr":"GameCtr"}],friendRankItem:[function(e,t,o){"use strict";cc._RF.push(t,"b2db4Exq/tMqKxrAr2Ncd4J","friendRankItem"),Object.defineProperty(o,"__esModule",{value:!0});var n=cc._decorator,i=n.ccclass,a=(n.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.lb_name=null,e.lb_rank=null,e.lb_chickenCount=null,e.headImg=null,e}return __extends(e,t),e.prototype.onLoad=function(){this.initNode()},e.prototype.initNode=function(){this.lb_name=this.node.getChildByName("lb_name"),this.lb_rank=this.node.getChildByName("lb_rank"),this.lb_chickenCount=this.node.getChildByName("lb_chickenCount"),this.headImg=this.node.getChildByName("mask").getChildByName("headImg")},e.prototype.setName=function(e){this.lb_name.getComponent(cc.Label).string=e},e.prototype.setRank=function(e){this.lb_rank.getComponent(cc.Label).string=e},e.prototype.setChickenCount=function(e){this.lb_chickenCount.getComponent(cc.Label).string=e},e.prototype.setHeadImg=function(e){var o=this.headImg.getComponent(cc.Sprite);cc.loader.load({url:e,type:"png"},function(e,t){o.spriteFrame=new cc.SpriteFrame(t)})},e=__decorate([i],e)}(cc.Component));o.default=a,cc._RF.pop()},{}],friendRank:[function(e,t,o){"use strict";cc._RF.push(t,"86ccfvGEopB25+T4d8VMLcQ","friendRank"),Object.defineProperty(o,"__esModule",{value:!0});var i=e("../../Common/UILoader"),n=e("../../Common/AudioManager"),a=cc._decorator,r=a.ccclass,c=(a.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.scrollViewContent=null,e.btn_close=null,e}return __extends(e,t),e.prototype.onLoad=function(){this.scrollViewContent=this.node.getChildByName("scrollView").getChildByName("view").getChildByName("content"),this.btn_close=this.node.getChildByName("btn_close"),this.btn_close.on(cc.Node.EventType.TOUCH_END,function(e){this.close(),n.default.getInstance().playSound("audio/btnCick")}.bind(this))},e.prototype.showRank=function(e){var o=this;this.scrollViewContent.setContentSize(cc.size(740,390));for(var t=function(t){i.UILoader.loadRes("prefab/friendRankItem",cc.Prefab,function(e){i.UILoader.instantiate(e,o.scrollViewContent,function(e){e.y=-100-170*t})})},n=0;n<2;n++)t(n)},e.prototype.close=function(){this.node.runAction(cc.sequence(cc.scaleTo(.2,0),cc.callFunc(function(){i.UILoader.destroy(this.node)}.bind(this))))},e=__decorate([r],e)}(cc.Component));o.default=c,cc._RF.pop()},{"../../Common/AudioManager":"AudioManager","../../Common/UILoader":"UILoader"}],gameStartScene:[function(e,t,o){"use strict";cc._RF.push(t,"bd52dZBbANGsrtIUO+zjLuE","gameStartScene"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../../Controller/GameCtr"),i=cc._decorator,a=i.ccclass,r=i.property,c=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.loadingNode=null,e.startNode=null,e}return __extends(e,t),e.prototype.onLoad=function(){this.initNode(),this.initEvent()},e.prototype.initNode=function(){this.initLoadingNode(),this.initStartNode()},e.prototype.initLoadingNode=function(){this.loadingNode=cc.instantiate(this.loadingPrefab),this.loadingNode.parent=this.node},e.prototype.initStartNode=function(){this.startNode=cc.instantiate(this.startPrefab),this.startNode.parent=this.node,this.startNode.y=-n.default.IPONEX_HEIGHT},e.prototype.initEvent=function(){n.default.getInstance().addListener("loadComplete",this.onLoadComplete.bind(this))},e.prototype.onLoadComplete=function(){this.loadingNode.runAction(cc.moveBy(1,cc.p(0,n.default.IPONEX_HEIGHT))),this.startNode.runAction(cc.sequence(cc.moveBy(1,cc.p(0,n.default.IPONEX_HEIGHT)),cc.callFunc(function(){n.default.getInstance().emitEvent("showStartFullly",null)})))},__decorate([r(cc.Prefab)],e.prototype,"loadingPrefab",void 0),__decorate([r(cc.Prefab)],e.prototype,"startPrefab",void 0),e=__decorate([a],e)}(cc.Component);o.default=c,cc._RF.pop()},{"../../Controller/GameCtr":"GameCtr"}],head:[function(e,t,o){"use strict";cc._RF.push(t,"de329DY9UtH75t9OgB25nWT","head"),Object.defineProperty(o,"__esModule",{value:!0});var n=cc._decorator,i=n.ccclass,a=(n.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.setHead=function(e){var t=this.node.getChildByName("mask").getChildByName("headImg").getComponent(cc.Sprite);this.loadImg(t,e)},t.prototype.loadImg=function(o,e){null!=e&&""!=e&&cc.loader.load({url:e,type:"png"},function(e,t){o.spriteFrame=new cc.SpriteFrame(t)})},t=__decorate([i],t)}(cc.Component));o.default=a,cc._RF.pop()},{}],loading:[function(e,t,o){"use strict";cc._RF.push(t,"bc3a3PLYlZNn5Qach8Y1Gdd","loading"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../../Controller/GameCtr"),i=cc._decorator,a=i.ccclass,r=(i.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.btn_go=null,e.loadProgress=null,e.loadProgressIcon=null,e}return __extends(e,t),e.prototype.onLoad=function(){this.initNode(),this.adaptScreen()},e.prototype.initNode=function(){var e=this.node;this.btn_go=e.getChildByName("btn_go"),this.loadProgress=e.getChildByName("loadProgress"),this.loadProgressIcon=this.loadProgress.getChildByName("icon"),this.loadProgress.getComponent(cc.ProgressBar).progress=0,this.loadResource()},e.prototype.loadResource=function(){cc.loader.loadResDir("spine",this.progressCallback.bind(this),this.completeCallback.bind(this))},e.prototype.progressCallback=function(e,t,o){this.loadProgress.getComponent(cc.ProgressBar).progress=e/t,this.loadProgressIcon.x=this.loadProgress.getContentSize().width*(e/t)+25},e.prototype.completeCallback=function(){n.default.getInstance().emitEvent("loadComplete",null)},e.prototype.adaptScreen=function(){var e=this.loadProgress.getComponent(cc.Widget);e.target=cc.find("Canvas"),e.isAlignLeft=!0,e.isAlignRight=!0,e.left=67,e.right=83},e=__decorate([a],e)}(cc.Component));o.default=r,cc._RF.pop()},{"../../Controller/GameCtr":"GameCtr"}],morePower:[function(e,t,o){"use strict";cc._RF.push(t,"58a49uVbBRLF7xQ5Ef0Kk0R","morePower"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../../Common/AudioManager"),i=e("../../Controller/WXCtr"),a=e("../../Controller/GameCtr"),r=e("../../Common/ViewManager"),c=cc._decorator,s=c.ccclass,l=(c.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.onLoad=function(){this.initBtns(),this.initEvent(),this.showPower(),this.openAction()},t.prototype.openAction=function(){this.node.scale=.2,this.node.runAction(cc.sequence(cc.scaleTo(.15,1.1),cc.scaleTo(.1,1)))},t.prototype.initBtns=function(){var e=this.node.getChildByName("btn_close"),t=this.node.getChildByName("btn_morePower");this.initBtnListen(e),this.initBtnListen(t)},t.prototype.initBtnListen=function(e){e.on(cc.Node.EventType.TOUCH_END,function(e){n.default.getInstance().playSound("audio/btnCick");var t=e.target.getName();if("btn_close"==t)this.close();else if("btn_morePower"==t){if(10==a.default.powerValue)return void r.default.toast("体力值已满");i.default.share("morePower")}}.bind(this))},t.prototype.initEvent=function(){a.default.getInstance().addListener("morePowerSuccess",this.onMorePower.bind(this))},t.prototype.showPower=function(){this.node.getChildByName("lb_power").getComponent(cc.Label).string=a.default.powerValue+"/10"},t.prototype.onMorePower=function(){this.close()},t.prototype.close=function(){a.default.getInstance().removeListener("morePowerSuccess");var e=this.node.getChildByName("mask");e.setContentSize(cc.size(1080,2436)),e.runAction(cc.fadeOut(.15)),this.node.runAction(cc.sequence(cc.scaleTo(.15,.2),cc.callFunc(function(){this.node.destroy()}.bind(this))))},t=__decorate([s],t)}(cc.Component));o.default=l,cc._RF.pop()},{"../../Common/AudioManager":"AudioManager","../../Common/ViewManager":"ViewManager","../../Controller/GameCtr":"GameCtr","../../Controller/WXCtr":"WXCtr"}],otherRank:[function(e,t,o){"use strict";cc._RF.push(t,"3d1022yTD1J3K+JeWTt9sL+","otherRank"),Object.defineProperty(o,"__esModule",{value:!0});var n=cc._decorator,i=n.ccclass,a=(n.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.lb_name=null,e.lb_city=null,e.lb_rank=null,e.lb_chickenCount=null,e.headImg=null,e}return __extends(e,t),e.prototype.onLoad=function(){this.initNode()},e.prototype.initNode=function(){this.lb_name=this.node.getChildByName("lb_name"),this.lb_city=this.node.getChildByName("lb_city"),this.lb_rank=this.node.getChildByName("lb_rank"),this.lb_chickenCount=this.node.getChildByName("lb_chickenCount"),this.headImg=this.node.getChildByName("mask").getChildByName("headImg")},e.prototype.setName=function(e){this.lb_name.getComponent(cc.Label).string=e},e.prototype.setCity=function(e){this.lb_city.getComponent(cc.Label).string=e},e.prototype.setRank=function(e){this.lb_rank.getComponent(cc.Label).string=e},e.prototype.setChickenCount=function(e){this.lb_chickenCount.getComponent(cc.Label).string=e},e.prototype.setHeadImg=function(e){if(null!=e&&""!=e){var o=this.headImg.getComponent(cc.Sprite);cc.loader.load({url:e,type:"png"},function(e,t){o.spriteFrame=new cc.SpriteFrame(t)})}},e.prototype.start=function(){},e=__decorate([i],e)}(cc.Component));o.default=a,cc._RF.pop()},{}],rankFriend:[function(e,t,o){"use strict";cc._RF.push(t,"ef9639gUA1NsYZTVH9gKL58","rankFriend"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../../Common/Util"),i=cc._decorator,a=i.ccclass,r=i.property,c=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.imagenode=null,e.lb_chickenCount=null,e}return __extends(e,t),e.prototype.setChickenCount=function(e){this.lb_chickenCount.string=e},e.prototype.setHeadImg=function(e){var t=this.imagenode.getComponent(cc.Sprite);n.default.loadImg(t,e)},__decorate([r(cc.Node)],e.prototype,"imagenode",void 0),__decorate([r(cc.Label)],e.prototype,"lb_chickenCount",void 0),e=__decorate([a],e)}(cc.Component);o.default=c,cc._RF.pop()},{"../../Common/Util":"Util"}],revive:[function(e,t,o){"use strict";cc._RF.push(t,"247441KVphMBow9eLneQKKd","revive"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../../Controller/WXCtr"),i=e("../../Common/AudioManager"),a=e("../../Controller/GameCtr"),r=cc._decorator,c=r.ccclass,s=(r.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.lb_time=null,e.timeCount=10,e}return __extends(e,t),e.prototype.onLoad=function(){this.initBtns(),this.lb_time=this.node.getChildByName("lb_time")},e.prototype.openAction=function(){this.node.scale=.2,this.node.runAction(cc.sequence(cc.scaleTo(.15,1.1),cc.scaleTo(.1,1)))},e.prototype.initBtns=function(){var e=this.node.getChildByName("btn_close"),t=this.node.getChildByName("btn_revive");this.initBtnListen(e),this.initBtnListen(t)},e.prototype.initBtnListen=function(e){e.on(cc.Node.EventType.TOUCH_END,function(e){var t=e.target.getName();i.default.getInstance().playSound("audio/btnCick"),"btn_close"==t?this.close():"btn_revive"==t&&n.default.share("revive")}.bind(this))},e.prototype.update=function(e){if(0<=this.timeCount){this.timeCount-=e;var t=Math.ceil(this.timeCount);0==(this.lb_time.getComponent(cc.Label).string=t)&&this.close()}},e.prototype.close=function(){a.default.getInstance().emitEvent("choiceGame",null),this.node.runAction(cc.sequence(cc.scaleTo(.15,.2),cc.callFunc(function(){this.node.destroy()}.bind(this))))},e=__decorate([c],e)}(cc.Component));o.default=s,cc._RF.pop()},{"../../Common/AudioManager":"AudioManager","../../Controller/GameCtr":"GameCtr","../../Controller/WXCtr":"WXCtr"}],roleCard:[function(e,t,o){"use strict";cc._RF.push(t,"493f1r8I5NJkKr5rX9swiDU","roleCard"),Object.defineProperty(o,"__esModule",{value:!0});var n=cc._decorator,i=n.ccclass,a=(n.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.icon_role=null,e.icon_unlock=null,e.lb_order=null,e}return __extends(e,t),e.prototype.onLoad=function(){this.initNode()},e.prototype.initNode=function(){this.icon_role=this.node.getChildByName("icon_role"),this.icon_unlock=this.node.getChildByName("icon_unlock"),this.lb_order=this.node.getChildByName("lb_order"),this.icon_unlock.active=!1},e.prototype.setIsUnlock=function(e){this.icon_unlock.active=e},e.prototype.setOrder=function(e){this.lb_order.getComponent(cc.Label).string=e},e=__decorate([i],e)}(cc.Component));o.default=a,cc._RF.pop()},{}],role:[function(e,t,o){"use strict";cc._RF.push(t,"822eekfYgVMZKn3RdZWfo83","role"),Object.defineProperty(o,"__esModule",{value:!0});var n,i,a=e("../../Common/AudioManager"),r=cc._decorator,c=r.ccclass;r.property;(i=n||(n={}))[i.CAVE=0]="CAVE",i[i.CACTI=1]="CACTI";var s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.id=null,e.lb_name=null,e.headImg=null,e.headFrame=null,e}return __extends(e,t),e.prototype.onLoad=function(){this.lb_name=this.node.getChildByName("lb_name"),this.headFrame=this.node.getChildByName("headFrame"),this.headImg=this.node.getChildByName("mask").getChildByName("heading"),this.headFrame.active=!1},e.prototype.setName=function(e){this.lb_name.getComponent(cc.Label).string=e},e.prototype.setID=function(e){this.id=e},e.prototype.getID=function(){return this.id},e.prototype.setHeadImg=function(e){this.headFrame.active=!0;var o=this.headImg.getComponent(cc.Sprite);cc.loader.load({url:e,type:"png"},function(e,t){o.spriteFrame=new cc.SpriteFrame(t)})},e.prototype.die=function(e,t){void 0===t&&(t=!0),e==n.CAVE?this.node.runAction(cc.sequence(cc.delayTime(.1*Math.floor(3*Math.random())),cc.scaleTo(.2,0),cc.callFunc(function(){a.default.getInstance().playSound("audio/scream"),t?this.node.destroy():(this.node.active=!1,this.node.scale=1,this.node.rotation=0)}.bind(this)))):this.node.runAction(cc.sequence(cc.delayTime(.1*Math.floor(3*Math.random())),cc.spawn(cc.moveBy(.2,cc.p(500*Math.random()-250,200*Math.random()+800)),cc.rotateBy(.2,90*Math.random()-45),cc.scaleTo(.2,.5*Math.floor(Math.random())+.3)),cc.callFunc(function(){a.default.getInstance().playSound("audio/scream"),t?this.node.destroy():(this.node.active=!1,this.node.scale=1,this.node.rotation=0)}.bind(this))))},e=__decorate([c],e)}(cc.Component);o.default=s,cc._RF.pop()},{"../../Common/AudioManager":"AudioManager"}],selfInfo:[function(e,t,o){"use strict";cc._RF.push(t,"ff555ZYN1NPWrvhCF+qeJOK","selfInfo"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../../Common/AudioManager"),i=cc._decorator,a=i.ccclass,r=(i.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.lb_name=null,e.lb_chickenCount=null,e.lb_gameCount=null,e.lb_id=null,e}return __extends(e,t),e.prototype.onLoad=function(){this.initNode()},e.prototype.initNode=function(){this.lb_name=this.node.getChildByName("lb_name"),this.lb_chickenCount=this.node.getChildByName("lb_chickenCount"),this.lb_gameCount=this.node.getChildByName("lb_gameCount"),this.lb_id=this.node.getChildByName("lb_id"),this.node.getChildByName("mask").on(cc.Node.EventType.TOUCH_END,function(e){n.default.getInstance().playSound("audio/btnCick"),this.node.runAction(cc.sequence(cc.scaleTo(.1,.2),cc.callFunc(function(){this.node.destroy()}.bind(this))))}.bind(this))},e.prototype.setName=function(e){this.lb_name.getComponent(cc.Label).string=e},e.prototype.setChickenCount=function(e){this.lb_chickenCount.getComponent(cc.Label).string=e},e.prototype.setGameCount=function(e){this.lb_gameCount.getComponent(cc.Label).string=e},e.prototype.setID=function(e){this.lb_id.getComponent(cc.Label).string=e},e=__decorate([a],e)}(cc.Component));o.default=r,cc._RF.pop()},{"../../Common/AudioManager":"AudioManager"}],signIn:[function(e,t,o){"use strict";cc._RF.push(t,"3e155WwZqxG+I6W+90wLQQT","signIn"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../../Controller/HttpCtr"),i=cc._decorator,a=i.ccclass,r=(i.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._btn_close=null,e._btn_get=null,e._days=[],e}return __extends(e,t),e.prototype.onLoad=function(){this.initNode()},e.prototype.initNode=function(){this._btn_close=this.node.getChildByName("btn_close"),this._btn_get=this.node.getChildByName("btn_get");for(var e=1;e<8;e++){var t=this.node.getChildByName("day_0"+e);this._days.push(t)}this.initBtnEvent(this._btn_close),this.initBtnEvent(this._btn_get)},e.prototype.initBtnEvent=function(e){var t=this;e.on(cc.Node.EventType.TOUCH_END,function(e){"btn_close"==e.target.getName()?t.node.destroy():"btn_get"==e.target.getName()&&n.default.sign(t.doGetAward.bind(t))})},e.prototype.doGetAward=function(e){var t=this._days[e].getChildByName("icon_get");t.active=!0,t.scale=1.5,t.runAction(cc.scaleTo(.5,1))},e=__decorate([a],e)}(cc.Component));o.default=r,cc._RF.pop()},{"../../Controller/HttpCtr":"HttpCtr"}],titleNode:[function(e,t,o){"use strict";cc._RF.push(t,"1b2cajueEZKOLiG4CVfbfeh","titleNode"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../../Controller/HttpCtr"),i=e("../../Controller/GameCtr"),a=cc._decorator,r=a.ccclass,c=(a.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.lb_time=null,e.lb_des=null,e.lb_gold=null,e.titleOrderNode=null,e.timeCount=-1,e.matchingTime=10,e.answerTime=7,e.titleOrder=0,e.isBanAnswer=!0,e}return __extends(e,t),e.prototype.onLoad=function(){this.initNode(),this.adaptScreen()},e.prototype.initNode=function(){var e=this.node.getChildByName("titleFrame");this.lb_time=e.getChildByName("lb_time"),this.lb_des=e.getChildByName("lb_des"),this.lb_gold=e.getChildByName("lb_gold"),this.titleOrderNode=this.node.getChildByName("titleOrderFrame"),this.lb_time.active=!1,this.lb_des.active=!1,this.lb_gold.active=!1,this.titleOrderNode.active=!1,this.titleOrderNode.y=e.y-360},e.prototype.adaptScreen=function(){var e=i.default.getInstance().getAdaptScaleRate();(console.log("log--------titleNode scaleRate=:",e),Math.abs(e-1)<=.1)&&(this.node.getChildByName("titleFrame").getComponent(cc.Widget).top=30)},e.prototype.startTimer=function(e){this.lb_time.active=!0,this.timeCount=e,this.lb_time.getComponent(cc.Label).string=e,this.unscheduleAllCallbacks(),this.scheduleOnce(this.countDown.bind(this),1)},e.prototype.setGold=function(e){this.lb_gold.active=!0,this.lb_gold.getComponent(cc.Label).string=e},e.prototype.setDes=function(e){this.lb_des.active=!0,this.lb_des.getComponent(cc.Label).string=e,i.default.questionDes=e,console.log("log--------当前题目=:",i.default.questionDes)},e.prototype.getTitle=function(){this.node.setLocalZOrder(40),this.isBanAnswer=!1,this.lb_gold.active=!0,i.default.isMatchingOver=!0,this.titleOrder++,this.startTimer(this.answerTime),n.default.getTitle(this.setDes.bind(this)),this.showTitleOrder()},e.prototype.showMatching=function(){this.startTimer(this.matchingTime),this.setDes("匹配中...")},e.prototype.showTitleOrder=function(){var e=this.node.getChildByName("titleFrame");this.titleOrderNode.active=!0,this.titleOrderNode.opacity=255,this.titleOrderNode.y=e.y-360,this.titleOrderNode.getChildByName("lb_titleOrder").getComponent(cc.Label).string="第"+this.titleOrder+"题",this.titleOrderNode.scale=.2,this.titleOrderNode.runAction(cc.sequence(cc.scaleTo(.2,1),cc.delayTime(.5),cc.spawn(cc.moveBy(.2,cc.p(0,200)),cc.fadeOut(.2))))},e.prototype.countDown=function(){if(this.timeCount--,-1==this.timeCount&&i.default.isMatchingOver)return i.default.getInstance().emitEvent("answerFinish",null),void(this.node.active=!1);i.default.isMatchingOver||3!=this.timeCount||i.default.getInstance().emitEvent("matchCountDown",null),i.default.isMatchingOver||4!=this.timeCount||i.default.getInstance().emitEvent("showFlag",null),0!=this.timeCount||this.isBanAnswer||(i.default.getInstance().emitEvent("banAnswer",null),this.isBanAnswer=!0,this.node.setLocalZOrder(-10)),this.lb_time.getComponent(cc.Label).string=this.timeCount,this.scheduleOnce(this.countDown.bind(this),1)},e=__decorate([r],e)}(cc.Component));o.default=c,cc._RF.pop()},{"../../Controller/GameCtr":"GameCtr","../../Controller/HttpCtr":"HttpCtr"}],totalRank:[function(e,t,o){"use strict";cc._RF.push(t,"f09f2h7vkZG1YkfzatIKQgu","totalRank"),Object.defineProperty(o,"__esModule",{value:!0});var s=e("../../Common/Util"),l=e("../../Controller/GameCtr"),n=e("../../Controller/WXCtr"),i=e("../../Common/AudioManager"),a=cc._decorator,r=a.ccclass,c=a.property,d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.btn_back=null,e.place_1=null,e.place_2=null,e.place_3=null,e.title=null,e.rankContent=null,e.selfRankInfoNode=null,e.first2ThirdArr=[],e.worldRankData=null,e.selfRank=null,e.selfChickenValue=null,e.authTipNode=null,e.rankNode=null,e}return __extends(e,t),e.prototype.onLoad=function(){this.initNode(),this.adaptScreen(),l.default.getInstance().addListener("getSelfInfoSuccess1",this.initSelfRankInfo.bind(this))},e.prototype.initNode=function(){this.place_1=this.node.getChildByName("place_1"),this.place_2=this.node.getChildByName("place_2"),this.place_3=this.node.getChildByName("place_3"),this.btn_back=this.node.getChildByName("btn_back"),this.authTipNode=this.node.getChildByName("authTip"),this.title=this.node.getChildByName("title"),this.rankNode=this.node.getChildByName("rankNode"),this.selfRankInfoNode=this.node.getChildByName("selfRankInfoNode"),this.rankContent=this.node.getChildByName("rankNode").getChildByName("scrollView").getChildByName("view").getChildByName("content"),this.place_1.setLocalZOrder(10),this.place_2.setLocalZOrder(10),this.place_3.setLocalZOrder(10),this.first2ThirdArr.push(this.place_1),this.first2ThirdArr.push(this.place_2),this.first2ThirdArr.push(this.place_3),this.place_1.active=!1,this.place_2.active=!1,this.place_3.active=!1,this.title.active=!1,this.rankNode.active=!1,this.selfRankInfoNode.active=!1,this.btn_back.on(cc.Node.EventType.TOUCH_END,function(e){i.default.getInstance().playSound("audio/btnCick"),this.close()}.bind(this))},e.prototype.adaptScreen=function(){var e=cc.director.getVisibleSize();this.place_1.y=e.height/2-250,this.place_2.y=e.height/2-310,this.place_3.y=e.height/2-310,this.title.y=e.height/2-410,this.btn_back.y=e.height/2-200,this.selfRankInfoNode.y=-e.height/2,this.node.getChildByName("rankNode").y=e.height/2-600},e.prototype.init=function(){this.place_1.active=!0,this.place_2.active=!0,this.place_3.active=!0,this.title.active=!0,this.rankNode.active=!0,this.selfRankInfoNode.active=!0,this.authTipNode.active=!1,this.initRank(),this.initFirst2ThirdHead(),this.initSelfRankInfo()},e.prototype.initData=function(e,t,o){this.worldRankData=e,this.selfRank=t,this.selfChickenValue=o},e.prototype.initFirst2ThirdHead=function(){for(var e in this.worldRankData){if(Number(e)-1==3)return;var t=cc.instantiate(this.headPrefab);t.parent=this.first2ThirdArr[Number(e)-1],t.active=!0,t.y=-40,t.scale=0<Number(e)-1?.85:1,t.getComponent("head").setHead(this.worldRankData[e].Icon)}},e.prototype.initRank=function(){for(var e in this.rankContent.setContentSize(cc.size(1080,2400)),this.worldRankData){var t=cc.instantiate(this.otherRankItem);t.parent=this.rankContent,t.y=-200*Number(e)+100,t.getComponent("otherRank").setName(s.default.cutstr(this.worldRankData[e].nick,10)),t.getComponent("otherRank").setCity(this.worldRankData[e].City),t.getComponent("otherRank").setRank(this.worldRankData[e].top),t.getComponent("otherRank").setChickenCount(this.worldRankData[e].value),t.getComponent("otherRank").setHeadImg(this.worldRankData[e].Icon)}},e.prototype.initSelfRankInfo=function(){var e=l.default.getInstance().getSelfInfoFromLocal();if(e){this.selfChickenValue=this.selfChickenValue?this.selfChickenValue:0;var t=this.node.getChildByName("selfRankInfoNode"),o=t.getChildByName("lb_name"),n=t.getChildByName("lb_city"),i=t.getChildByName("lb_rank"),a=t.getChildByName("lb_chickenCount"),r=t.getChildByName("mask").getChildByName("headImg"),c=0==this.selfRank?"无排名":this.selfRank+"";o.getComponent(cc.Label).string=s.default.cutstr(e.nickName,10),n.getComponent(cc.Label).string=e.province,i.getComponent(cc.Label).string=c,a.getComponent(cc.Label).string=this.selfChickenValue,this.loadHeadImg(r,e.avatarUrl)}},e.prototype.loadHeadImg=function(e,t){var o=e.getComponent(cc.Sprite);cc.loader.load({url:t,type:"png"},function(e,t){o.spriteFrame=new cc.SpriteFrame(t)})},e.prototype.showAuthTip=function(){this.authTipNode.active=!0,n.default.createUserInfoBtn(),n.default.onUserInfoBtnTap(this.init.bind(this))},e.prototype.close=function(){l.default.getInstance().removeListener("getSelfInfoSuccess1"),this.node.runAction(cc.sequence(cc.scaleTo(.2,0),cc.callFunc(function(){this.node.destroy()}.bind(this))))},__decorate([c(cc.Prefab)],e.prototype,"headPrefab",void 0),__decorate([c(cc.Prefab)],e.prototype,"otherRankItem",void 0),e=__decorate([r],e)}(cc.Component);o.default=d,cc._RF.pop()},{"../../Common/AudioManager":"AudioManager","../../Common/Util":"Util","../../Controller/GameCtr":"GameCtr","../../Controller/WXCtr":"WXCtr"}]},{},["AudioManager","Http","MemoryDetector","UILoader","UrlConfig","UserManager","Util","ViewManager","head","GameCtr","HttpCtr","WXCtr","Game","eatChicken","morePower","revive","role","titleNode","loading","LoginAward","LoginAwardCell","RankingCell","RankingView","Start","friendRank","friendRankItem","gameStartScene","otherRank","rankFriend","roleCard","selfInfo","signIn","totalRank","BaseDialog","PopupView","PromptDialog","ToastView"]);
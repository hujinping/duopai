{"version":3,"sources":["..\\..\\..\\..\\..\\..\\assets\\Script\\UI\\game/assets\\Script\\UI\\game\\titleNode.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"..\\..\\..\\..\\..\\..\\assets\\Script\\UI\\game","sourcesContent":["import HttpCtr from \"../../Controller/HttpCtr\";\r\nimport { UILoader } from \"../../Common/UILoader\";\r\nimport UserManager from \"../../Common/UserManager\";\r\nimport GameCtr from \"../../Controller/GameCtr\";\r\n\r\nconst {ccclass, property} = cc._decorator;\r\n@ccclass\r\nexport default class NewClass extends cc.Component {\r\n\r\n    private lb_time=null;\r\n    private lb_des=null;\r\n    private lb_gold=null;\r\n    private titleOrderNode=null;\r\n   \r\n\r\n    private timeCount=-1;\r\n    private matchingTime=10;\r\n    private answerTime=7;\r\n    private titleOrder=0;\r\n    private isBanAnswer=true;\r\n    \r\n\r\n\r\n    onLoad(){\r\n        this.initNode();\r\n        this.adaptScreen();\r\n    }\r\n\r\n    initNode(){\r\n        let titleFrame=this.node.getChildByName(\"titleFrame\");\r\n        this.lb_time=titleFrame.getChildByName(\"lb_time\");\r\n        this.lb_des=titleFrame.getChildByName(\"lb_des\");\r\n        this.lb_gold=titleFrame.getChildByName(\"lb_gold\");\r\n        this.titleOrderNode=this.node.getChildByName(\"titleOrderFrame\");\r\n        \r\n        this.lb_time.active=false;\r\n        this.lb_des.active=false;\r\n        this.lb_gold.active=false;\r\n        this.titleOrderNode.active=false;\r\n        this.titleOrderNode.y=titleFrame.y-360;\r\n    }\r\n\r\n    adaptScreen(){\r\n        let scaleRate=GameCtr.getInstance().getAdaptScaleRate();\r\n        console.log(\"log--------titleNode scaleRate=:\",scaleRate);\r\n        if(Math.abs(scaleRate-1)<=0.1){\r\n            let titleFrame=this.node.getChildByName(\"titleFrame\");\r\n            let widget=titleFrame.getComponent(cc.Widget);\r\n            widget.top=30;\r\n        }\r\n    }\r\n\r\n\r\n    startTimer(time:number){\r\n        this.lb_time.active=true;\r\n        this.timeCount=time;\r\n        this.lb_time.getComponent(cc.Label).string=time;\r\n        this.unscheduleAllCallbacks();\r\n        this.scheduleOnce(this.countDown.bind(this),1);\r\n    }\r\n\r\n    setGold(gold:number){\r\n        this.lb_gold.active=true;\r\n        this.lb_gold.getComponent(cc.Label).string=gold;\r\n    }\r\n\r\n    setDes(title){\r\n        this.lb_des.active=true;\r\n        this.lb_des.getComponent(cc.Label).string=title;\r\n        GameCtr.questionDes=title;\r\n        console.log(\"log--------当前题目=:\",GameCtr.questionDes);\r\n    }\r\n\r\n    getTitle(){\r\n        this.node.setLocalZOrder(40);\r\n        this.isBanAnswer=false;\r\n        this.lb_gold.active=true;\r\n        GameCtr.isMatchingOver=true;\r\n        this.titleOrder++;\r\n        this.startTimer(this.answerTime);\r\n        HttpCtr.getTitle(this.setDes.bind(this));\r\n        this.showTitleOrder();\r\n    }\r\n\r\n    \r\n\r\n    showMatching(){\r\n        let des=\"匹配中...\"\r\n        this.startTimer(this.matchingTime);\r\n        this.setDes(des);\r\n    }\r\n\r\n    showTitleOrder(){\r\n        let titleNode=this.node.getChildByName(\"titleFrame\")\r\n        this.titleOrderNode.active=true;\r\n        this.titleOrderNode.opacity=255;\r\n        this.titleOrderNode.y=titleNode.y-360;\r\n        let lb_titleOrder=this.titleOrderNode.getChildByName(\"lb_titleOrder\");\r\n        lb_titleOrder.getComponent(cc.Label).string=\"第\"+this.titleOrder+\"题\";\r\n        this.titleOrderNode.scale=0.2;\r\n        this.titleOrderNode.runAction(cc.sequence(\r\n            cc.scaleTo(0.2,1.0),\r\n            cc.delayTime(0.5),\r\n            cc.spawn(\r\n                cc.moveBy(0.2,cc.p(0,200)),\r\n                cc.fadeOut(0.2)\r\n            )\r\n        ));\r\n    }\r\n\r\n\r\n    countDown(){\r\n        this.timeCount--;\r\n        if(this.timeCount == -1){\r\n            if(GameCtr.isMatchingOver){\r\n                GameCtr.getInstance().emitEvent(\"answerFinish\",null);\r\n                this.node.active=false;\r\n                return;\r\n            }\r\n        }\r\n\r\n        if(!GameCtr.isMatchingOver&& this.timeCount==3){\r\n            GameCtr.getInstance().emitEvent(\"matchCountDown\",null);\r\n        }\r\n\r\n        if(!GameCtr.isMatchingOver&& this.timeCount==4){\r\n            GameCtr.getInstance().emitEvent(\"showFlag\",null);\r\n        }\r\n\r\n        if(this.timeCount==0 && !this.isBanAnswer){\r\n            GameCtr.getInstance().emitEvent(\"banAnswer\",null);\r\n            this.isBanAnswer=true;\r\n            this.node.setLocalZOrder(-10);\r\n        }\r\n        this.lb_time.getComponent(cc.Label).string=this.timeCount;\r\n        this.scheduleOnce(this.countDown.bind(this),1);\r\n    }\r\n\r\n}"]}
{"version":3,"sources":["..\\..\\..\\..\\..\\..\\assets\\Script\\UI\\loginAward/assets\\Script\\UI\\loginAward\\LoginAward.ts"],"names":[],"mappings":";;;;;AAAA,oDAA+C;AAC/C,+CAA0C;AAC1C,mDAA8C;AAC9C,0CAAqC;AACrC,wDAAmD;AAE7C,IAAA,kBAAmC,EAAlC,oBAAO,EAAE,sBAAQ,CAAkB;AAG1C;IAAwC,8BAAY;IADpD;QAAA,qEAmDC;QA/CG,eAAS,GAAY,IAAI,CAAC;;QA8C1B,iBAAiB;IACrB,CAAC;IA7CG,wBAAwB;IAExB,2BAAM,GAAN;QACI,IAAI,CAAC,aAAa,EAAE,CAAC;IACzB,CAAC;IAED,kCAAa,GAAb;QAAA,iBAUC;QATG,iBAAO,CAAC,iBAAiB,CAAC,UAAC,GAAG;YAC1B,IAAI,IAAI,GAAG,GAAG,CAAC,IAAI,CAAC,SAAS,CAAC;YAC9B,KAAI,IAAI,CAAC,GAAC,CAAC,EAAE,CAAC,GAAC,IAAI,CAAC,MAAM,EAAE,CAAC,EAAE,EAAC;gBAC5B,IAAI,IAAI,GAAG,IAAI,CAAC,CAAC,CAAC,CAAC;gBACnB,IAAI,IAAI,GAAG,KAAI,CAAC,SAAS,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC;gBACtC,IAAI,IAAI,GAAG,IAAI,CAAC,YAAY,CAAC,wBAAc,CAAC,CAAC;gBAC7C,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC;aACtB;QACL,CAAC,CAAC,CAAC;IACP,CAAC;IAED,2BAAM,GAAN,UAAO,KAAK;QAAZ,iBAUC;QATG,IAAI,GAAG,GAAG,KAAK,CAAC,MAAM,CAAC,YAAY,CAAC,EAAE,CAAC,MAAM,CAAC,CAAC;QAC/C,GAAG,CAAC,YAAY,GAAG,KAAK,CAAC;QACzB,iBAAO,CAAC,IAAI,CAAC,cAAI,CAAC,iBAAiB,EAAE,EAAE,UAAC,GAAG;YACvC,GAAG,CAAC,YAAY,GAAG,IAAI,CAAC;YACxB,IAAG,GAAG,EAAC;gBACH,qBAAW,CAAC,KAAK,CAAC,MAAM,CAAC,CAAC;gBAC1B,KAAI,CAAC,aAAa,EAAE,CAAC;aACxB;QACL,CAAC,CAAC,CAAC;IACP,CAAC;IAED,0BAAK,GAAL;QACI,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,MAAM,EAAE;YACnB,OAAO;SACV;QACD,IAAI,SAAS,GAAG,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,YAAY,CAAC,mBAAS,CAAC,CAAC;QACzD,IAAI,CAAC,CAAC,SAAS,EAAE;YACb,SAAS,CAAC,OAAO,EAAE,CAAC;SACvB;aAAM;YACH,IAAI,CAAC,IAAI,CAAC,OAAO,EAAE,CAAC;SACvB;IACL,CAAC;IA1CD;QADC,QAAQ,CAAC,EAAE,CAAC,IAAI,CAAC;iDACQ;IAHT,UAAU;QAD9B,OAAO;OACa,UAAU,CAkD9B;IAAD,iBAAC;CAlDD,AAkDC,CAlDuC,EAAE,CAAC,SAAS,GAkDnD;kBAlDoB,UAAU","file":"","sourceRoot":"..\\..\\..\\..\\..\\..\\assets\\Script\\UI\\loginAward","sourcesContent":["import HttpCtr from \"../../Controller/HttpCtr\";\r\nimport PopupView from \"../view/PopupView\";\r\nimport LoginAwardCell from \"./LoginAwardCell\";\r\nimport Util from \"../../Common/Util\";\r\nimport ViewManager from \"../../Common/ViewManager\";\r\n\r\nconst {ccclass, property} = cc._decorator;\r\n\r\n@ccclass\r\nexport default class LoginAward extends cc.Component {\r\n\r\n    @property(cc.Node)\r\n    ndContent: cc.Node = null; \r\n\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n    onLoad () {\r\n        this.setAwardDatas();\r\n    }\r\n\r\n    setAwardDatas() {\r\n        HttpCtr.getLoginAwardList((res)=>{\r\n            let list = res.data.sign_days;\r\n            for(let i=0; i<list.length; i++){\r\n                let data = list[i];\r\n                let cell = this.ndContent.children[i];\r\n                let comp = cell.getComponent(LoginAwardCell);\r\n                comp.setData(data);\r\n            }\r\n        });\r\n    }\r\n\r\n    signIn(event) {\r\n        let btn = event.target.getComponent(cc.Button);\r\n        btn.interactable = false;\r\n        HttpCtr.sign(Util.getCurrTimeYYMMDD(), (res)=>{\r\n            btn.interactable = true;\r\n            if(res){\r\n                ViewManager.toast(\"签到成功\");\r\n                this.setAwardDatas();\r\n            }\r\n        });\r\n    }\r\n\r\n    close() {\r\n        if (!this.node.parent) {\r\n            return;\r\n        }\r\n        let popupView = this.node.parent.getComponent(PopupView);\r\n        if (!!popupView) {\r\n            popupView.dismiss();\r\n        } else {\r\n            this.node.destroy();\r\n        }\r\n    }\r\n\r\n    \r\n\r\n    // update (dt) {}\r\n}\r\n"]}